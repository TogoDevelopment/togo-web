{"ast":null,"code":"import _slicedToArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Button from\"react-bootstrap/Button\";import Modal from\"react-bootstrap/Modal\";import InputGroup from\"react-bootstrap/InputGroup\";import FormControl from\"react-bootstrap/FormControl\";import{finalizeTrip,confirmFinalizedTrip}from\"../APIs/OrdersAPIs\";import translate from\"../../i18n/translate\";import{toastMessage}from\"../../Actions/GeneralActions\";import{useHistory}from\"react-router-dom\";import{useDispatch}from\"react-redux\";export function FinalizeOrder(_ref){var orderId=_ref.orderId;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),verificationCode=_useState4[0],setVerificationCode=_useState4[1];var history=useHistory();var dispatch=useDispatch();var handleClose=function handleClose(){setShow(false);};var handleShow=function handleShow(){return setShow(true);};var handleChange=function handleChange(e){setVerificationCode(e.target.value);};var finalizeOrder=function finalizeOrder(){handleShow();finalizeTrip(orderId);};var send=function send(lat,long){confirmFinalizedTrip(orderId,verificationCode,lat,long).then(function(resp){dispatch(toastMessage(\"ORDERS.SUCCESS_FINALIZE_ORDER\",\"GENERAL.SUCCESS\",\"success\"));history.goBack();}).catch(function(err){return dispatch(toastMessage(\"ORDERS.ERR_FINALIZE_ORDER\",\"GENERAL.ERROR\"));});};var confirmFinalizeOrder=function confirmFinalizeOrder(){if(verificationCode){navigator.geolocation.getCurrentPosition(function(pos){send(pos.coords.latitude,pos.coords.longitude);},function(){send(0,0);});}handleClose();};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{variant:\"primary\",className:\"me-1\",onClick:finalizeOrder},/*#__PURE__*/React.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",className:\"bi bi-check-all\",viewBox:\"0 0 16 16\",style:{display:\"inline-block\"}},/*#__PURE__*/React.createElement(\"path\",{d:\"M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z\"})),translate(\"ORDER_DETAILS.FINALIZE_ORDER\"),\" \"),/*#__PURE__*/React.createElement(Modal,{show:show,onHide:handleClose,centered:true},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,translate(\"ORDER_DETAILS.FINALIZE_ORDER\"),orderId)),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-3\"},/*#__PURE__*/React.createElement(InputGroup.Text,null,translate(\"ORDER_DETAILS.VERIFICATION_CODE\")),/*#__PURE__*/React.createElement(FormControl,{value:verificationCode,onChange:handleChange}))),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:handleClose},translate(\"GENERAL.CLOSE\")),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:confirmFinalizeOrder},translate(\"GENERAL.PROCEED\")))));}","map":null,"metadata":{},"sourceType":"module"}