{"ast":null,"code":"import _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/system/togo-web-test/src/components/OrdersManager/FinalizeOrder.jsx\";\nimport React, { useState } from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport InputGroup from \"react-bootstrap/InputGroup\";\nimport FormControl from \"react-bootstrap/FormControl\";\nimport { finalizeTrip, confirmFinalizedTrip } from \"../../APIs/OrdersAPIs\";\nimport translate from \"../../i18n/translate\";\nimport { toastMessage } from \"../../Actions/GeneralActions\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nexport function FinalizeOrder(_ref) {\n  var orderId = _ref.orderId;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    show = _useState2[0],\n    setShow = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    verificationCode = _useState4[0],\n    setVerificationCode = _useState4[1];\n  var history = useHistory();\n  var dispatch = useDispatch();\n  var handleClose = function handleClose() {\n    setShow(false);\n  };\n  var handleShow = function handleShow() {\n    return setShow(true);\n  };\n  var handleChange = function handleChange(e) {\n    setVerificationCode(e.target.value);\n  };\n  var finalizeOrder = function finalizeOrder() {\n    handleShow();\n    finalizeTrip(orderId);\n  };\n  var send = function send(lat, long) {\n    confirmFinalizedTrip(orderId, verificationCode, lat, long).then(function (resp) {\n      dispatch(toastMessage(\"ORDERS.SUCCESS_FINALIZE_ORDER\", \"GENERAL.SUCCESS\", \"success\"));\n      history.goBack();\n    }).catch(function (err) {\n      return dispatch(toastMessage(\"ORDERS.ERR_FINALIZE_ORDER\", \"GENERAL.ERROR\"));\n    });\n  };\n  var confirmFinalizeOrder = function confirmFinalizeOrder() {\n    if (verificationCode) {\n      navigator.geolocation.getCurrentPosition(function (pos) {\n        send(pos.coords.latitude, pos.coords.longitude);\n      }, function () {\n        send(0, 0);\n      });\n    }\n    handleClose();\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    className: \"me-1\",\n    onClick: finalizeOrder,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"16\",\n    height: \"16\",\n    fill: \"currentColor\",\n    className: \"bi bi-check-all\",\n    viewBox: \"0 0 16 16\",\n    style: {\n      display: \"inline-block\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  })), translate(\"ORDER_DETAILS.FINALIZE_ORDER\"), \" \"), /*#__PURE__*/React.createElement(Modal, {\n    show: show,\n    onHide: handleClose,\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, translate(\"ORDER_DETAILS.FINALIZE_ORDER\"), orderId)), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputGroup, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(InputGroup.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 25\n    }\n  }, translate(\"ORDER_DETAILS.VERIFICATION_CODE\")), /*#__PURE__*/React.createElement(FormControl, {\n    value: verificationCode,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, translate(\"GENERAL.CLOSE\")), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onClick: confirmFinalizeOrder,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, translate(\"GENERAL.PROCEED\")))));\n}","map":{"version":3,"names":["React","useState","Button","Modal","InputGroup","FormControl","finalizeTrip","confirmFinalizedTrip","translate","toastMessage","useHistory","useDispatch","FinalizeOrder","_ref","orderId","_useState","_useState2","_slicedToArray","show","setShow","_useState3","_useState4","verificationCode","setVerificationCode","history","dispatch","handleClose","handleShow","handleChange","e","target","value","finalizeOrder","send","lat","long","then","resp","goBack","catch","err","confirmFinalizeOrder","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","createElement","Fragment","variant","className","onClick","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","xmlns","width","height","fill","viewBox","style","display","d","onHide","centered","Header","closeButton","Title","Body","Text","onChange","Footer"],"sources":["/home/system/togo-web-test/src/components/OrdersManager/FinalizeOrder.jsx"],"sourcesContent":["import React, {useState} from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport {finalizeTrip, confirmFinalizedTrip} from \"../../APIs/OrdersAPIs\";\r\nimport translate from \"../../i18n/translate\";\r\nimport {toastMessage} from \"../../Actions/GeneralActions\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {useDispatch} from \"react-redux\";\r\n\r\nexport function FinalizeOrder({orderId}) {\r\n    const [show, setShow] = useState(false);\r\n    const [verificationCode, setVerificationCode] = useState(\"\");\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n\r\n    const handleClose = () => {\r\n        setShow(false);\r\n    };\r\n    const handleShow = () => setShow(true);\r\n\r\n    const handleChange = (e) => {\r\n        setVerificationCode(e.target.value);\r\n    };\r\n\r\n    const finalizeOrder = () => {\r\n        handleShow();\r\n        finalizeTrip(orderId);\r\n    };\r\n    const send = (lat, long) => {\r\n        confirmFinalizedTrip(orderId, verificationCode, lat, long)\r\n            .then(resp => {\r\n                dispatch(toastMessage(\"ORDERS.SUCCESS_FINALIZE_ORDER\", \"GENERAL.SUCCESS\", \"success\"));\r\n                history.goBack();\r\n            })\r\n            .catch(err => dispatch(toastMessage(\"ORDERS.ERR_FINALIZE_ORDER\", \"GENERAL.ERROR\")));\r\n        }\r\n    const confirmFinalizeOrder = () => {\r\n        if (verificationCode) {\r\n            navigator.geolocation.getCurrentPosition((pos)=>{\r\n                send(pos.coords.latitude, pos.coords.longitude);\r\n            }, ()=>{\r\n                send(0, 0);\r\n            })\r\n        }\r\n        handleClose();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button\r\n                variant=\"primary\"\r\n                className=\"me-1\"\r\n                onClick={finalizeOrder}\r\n            >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-check-all\" viewBox=\"0 0 16 16\" style={{display: \"inline-block\"}}>\r\n                    <path d=\"M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z\"/>\r\n                </svg>\r\n                {translate(\"ORDER_DETAILS.FINALIZE_ORDER\")}{\" \"}\r\n            </Button>\r\n            <Modal show={show} onHide={handleClose} centered>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>{translate(\"ORDER_DETAILS.FINALIZE_ORDER\")}{orderId}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <InputGroup className=\"mb-3\">\r\n                        <InputGroup.Text>{translate(\"ORDER_DETAILS.VERIFICATION_CODE\")}</InputGroup.Text>\r\n                        <FormControl value={verificationCode} onChange={handleChange} />\r\n                    </InputGroup>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={handleClose}>\r\n                        {translate(\"GENERAL.CLOSE\")}\r\n                    </Button>\r\n                    <Button variant=\"primary\" onClick={confirmFinalizeOrder}>\r\n                        {translate(\"GENERAL.PROCEED\")}\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}