{"ast":null,"code":"import _slicedToArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Grid,Checkbox,Box,Flex,Select,Button}from\"@chakra-ui/react\";import styles from\"./Styles\";import React,{useCallback,useEffect,useState}from\"react\";import{useSelector,useDispatch}from'react-redux';import{getBusinessLocation,updateTransporterBusniessLocation}from\"../../Actions/ProfileActions\";import Loader from\"../../components/Loader/Loader\";import{isTransporter}from\"../../Util\";import{Input,Text}from\"@chakra-ui/react\";import{getBusinessTypes,setClientBusiness}from\"../../APIs/ProfileAPIs\";import{Formik,Form}from\"formik\";import{toastMessage}from\"../../Actions/GeneralActions\";import'./BusinessLocation.css';import translate from\"../../i18n/translate\";export default function BusinessLocation(){var dispatch=useDispatch();var businessLocations=useSelector(function(state){return state.profile.businessLocations;});var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var isTransporterVal=isTransporter();var fetchData=useCallback(function(){setLoading(true);dispatch(getBusinessLocation(function(){setLoading(false);},function(err){setLoading(false);dispatch(toastMessage(err));}));},[dispatch]);useEffect(function(){fetchData();},[fetchData]);return/*#__PURE__*/React.createElement(Box,styles.content,loading?/*#__PURE__*/React.createElement(Loader,null):isTransporterVal?/*#__PURE__*/React.createElement(TransporterBusinessLocation,{businessLocations:businessLocations}):/*#__PURE__*/React.createElement(ClientBusinessLocation,{businessLocations:businessLocations,fetchData:fetchData}));};var ClientBusinessLocation=function ClientBusinessLocation(_ref){var _ref$businessLocation=_ref.businessLocations,BusinessName=_ref$businessLocation.BusinessName,BusinessPlace=_ref$businessLocation.BusinessPlace,BusinessTypeId=_ref$businessLocation.BusinessTypeId,fetchData=_ref.fetchData;var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),bussinessTypes=_useState4[0],setBusinessTypes=_useState4[1];var dispatch=useDispatch();useEffect(function(){getBusinessTypes().then(function(_ref2){var server_response=_ref2.data.server_response;setBusinessTypes(server_response);}).catch(function(err){console.log(err);});},[]);var handleSubmit=function handleSubmit(values){setClientBusiness(values).then(function(){fetchData();dispatch(toastMessage(\"Business location has been updated\",\"Updated Successfully\",\"success\"));}).catch(function(err){console.log(err);dispatch(toastMessage(err));});};return/*#__PURE__*/React.createElement(Flex,{direction:\"column\",w:\"80%\"},/*#__PURE__*/React.createElement(Formik,{enableReinitialize:true,initialValues:{BusinessName:BusinessName,BusinessPlace:BusinessPlace,BusinessTypeId:BusinessTypeId},onSubmit:handleSubmit},function(_ref3){var values=_ref3.values,handleChange=_ref3.handleChange,handleSubmit=_ref3.handleSubmit,setFieldValue=_ref3.setFieldValue;return/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Text,Object.assign({},styles.title,styles.greyTitle),translate(\"BUSINESS_LOCATION.NAME\"),\":\"),/*#__PURE__*/React.createElement(Input,{placeholder:\"Business Name\",name:\"BusinessName\",onChange:handleChange,value:values.BusinessName,ml:3}),/*#__PURE__*/React.createElement(Text,Object.assign({},styles.title,styles.greyTitle),translate(\"BUSINESS_LOCATION.PLACE\"),\":\"),/*#__PURE__*/React.createElement(Input,{placeholder:\"Business Place\",name:\"BusinessPlace\",onChange:handleChange,value:values.BusinessPlace,ml:3}),/*#__PURE__*/React.createElement(Text,Object.assign({},styles.title,styles.greyTitle),translate(\"BUSINESS_LOCATION.TYPE\"),\":\"),/*#__PURE__*/React.createElement(Select,{placeholder:\"Business Type\",ml:3,name:\"BusinessTypeId\",onChange:function onChange(_ref4){var value=_ref4.target.value;return setFieldValue('BusinessTypeId',value);}},bussinessTypes.map(function(_ref5){var Name=_ref5.Name,id=_ref5.id;return/*#__PURE__*/React.createElement(\"option\",{key:id,selected:BusinessTypeId===id,value:id},Name);})),/*#__PURE__*/React.createElement(Button,Object.assign({type:\"submit\"},styles.updateButton),translate(\"BUSINESS_LOCATION.UPDATE\")));}));};var TransporterBusinessLocation=function TransporterBusinessLocation(_ref6){var businessLocations=_ref6.businessLocations;var dispatch=useDispatch();var handleClick=function handleClick(_ref7){var _ref7$target=_ref7.target,value=_ref7$target.value,checked=_ref7$target.checked;dispatch(updateTransporterBusniessLocation(value,checked?\"Add\":\"Remove\"));};return/*#__PURE__*/React.createElement(Grid,{gridTemplateColumns:\"repeat(2, 1fr)\"},businessLocations.map(function(_ref8){var IdCity=_ref8.IdCity,CityName=_ref8.CityName,CheckAdded=_ref8.CheckAdded;return/*#__PURE__*/React.createElement(Checkbox,Object.assign({colorScheme:\"green\",key:IdCity,defaultIsChecked:CheckAdded===\"Added\",value:IdCity,onChange:handleClick},styles.subTitle),CityName);}));};","map":null,"metadata":{},"sourceType":"module"}