{"ast":null,"code":"import _slicedToArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from\"react\";import{useEffect}from\"react\";import{Button,Dropdown,Form,FormControl,InputGroup,Spinner}from\"react-bootstrap\";import{GetCountryCode,LoginUser}from\"./APIs/LoginAPIs\";import TogoContainer from\"./TogoContainer\";import locicon from\"../assets/locationn.png\";import{useHistory}from\"react-router-dom\";export default function Login(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loadingSubmit=_useState2[0],setLoadingSubmit=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),countryCodes=_useState4[0],setCountryCodes=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),selectedCountryCode=_useState6[0],setSelectedCountryCode=_useState6[1];var history=useHistory();var phoneRef=useRef();useEffect(function(){GetCountryCode().then(function(res){setCountryCodes(res.data.server_response);setSelectedCountryCode(res.data.server_response[0]);localStorage.setItem(\"RegId\",res.data.server_response[0].regId);localStorage.setItem(\"RegPostCode\",res.data.server_response[0].postValue);});},[]);return/*#__PURE__*/React.createElement(TogoContainer,null,/*#__PURE__*/React.createElement(\"div\",{className:\"togo-outling\"},/*#__PURE__*/React.createElement(Dropdown,{className:\"rounded-22 bg-white\",onSelect:function onSelect(eve){setSelectedCountryCode(countryCodes[eve]);localStorage.setItem(\"RegId\",countryCodes[eve].regId);localStorage.setItem(\"RegPostCode\",countryCodes[eve].postValue);}},/*#__PURE__*/React.createElement(Dropdown.Toggle,{variant:\"\",className:\"w-100 text-start d-flex align-items-center shadow-none\"},/*#__PURE__*/React.createElement(\"img\",{src:locicon,style:{width:\"24px\",height:\"24px\"},className:\"me-1\",alt:\"worldicon\"}),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"97%\"}},\"\".concat(selectedCountryCode===null||selectedCountryCode===void 0?void 0:selectedCountryCode.regName,\" (\").concat(selectedCountryCode===null||selectedCountryCode===void 0?void 0:selectedCountryCode.postValue,\")\"))),/*#__PURE__*/React.createElement(Dropdown.Menu,{className:\"w-100\"},countryCodes.map(function(country,index){return/*#__PURE__*/React.createElement(Dropdown.Item,{eventKey:index,key:index,className:\"d-flex\"},\"\".concat(country.regName,\" (\").concat(country.postValue,\")\"));})))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formGridEmail\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Enter mobile number\"),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{maxLength:9,onInput:function onInput(ev){ev.target.value=ev.target.value.replace(/[^0-9]/gi,\"\");},type:\"text\",className:\"bg-white rounded-22\",ref:phoneRef}))),\"Activation code will be sent to your mobileNumber\",/*#__PURE__*/React.createElement(Button,{variant:\"\",className:\"togo-button w-75 rounded-22\",disabled:loadingSubmit,onClick:function onClick(){var phoneNumber=phoneRef.current.value;if(phoneNumber.length===9){setLoadingSubmit(true);LoginUser(localStorage.getItem(\"RegPostCode\")+phoneRef.current.value).then(function(res){localStorage.setItem(\"PhoneNumber\",phoneNumber);setLoadingSubmit(false);history.push(\"/activate\");});}}},loadingSubmit&&/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",size:\"sm\"}),\"Send\"));}","map":null,"metadata":{},"sourceType":"module"}