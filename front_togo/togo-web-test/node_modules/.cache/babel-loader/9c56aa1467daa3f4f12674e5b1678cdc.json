{"ast":null,"code":"import _regeneratorRuntime from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/system/togo-web-test/src/components/AdminPanel/SignIn.jsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { Button, Form, FormControl, InputGroup, Spinner } from \"react-bootstrap\";\nimport { ReactComponent as CarIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/car.svg\";\nimport { ReactComponent as SteeringIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/steering.svg\";\nimport { ReactComponent as WheelIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/wheel.svg\";\nimport logo from \"../../assets/logo.png\";\nimport { animate, motion, useAnimation, useMotionValue } from 'framer-motion';\nimport { ReactComponent as EyeIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/eye.svg\";\nimport { tempRegisterAdmin, adminLogin, updateAdminWebNotificationToken } from \"../../APIs/AdminPanelApis\"; // tempRegisterAdmin to manually register an admin\n\nimport { getUserToken } from \"../../firebase\";\nimport { useHistory } from \"react-router\";\nexport default function SignIn() {\n  var history = useHistory();\n  var x = useMotionValue(0);\n\n  var _useState = useState(\"password\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      type = _useState2[0],\n      setType = _useState2[1];\n\n  useEffect(function () {\n    var controls = animate(x, window.innerWidth - 220, {\n      type: \"spring\",\n      stiffness: 10,\n      repeat: Infinity,\n      repeatType: \"reverse\",\n      delay: \"2\",\n      onComplete: function onComplete(v) {}\n    });\n    return controls.stop;\n  }, []);\n  var controls = useAnimation();\n  useEffect(function () {\n    controls.start(function (i) {\n      return {\n        right: [100, 400, 100],\n        top: [0, window.innerHeight - 250, 0],\n        rotate: 360,\n        scale: 0.5,\n        transition: {\n          /* delay: i * 0.3, */\n\n          /* repeat: Infinity, */\n          duration: 4,\n          repeatDelay: 2\n        }\n      };\n    });\n  }, []);\n  var controls2 = useAnimation();\n  useEffect(function () {\n    controls2.start(function (i) {\n      return {\n        scale: 0.5,\n        rotate: 45\n      };\n    });\n  }, []); // const xx = useMotionValue(10);\n  // const y = (xx, (value) => {\n  //     console.log(value);\n  //     return value * 2;\n  // });\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loadingSubmit = _useState4[0],\n      setLoadingSubmit = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      showErrMsg = _useState6[0],\n      setShowErrMsg = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      errMsg = _useState8[0],\n      setErrMsg = _useState8[1];\n\n  var showValidationMessage = function showValidationMessage(msg) {\n    setShowErrMsg(true);\n    setErrMsg(msg);\n  }; // request browser notification permission to use firebase push notification system (FCM)\n\n\n  function requestPermission() {\n    console.log('Requesting permission...');\n    Notification.requestPermission().then(function (permission) {\n      if (permission === 'granted') {\n        console.log('Notification permission granted.'); // when permission is granted get FCM notification token from firebase\n\n        tokenFunc();\n      } else {\n        console.log('Notification permission denied.');\n      }\n    });\n  }\n\n  var data; // get FCM registration token\n\n  function tokenFunc() {\n    return _tokenFunc.apply(this, arguments);\n  }\n\n  function _tokenFunc() {\n    _tokenFunc = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getUserToken();\n\n            case 2:\n              data = _context.sent;\n\n              if (data) {\n                console.log(\"Token is\", data); // update web notification token to the new FCM token for this user\n\n                updateAdminWebNotificationToken(data).then(function (res) {\n                  console.log(res.data);\n                });\n              }\n\n              return _context.abrupt(\"return\", data);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _tokenFunc.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"align-items-center d-flex togo-bg justify-content-center w-100\",\n    style: {\n      height: \"93.9%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sign-in bg-white rounded-22 shadow p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: function onSubmit(event) {\n      event.preventDefault();\n      var formData = new FormData(event.target);\n      var userInput = Object.fromEntries(formData.entries());\n\n      if (userInput.username && userInput.password) {\n        setLoadingSubmit(true);\n        adminLogin(userInput.username, userInput.password).then(function (res) {\n          if (typeof res.data === \"object\" && JSON.stringify(res.data) !== '{}') {\n            localStorage.setItem(\"AdminFirstName\", res.data.FirstName);\n            localStorage.setItem(\"AdminLastName\", res.data.LastName);\n            localStorage.setItem(\"AdminEmail\", res.data.Email);\n            localStorage.setItem(\"AdminMobileNumber\", res.data.MobileNumber);\n            localStorage.setItem(\"AdminToken\", res.data.Token);\n            localStorage.setItem(\"Adminid\", res.data.id); // request notification permission and get FCM token\n\n            requestPermission();\n            setShowErrMsg(false);\n            history.push(\"/adminapp/adminpanel/\");\n          } else {\n            showValidationMessage(res.data);\n          }\n\n          setLoadingSubmit(false);\n        });\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-lbl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"togoUsername\",\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(InputGroup, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    type: \"text\",\n    className: \"\",\n    placeholder: \"Username\",\n    name: \"username\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"togoPassword\",\n    className: \"position-relative\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(InputGroup, {\n    className: \"mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    type: type,\n    className: \"\",\n    placeholder: \"Password\",\n    name: \"password\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(EyeIcon, {\n    className: \"eye-icon\",\n    onClick: function onClick() {\n      setType(type === \"password\" ? \"text\" : \"password\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    variant: \"\",\n    type: \"submit\",\n    className: \"d-block togo-button\",\n    disabled: loadingSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 21\n    }\n  }, loadingSubmit && /*#__PURE__*/React.createElement(Spinner, {\n    animation: \"border\",\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 43\n    }\n  }), \"Sign In\"), showErrMsg && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"d-block\",\n    style: {\n      color: \"red\",\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 36\n    }\n  }, errMsg))), /*#__PURE__*/React.createElement(motion.div, {\n    style: {\n      position: \"absolute\",\n      animationName: \"example\",\n      animationDuration: \"3s\",\n      animationFillMode: \"forwards\"\n    },\n    transition: {\n      duration: 2\n    } //animate=\"example\"\n    ,\n    animate: {\n      //left: [50, 30, 50],\n      //top: [50, 80, 100],\n      scale: 0.5,\n      rotate: 45\n    } //initial=\"a\"\n    // variants={{\n    //     a: {left: \"10%\", top: \"50%\", rotate: 0, scale: 1},\n    //     b: {left: \"-10%\", top: \"40%\", rotate: 20, scale: 0.7},\n    //     c: {left: \"10%\", top: \"20%\", rotate: 45, scale: 0.5},\n    // }}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CarIcon, {\n    className: \"svg-bg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(motion.div, {\n    animate: controls,\n    style: {\n      position: \"absolute\"\n    },\n    initial: {\n      scale: 0.5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SteeringIcon, {\n    className: \"svg-bg svg-steering\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(motion.div, {\n    style: {\n      left: x,\n      position: \"absolute\",\n      bottom: 40\n    },\n    animate: {\n      rotate: 360\n    },\n    transition: {\n      duration: 2,\n      repeat: Infinity\n    },\n    initial: {\n      rotate: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(WheelIcon, {\n    className: \"svg-bg svg-wheel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 17\n    }\n  })));\n}","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/AdminPanel/SignIn.jsx"],"names":["React","useEffect","useState","Button","Form","FormControl","InputGroup","Spinner","logo","animate","motion","useAnimation","useMotionValue","tempRegisterAdmin","adminLogin","updateAdminWebNotificationToken","getUserToken","useHistory","SignIn","history","x","type","setType","controls","window","innerWidth","stiffness","repeat","Infinity","repeatType","delay","onComplete","v","stop","start","i","right","top","innerHeight","rotate","scale","transition","duration","repeatDelay","controls2","loadingSubmit","setLoadingSubmit","showErrMsg","setShowErrMsg","errMsg","setErrMsg","showValidationMessage","msg","requestPermission","console","log","Notification","then","permission","tokenFunc","data","res","height","event","preventDefault","formData","FormData","target","userInput","Object","fromEntries","entries","username","password","JSON","stringify","localStorage","setItem","FirstName","LastName","Email","MobileNumber","Token","id","push","color","textAlign","position","animationName","animationDuration","animationFillMode","left","bottom"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Button, Form, FormControl, InputGroup, Spinner } from \"react-bootstrap\";\r\nimport { ReactComponent as CarIcon } from \"../../assets/car.svg\";\r\nimport { ReactComponent as SteeringIcon } from \"../../assets/steering.svg\";\r\nimport { ReactComponent as WheelIcon } from \"../../assets/wheel.svg\";\r\nimport logo from \"../../assets/logo.png\";\r\nimport { animate, motion, useAnimation, useMotionValue } from 'framer-motion';\r\nimport { ReactComponent as EyeIcon } from \"../../assets/eye.svg\";\r\nimport { tempRegisterAdmin, adminLogin, updateAdminWebNotificationToken } from \"../../APIs/AdminPanelApis\"; // tempRegisterAdmin to manually register an admin\r\nimport { getUserToken } from \"../../firebase\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nexport default function SignIn() {\r\n    const history = useHistory();\r\n\r\n    const x = useMotionValue(0)\r\n    const [type, setType] = useState(\"password\");\r\n    useEffect(() => {\r\n        const controls = animate(x, window.innerWidth - 220, {\r\n            type: \"spring\",\r\n            stiffness: 10,\r\n            repeat: Infinity,\r\n            repeatType: \"reverse\",\r\n            delay: \"2\",\r\n            onComplete: v => {\r\n\r\n\r\n            }\r\n        });\r\n\r\n        return controls.stop;\r\n    }, []);\r\n    const controls = useAnimation()\r\n\r\n    useEffect(() => {\r\n        controls.start(i => ({\r\n            right: [100, 400, 100],\r\n            top: [0, window.innerHeight - 250, 0],\r\n            rotate: 360,\r\n            scale: 0.5,\r\n            transition: { /* delay: i * 0.3, */ /* repeat: Infinity, */ duration: 4, repeatDelay: 2 },\r\n        }));\r\n\r\n    }, []);\r\n\r\n    const controls2 = useAnimation()\r\n\r\n    useEffect(() => {\r\n        controls2.start(i => ({\r\n            scale: 0.5,\r\n            rotate: 45,\r\n        }));\r\n\r\n    }, []);\r\n\r\n    // const xx = useMotionValue(10);\r\n\r\n    // const y = (xx, (value) => {\r\n    //     console.log(value);\r\n    //     return value * 2;\r\n    // });\r\n\r\n    const [loadingSubmit, setLoadingSubmit] = useState(false);\r\n    const [showErrMsg, setShowErrMsg] = useState(false);\r\n    const [errMsg, setErrMsg] = useState(\"\");\r\n\r\n    const showValidationMessage = (msg) => {\r\n        setShowErrMsg(true);\r\n        setErrMsg(msg);\r\n    }\r\n\r\n    // request browser notification permission to use firebase push notification system (FCM)\r\n    function requestPermission() {\r\n        console.log('Requesting permission...');\r\n        Notification.requestPermission().then((permission) => {\r\n            if (permission === 'granted') {\r\n                console.log('Notification permission granted.');\r\n\r\n                // when permission is granted get FCM notification token from firebase\r\n                tokenFunc();\r\n            } else {\r\n                console.log('Notification permission denied.');\r\n            }\r\n        })\r\n    }\r\n\r\n    let data;\r\n\r\n    // get FCM registration token\r\n    async function tokenFunc() {\r\n        data = await getUserToken();\r\n        if (data) {\r\n            console.log(\"Token is\", data);\r\n\r\n            // update web notification token to the new FCM token for this user\r\n            updateAdminWebNotificationToken(data).then((res) => {\r\n                console.log(res.data);\r\n            })\r\n        }\r\n        return data;\r\n    }\r\n\r\n    return (\r\n        <div className=\"align-items-center d-flex togo-bg justify-content-center w-100\" style={{ height: \"93.9%\" }}>\r\n            <div className=\"sign-in bg-white rounded-22 shadow p-4\">\r\n                <img src={logo} alt=\"logo\" />\r\n                <Form onSubmit={(event) => {\r\n                    event.preventDefault();\r\n                    const formData = new FormData(event.target);\r\n                    const userInput = Object.fromEntries(formData.entries());\r\n\r\n                    if (userInput.username && userInput.password) {\r\n\r\n                        setLoadingSubmit(true)\r\n\r\n                        adminLogin(userInput.username, userInput.password).then((res) => {\r\n\r\n                            if (typeof res.data === \"object\" && JSON.stringify(res.data) !== '{}') {\r\n\r\n                                localStorage.setItem(\"AdminFirstName\", res.data.FirstName);\r\n                                localStorage.setItem(\"AdminLastName\", res.data.LastName);\r\n                                localStorage.setItem(\"AdminEmail\", res.data.Email);\r\n                                localStorage.setItem(\"AdminMobileNumber\", res.data.MobileNumber);\r\n                                localStorage.setItem(\"AdminToken\", res.data.Token);\r\n                                localStorage.setItem(\"Adminid\", res.data.id);\r\n\r\n                                // request notification permission and get FCM token\r\n                                requestPermission();\r\n\r\n                                setShowErrMsg(false);\r\n\r\n                                history.push(\"/adminapp/adminpanel/\");\r\n\r\n                            } else {\r\n                                showValidationMessage(res.data);\r\n                            }\r\n\r\n                            setLoadingSubmit(false);\r\n                        })\r\n\r\n                    }\r\n                }}>\r\n                    <div className=\"login-lbl\">\r\n                        <p>Login</p>\r\n                        <hr />\r\n                    </div>\r\n\r\n                    <Form.Group controlId=\"togoUsername\" className=\"\">\r\n\r\n                        <InputGroup className=\"mb-3\">\r\n                            <FormControl\r\n                                type=\"text\"\r\n                                className=\"\"\r\n                                placeholder=\"Username\"\r\n                                name=\"username\"\r\n                                required\r\n                            />\r\n                        </InputGroup>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"togoPassword\" className=\"position-relative\">\r\n\r\n                        <InputGroup className=\"mb-2\">\r\n                            <FormControl\r\n                                type={type}\r\n                                className=\"\"\r\n                                placeholder=\"Password\"\r\n                                name=\"password\"\r\n                                required\r\n                            />\r\n\r\n                        </InputGroup>\r\n                        <EyeIcon className=\"eye-icon\" onClick={() => {\r\n                            setType(type === \"password\" ? \"text\" : \"password\");\r\n                        }} />\r\n                    </Form.Group>\r\n                    <Button\r\n                        variant=\"\"\r\n                        type=\"submit\"\r\n                        className=\"d-block togo-button\"\r\n                        disabled={loadingSubmit}\r\n                    >\r\n                        {loadingSubmit && <Spinner animation=\"border\" size=\"sm\" />}\r\n                        Sign In\r\n                    </Button>\r\n                    {showErrMsg && <span className=\"d-block\" style={{ color: \"red\", textAlign: \"center\" }}>{errMsg}</span>}\r\n                      {/* <Button onClick={() => { tempRegisterAdmin().then((res) => { console.log(res.data) }) }}> register </Button> */}\r\n                </Form>\r\n            </div>\r\n            <motion.div\r\n                style={{\r\n                    position: \"absolute\",\r\n                    animationName: \"example\",\r\n                    animationDuration: \"3s\",\r\n                    animationFillMode: \"forwards\"\r\n                }}\r\n                transition={{ duration: 2 }}\r\n                //animate=\"example\"\r\n                animate={{\r\n                    //left: [50, 30, 50],\r\n                    //top: [50, 80, 100],\r\n                    scale: 0.5,\r\n                    rotate: 45,\r\n                }}\r\n            //initial=\"a\"\r\n            // variants={{\r\n            //     a: {left: \"10%\", top: \"50%\", rotate: 0, scale: 1},\r\n            //     b: {left: \"-10%\", top: \"40%\", rotate: 20, scale: 0.7},\r\n            //     c: {left: \"10%\", top: \"20%\", rotate: 45, scale: 0.5},\r\n            // }}\r\n            >\r\n                <CarIcon className=\"svg-bg\" />\r\n            </motion.div>\r\n            <motion.div\r\n                animate={controls}\r\n                style={{\r\n                    position: \"absolute\"\r\n                }}\r\n                initial={{\r\n                    scale: 0.5\r\n                }}\r\n            >\r\n                <SteeringIcon className=\"svg-bg svg-steering\" />\r\n            </motion.div>\r\n            <motion.div\r\n                style={{ left: x, position: \"absolute\", bottom: 40 }}\r\n                animate={{\r\n                    rotate: 360\r\n                }}\r\n                transition={{ duration: 2, repeat: Infinity }}\r\n                initial={{ rotate: 0 }}\r\n            >\r\n                <WheelIcon className=\"svg-bg svg-wheel\" />\r\n            </motion.div>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}