{"ast":null,"code":"import _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/system/togo-web-test/src/components/AdminPanel/CustomerInfo/UsersMap.jsx\";\n\nimport React, { Component, useState, useEffect } from \"react\";\nimport \"leaflet/dist/leaflet.css\";\nimport { MapContainer, Marker, Popup, TileLayer } from \"react-leaflet\";\nimport L from 'leaflet';\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Badge from \"react-bootstrap/Badge\";\nimport Table from \"react-bootstrap/Table\";\nimport './styles.css';\nimport { GetAllCities, getLocationUsers } from \"../../../APIs/AdminPanelApis\";\nimport { BiLocationPlus } from 'react-icons/bi';\nvar DefaultIcon = L.icon({\n  iconUrl: icon,\n  shadowUrl: iconShadow\n});\nL.Marker.prototype.options.icon = DefaultIcon;\n\nvar UsersMap = function UsersMap(props) {\n  /* const [windowHeight, setWindowHeight] = useState(window.innerHeight);\r\n    useEffect(() => {\r\n      function handleResize() {\r\n          setWindowHeight(window.innerHeight)\r\n      }\r\n        window.addEventListener('resize', handleResize)\r\n  }, []) */\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      btnClients = _useState2[0],\n      setBtnClients = _useState2[1];\n\n  var _useState3 = useState(\"active\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      btnTransporters = _useState4[0],\n      setBtnTransporters = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      locationUsers = _useState6[0],\n      setTempLocationUsers = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      show = _useState8[0],\n      setShow = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      modalTitle = _useState10[0],\n      setModalTitle = _useState10[1];\n\n  var handleClose = function handleClose() {\n    return setShow(false);\n  };\n\n  var handleShow = function handleShow() {\n    return setShow(true);\n  };\n\n  var toggleHandler = function toggleHandler() {\n    if (btnClients === \"active\") {\n      setBtnClients(\"\");\n      setBtnTransporters(\"active\");\n      GetAllCities(\"transporters\").then(function (res) {\n        setAllCities(res.data.cities_list);\n      });\n    } else {\n      setBtnClients(\"active\");\n      setBtnTransporters(\"\");\n      GetAllCities(\"clients\").then(function (res) {\n        setAllCities(res.data.cities_list);\n      });\n    }\n  };\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      allCities = _useState12[0],\n      setAllCities = _useState12[1];\n\n  var _useState13 = useState({\n    \"centerLat\": 0,\n    \"centerLong\": 0\n  }),\n      _useState14 = _slicedToArray(_useState13, 2),\n      centerMarkerPosition = _useState14[0],\n      setCenterMarkerPosition = _useState14[1];\n\n  useEffect(function () {\n    GetAllCities(\"transporters\").then(function (res) {\n      setAllCities(res.data.cities_list); // console.log(res.data);\n      // setCenterMarkerPosition(getCenter(res.data.cities_list));\n      // console.log(getCenter(res.data.cities_list))\n    });\n  }, []);\n\n  var getCenter = function getCenter(points) {\n    var sumX = 0;\n    var sumY = 0;\n    var n = points.length;\n\n    for (var i = 0; i < points.length; i++) {\n      sumX += parseFloat(points[i].LatRegion);\n      sumY += parseFloat(points[i].LongRegion);\n    }\n\n    return {\n      \"centerLat\": 1 / n * sumX,\n      \"centerLong\": 1 / n * sumY\n    };\n  };\n\n  var viewLocationUsers = function viewLocationUsers(cityId, cityName) {\n    var type = btnTransporters == \"active\" ? \"transporters\" : \"clients\";\n    handleShow();\n    setModalTitle(type.charAt(0).toUpperCase() + type.slice(1) + \" in \" + cityName);\n    getLocationUsers(cityId, type).then(function (res) {\n      // console.log(res.data.transporters_list);\n      setTempLocationUsers(res.data.transporters_list);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-100 d-flex flex-column bg-white p-3 rounded-22 shadow map-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"toggle-users\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-secondary\",\n    className: btnClients + \" toggleButtonLeft\",\n    onClick: toggleHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, \"Clients\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-secondary\",\n    className: btnTransporters + \" toggleButtonRight\",\n    onClick: toggleHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, \"Transporters\")), /*#__PURE__*/React.createElement(MapContainer, {\n    key: JSON.stringify([0, 0]),\n    id: \"mapId\",\n    center: [31.9522, 35.2332],\n    zoom: 9.5,\n    style: {\n      height: \"100%\"\n    },\n    className: \"rounded-22\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(TileLayer, {\n    attribution: \"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n    url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }), allCities === null || allCities === void 0 ? void 0 : allCities.map(function (city, index) {\n    return /*#__PURE__*/React.createElement(Marker, {\n      key: index,\n      position: L.latLng(parseFloat(city.LatRegion), parseFloat(city.LongRegion)),\n      onClick: function onClick() {\n        console.log(\"test\");\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 32\n      }\n    }, /*#__PURE__*/React.createElement(Popup, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 29\n      }\n    }, city.Name, \" \", /*#__PURE__*/React.createElement(\"span\", {\n      onClick: function onClick() {\n        return viewLocationUsers(city.id, city.Name);\n      },\n      className: \"view-users-icon\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"bi bi-people-fill\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 121\n      }\n    }))));\n  }))), /*#__PURE__*/React.createElement(Modal, {\n    size: \"lg\",\n    show: show,\n    onHide: handleClose,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }, modalTitle)), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 33\n    }\n  }, \"Full Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 33\n    }\n  }, \"Business Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 33\n    }\n  }, \"Phone Number\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 25\n    }\n  }, locationUsers === null || locationUsers === void 0 ? void 0 : locationUsers.map(function (user, index) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 44\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"rounded-circle d-flex light-turquoise-bg me-3 img-div\",\n      style: {\n        position: \"relative\",\n        width: \"50px\",\n        height: \"50px\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"user-img\",\n      src: user.transporter_info.imgURL ? \"https://togo.ps/togo/MobileAPi/\" + user.transporter_info.imgURL : \"https://freepikpsd.com/file/2019/10/avatar-icon-png-5-Images-PNG-Transparent.png\",\n      alt: \"user-profile-pic\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 49\n      }\n    }), user.isActive && /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        backgroundColor: \"green\",\n        width: \"10px\",\n        height: \"10px\",\n        borderRadius: \"50%\",\n        position: \"absolute\",\n        right: \"0\",\n        top: \"0\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 67\n      }\n    }))), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 41\n      }\n    }, user.transporter_info.fullName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 41\n      }\n    }, user.transporter_info.businessName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 41\n      }\n    }, user.transporter_info.PhoneNumber));\n  })))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: handleClose,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 21\n    }\n  }, \"Close\"))));\n};\n\nexport default UsersMap;","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/AdminPanel/CustomerInfo/UsersMap.jsx"],"names":["React","Component","useState","useEffect","MapContainer","Marker","Popup","TileLayer","L","icon","iconShadow","Button","Modal","Badge","Table","GetAllCities","getLocationUsers","BiLocationPlus","DefaultIcon","iconUrl","shadowUrl","prototype","options","UsersMap","props","btnClients","setBtnClients","btnTransporters","setBtnTransporters","locationUsers","setTempLocationUsers","show","setShow","modalTitle","setModalTitle","handleClose","handleShow","toggleHandler","then","res","setAllCities","data","cities_list","allCities","centerMarkerPosition","setCenterMarkerPosition","getCenter","points","sumX","sumY","n","length","i","parseFloat","LatRegion","LongRegion","viewLocationUsers","cityId","cityName","type","charAt","toUpperCase","slice","transporters_list","JSON","stringify","height","map","city","index","latLng","console","log","Name","id","user","position","width","transporter_info","imgURL","isActive","backgroundColor","borderRadius","right","top","fullName","businessName","PhoneNumber"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport { MapContainer, Marker, Popup, TileLayer } from \"react-leaflet\";\r\nimport L from 'leaflet';\r\nimport icon from 'leaflet/dist/images/marker-icon.png';\r\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Badge from \"react-bootstrap/Badge\";\r\nimport Table from \"react-bootstrap/Table\";\r\nimport './styles.css';\r\nimport { GetAllCities, getLocationUsers } from \"../../../APIs/AdminPanelApis\";\r\nimport { BiLocationPlus } from 'react-icons/bi';\r\n\r\nlet DefaultIcon = L.icon({\r\n    iconUrl: icon,\r\n    shadowUrl: iconShadow\r\n});\r\n\r\nL.Marker.prototype.options.icon = DefaultIcon;\r\n\r\nconst UsersMap = (props) => {\r\n\r\n    /* const [windowHeight, setWindowHeight] = useState(window.innerHeight);\r\n\r\n    useEffect(() => {\r\n        function handleResize() {\r\n            setWindowHeight(window.innerHeight)\r\n        }\r\n\r\n        window.addEventListener('resize', handleResize)\r\n    }, []) */\r\n\r\n    const [btnClients, setBtnClients] = useState(\"\");\r\n    const [btnTransporters, setBtnTransporters] = useState(\"active\");\r\n    const [locationUsers, setTempLocationUsers] = useState([]);\r\n    const [show, setShow] = useState(false);\r\n    const [modalTitle, setModalTitle] = useState(\"\");\r\n\r\n    const handleClose = () => setShow(false);\r\n    const handleShow = () => setShow(true);\r\n\r\n    const toggleHandler = () => {\r\n        if (btnClients === \"active\") {\r\n            setBtnClients(\"\");\r\n            setBtnTransporters(\"active\");\r\n            GetAllCities(\"transporters\").then((res) => {\r\n                setAllCities(res.data.cities_list);\r\n            })\r\n        } else {\r\n            setBtnClients(\"active\");\r\n            setBtnTransporters(\"\");\r\n            GetAllCities(\"clients\").then((res) => {\r\n                setAllCities(res.data.cities_list);\r\n            })\r\n        }\r\n    }\r\n\r\n    const [allCities, setAllCities] = useState([]);\r\n    const [centerMarkerPosition, setCenterMarkerPosition] = useState({ \"centerLat\": 0, \"centerLong\": 0 });\r\n\r\n    useEffect(() => {\r\n        GetAllCities(\"transporters\").then((res) => {\r\n            setAllCities(res.data.cities_list);\r\n            // console.log(res.data);\r\n            // setCenterMarkerPosition(getCenter(res.data.cities_list));\r\n            // console.log(getCenter(res.data.cities_list))\r\n        })\r\n    }, [])\r\n\r\n    const getCenter = (points) => {\r\n        let sumX = 0;\r\n        let sumY = 0;\r\n        const n = points.length;\r\n\r\n        for (let i = 0; i < points.length; i++) {\r\n            sumX += parseFloat(points[i].LatRegion);\r\n            sumY += parseFloat(points[i].LongRegion);\r\n        }\r\n\r\n        return { \"centerLat\": (1 / n) * sumX, \"centerLong\": (1 / n) * sumY };\r\n    }\r\n\r\n    const viewLocationUsers = (cityId, cityName) => {\r\n\r\n        const type = btnTransporters == \"active\" ? \"transporters\" : \"clients\";\r\n\r\n        handleShow();\r\n        setModalTitle(type.charAt(0).toUpperCase() + type.slice(1) + \" in \" + cityName);\r\n\r\n        getLocationUsers(cityId, type).then((res) => {\r\n            // console.log(res.data.transporters_list);\r\n            setTempLocationUsers(res.data.transporters_list);\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"h-100 d-flex flex-column bg-white p-3 rounded-22 shadow map-container\">\r\n                <div className=\"toggle-users\">\r\n                    <Button variant=\"outline-secondary\" className={btnClients + \" toggleButtonLeft\"} onClick={toggleHandler} >Clients</Button>\r\n                    <Button variant=\"outline-secondary\" className={btnTransporters + \" toggleButtonRight\"} onClick={toggleHandler} >Transporters</Button>\r\n                    {/* <div className=\"ms-5 mt-2 \">\r\n                    <i className=\"bi bi-plus-lg h5\">Add New City/Village</i>\r\n                </div> */}\r\n                    {/* <BiLocationPlus /> */}\r\n                    {/* <Button variant=\"outline-primary\" className=\"d-flex justify-content-between ms-3\" style={{ height: \"35px\" }}>\r\n                    <BiLocationPlus className=\"me-2 h2\" />\r\n                    <span className=\"mt-1\">Add New City/Village</span>\r\n                </Button> */}\r\n                </div>\r\n                <MapContainer\r\n                    key={JSON.stringify([0, 0])}\r\n                    id=\"mapId\"\r\n                    center={[31.9522, 35.2332]}\r\n                    zoom={9.5}\r\n                    style={{ height: \"100%\" }}\r\n                    className=\"rounded-22\"\r\n                >\r\n                    <TileLayer\r\n                        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                    />\r\n\r\n                    {allCities?.map((city, index) => {\r\n                        return <Marker key={index} position={L.latLng(parseFloat(city.LatRegion), parseFloat(city.LongRegion))} onClick={() => {\r\n                            console.log(\"test\");\r\n                        }}>\r\n                            <Popup>\r\n                                {city.Name}{\" \"}\r\n                                <span onClick={() => viewLocationUsers(city.id, city.Name)} className=\"view-users-icon\"><i className=\"bi bi-people-fill\"></i></span>\r\n                            </Popup>\r\n                        </Marker>\r\n                    })}\r\n\r\n                </MapContainer>\r\n            </div>\r\n\r\n            <Modal size=\"lg\" show={show} onHide={handleClose}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>{modalTitle}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Table>\r\n                        <thead>\r\n                            <tr>\r\n                                <th scope=\"col\"></th>\r\n                                <th scope=\"col\">Full Name</th>\r\n                                <th scope=\"col\">Business Name</th>\r\n                                <th scope=\"col\">Phone Number</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {\r\n                                locationUsers?.map((user, index) => {\r\n                                    return <tr key={index}>\r\n                                        <td>\r\n                                            <div\r\n                                                className=\"rounded-circle d-flex light-turquoise-bg me-3 img-div\"\r\n                                                style={{ position: \"relative\", width: \"50px\", height: \"50px\" }}\r\n                                            >\r\n                                                <img\r\n                                                    className=\"user-img\"\r\n\r\n                                                    src={user.transporter_info.imgURL ? \"https://togo.ps/togo/MobileAPi/\" + user.transporter_info.imgURL : \"https://freepikpsd.com/file/2019/10/avatar-icon-png-5-Images-PNG-Transparent.png\"}\r\n\r\n                                                    alt=\"user-profile-pic\"\r\n                                                />\r\n                                                {user.isActive && <div style={{ backgroundColor: \"green\", width: \"10px\", height: \"10px\", borderRadius: \"50%\", position: \"absolute\", right: \"0\", top: \"0\" }}></div>}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td>{user.transporter_info.fullName}</td>\r\n                                        <td>{user.transporter_info.businessName}</td>\r\n                                        <td>{user.transporter_info.PhoneNumber}</td>\r\n                                    </tr>\r\n                                })\r\n                            }\r\n                        </tbody>\r\n                    </Table>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={handleClose}>\r\n                        Close\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default UsersMap;\r\n"]},"metadata":{},"sourceType":"module"}