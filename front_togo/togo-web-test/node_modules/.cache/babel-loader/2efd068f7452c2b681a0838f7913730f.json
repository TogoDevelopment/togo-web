{"ast":null,"code":"import _regeneratorRuntime from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getMessaging, getToken, onMessage } from 'firebase/messaging';\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nvar firebaseConfig = {\n  apiKey: \"AIzaSyA4eDytrjfsvvmH-W7IlSPGjvOsuFM8IwY\",\n  authDomain: \"togo-7f889.firebaseapp.com\",\n  projectId: \"togo-7f889\",\n  storageBucket: \"togo-7f889.appspot.com\",\n  messagingSenderId: \"861859089841\",\n  appId: \"1:861859089841:web:5b55bc6bc5573930694190\",\n  measurementId: \"G-4DSC9GYT3S\"\n};\n\n// Initialize Firebase\nvar firebaseApp = initializeApp(firebaseConfig);\nvar messaging = getMessaging(firebaseApp);\nvar REACT_APP_VAPID_KEY = process.env.REACT_APP_VAPID_KEY;\nvar publicKey = \"BIJNnjVSMyNKOKAPkyJw9GK7wZaVjkGMeq_Y56tvvYGT47_0j52lPduzSvSwNu092yKbLmSU8jJQQI8fMqE08UU\";\n\n// console.log(publicKey);\n\nexport var getUserToken = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var currentToken;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            currentToken = ''; // console.log(messaging)\n            _context.prev = 1;\n            _context.next = 4;\n            return getToken(messaging, {\n              vapidKey: publicKey\n            });\n          case 4:\n            currentToken = _context.sent;\n            _context.next = 10;\n            break;\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](1);\n            console.log('An error occurred while retrieving token.', _context.t0);\n          case 10:\n            return _context.abrupt(\"return\", currentToken);\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 7]]);\n  }));\n  return function getUserToken() {\n    return _ref.apply(this, arguments);\n  };\n}(\n  /* setTokenFound */\n);\nexport var onMessageListener = function onMessageListener() {\n  return new Promise(function (resolve) {\n    onMessage(messaging, function (payload) {\n      // console.log(payload);\n      // console.log(messaging)\n      resolve(payload);\n    });\n  });\n};","map":{"version":3,"names":["initializeApp","getMessaging","getToken","onMessage","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp","messaging","REACT_APP_VAPID_KEY","process","env","publicKey","getUserToken","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","currentToken","wrap","_callee$","_context","prev","next","vapidKey","sent","t0","console","log","abrupt","stop","apply","arguments","onMessageListener","Promise","resolve","payload"],"sources":["/home/system/togo-web-test/src/firebase.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getMessaging, getToken, onMessage } from 'firebase/messaging';\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyA4eDytrjfsvvmH-W7IlSPGjvOsuFM8IwY\",\r\n    authDomain: \"togo-7f889.firebaseapp.com\",\r\n    projectId: \"togo-7f889\",\r\n    storageBucket: \"togo-7f889.appspot.com\",\r\n    messagingSenderId: \"861859089841\",\r\n    appId: \"1:861859089841:web:5b55bc6bc5573930694190\",\r\n    measurementId: \"G-4DSC9GYT3S\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst firebaseApp = initializeApp(firebaseConfig);\r\nconst messaging = getMessaging(firebaseApp);\r\nconst { REACT_APP_VAPID_KEY } = process.env;\r\nconst publicKey = \"BIJNnjVSMyNKOKAPkyJw9GK7wZaVjkGMeq_Y56tvvYGT47_0j52lPduzSvSwNu092yKbLmSU8jJQQI8fMqE08UU\";\r\n\r\n// console.log(publicKey);\r\n\r\nexport const getUserToken = async (/* setTokenFound */) => {\r\n    let currentToken = '';\r\n    // console.log(messaging)\r\n    try {\r\n        currentToken = await getToken(messaging, { vapidKey: publicKey });\r\n        /* if (currentToken) {\r\n            setTokenFound(true);\r\n        } else {\r\n            setTokenFound(false);\r\n        } */\r\n    } catch (error) {\r\n        console.log('An error occurred while retrieving token.', error);\r\n    }\r\n    return currentToken;\r\n};\r\n\r\nexport const onMessageListener = () =>\r\n    new Promise((resolve) => {\r\n        onMessage(messaging, (payload) => {\r\n            // console.log(payload);\r\n            // console.log(messaging)\r\n            resolve(payload);\r\n        });\r\n    });"],"mappings":";;AAAA;AACA,SAASA,aAAa,QAAQ,cAAc;AAC5C,SAASC,YAAY,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,oBAAoB;AACtE;AACA;;AAEA;AACA;AACA,IAAMC,cAAc,GAAG;EACnBC,MAAM,EAAE,yCAAyC;EACjDC,UAAU,EAAE,4BAA4B;EACxCC,SAAS,EAAE,YAAY;EACvBC,aAAa,EAAE,wBAAwB;EACvCC,iBAAiB,EAAE,cAAc;EACjCC,KAAK,EAAE,2CAA2C;EAClDC,aAAa,EAAE;AACnB,CAAC;;AAED;AACA,IAAMC,WAAW,GAAGZ,aAAa,CAACI,cAAc,CAAC;AACjD,IAAMS,SAAS,GAAGZ,YAAY,CAACW,WAAW,CAAC;AAC3C,IAAQE,mBAAmB,GAAKC,OAAO,CAACC,GAAG,CAAnCF,mBAAmB;AAC3B,IAAMG,SAAS,GAAG,yFAAyF;;AAE3G;;AAEA,OAAO,IAAMC,YAAY;EAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,CAAAC,IAAA,CAAG,SAAAC,QAAA;IAAA,IAAAC,YAAA;IAAA,OAAAH,mBAAA,CAAAI,IAAA,UAAAC,SAAAC,QAAA;MAAA;QAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YACpBL,YAAY,GAAG,EAAE,EACrB;YAAAG,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAE,IAAA;YAAA,OAEyB3B,QAAQ,CAACW,SAAS,EAAE;cAAEiB,QAAQ,EAAEb;YAAU,CAAC,CAAC;UAAA;YAAjEO,YAAY,GAAAG,QAAA,CAAAI,IAAA;YAAAJ,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAK,EAAA,GAAAL,QAAA;YAOZM,OAAO,CAACC,GAAG,CAAC,2CAA2C,EAAAP,QAAA,CAAAK,EAAO,CAAC;UAAC;YAAA,OAAAL,QAAA,CAAAQ,MAAA,WAE7DX,YAAY;UAAA;UAAA;YAAA,OAAAG,QAAA,CAAAS,IAAA;QAAA;MAAA;IAAA,GAAAb,OAAA;EAAA,CACtB;EAAA,gBAdYL,YAAYA,CAAA;IAAA,OAAAC,IAAA,CAAAkB,KAAA,OAAAC,SAAA;EAAA;AAAA;EAAU;AAAA,CAclC;AAED,OAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAA;EAAA,OAC1B,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAK;IACrBtC,SAAS,CAACU,SAAS,EAAE,UAAC6B,OAAO,EAAK;MAC9B;MACA;MACAD,OAAO,CAACC,OAAO,CAAC;IACpB,CAAC,CAAC;EACN,CAAC,CAAC;AAAA"},"metadata":{},"sourceType":"module"}