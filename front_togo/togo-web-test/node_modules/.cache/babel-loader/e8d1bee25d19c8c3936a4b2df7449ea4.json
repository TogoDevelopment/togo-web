{"ast":null,"code":"import _slicedToArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useLocation,useParams}from\"react-router\";import{getBusinessLocation,getPersonalInfo}from\"../Actions/ProfileActions\";import translate from\"../i18n/translate\";import{getOrderDetails}from\"./APIs/OrdersAPIs\";import{packageFormatter}from\"./Orders/OrdersTabularView\";import whiteLogo from'../assets/whiteLogo.png';//import html2canvas from \"html2canvas\";\nimport DomToImage from\"dom-to-image\";import jsPDF from\"jspdf\";import{Button}from\"react-bootstrap\";var Barcode=require('react-barcode');function Convert_HTML_To_PDF(){var elementHTML=document.querySelector('.togo-waybill');DomToImage.toPng(elementHTML,{width:elementHTML.offsetWidth}).then(function(dataUrl){var htmlImage=new Image();htmlImage.src=dataUrl;var pdf=new jsPDF(\"p\",\"mm\",\"a4\");var pageWidth=pdf.internal.pageSize.getWidth();var pageHeight=pdf.internal.pageSize.getHeight();var imageWidth=elementHTML.offsetWidth;var imageHeight=elementHTML.offsetHeight;var ratio=imageWidth/imageHeight>=pageWidth/pageHeight?pageWidth/imageWidth:pageHeight/imageHeight;//pdf = new jsPDF(this.state.orientation, undefined, format);\npdf.addImage(htmlImage,'PNG',5,5,imageWidth*ratio-10,imageHeight*ratio);pdf.save('waybill.pdf');}).catch(function(error){console.error('Error: ',error);});/* html2canvas(elementHTML, {\r\n        logging: true,\r\n        allowTaint: false,\r\n\t    useCORS: true,\r\n    }).then((canvas) =>{\r\n        document.body.appendChild(canvas);\r\n        var imgData = canvas.toDataURL(\"image/png\",1);\r\n        var pdf = new jsPDF(\"p\", \"mm\", \"a4\");\r\n        var pageWidth = pdf.internal.pageSize.getWidth();\r\n        var pageHeight = pdf.internal.pageSize.getHeight();\r\n        var imageWidth = canvas.width;\r\n        var imageHeight = canvas.height;\r\n\r\n        var ratio = imageWidth/imageHeight >= pageWidth/pageHeight ? pageWidth/imageWidth : pageHeight/imageHeight;\r\n        //pdf = new jsPDF(this.state.orientation, undefined, format);\r\n        pdf.addImage(imgData, 'PNG', 0, 0, imageWidth * ratio, imageHeight * ratio);\r\n        //pdf.save(\"waybill.pdf\");\r\n\r\n    }); */}export default function WayBill(){var _useParams=useParams(),id=_useParams.id;var _useState=useState(),_useState2=_slicedToArray(_useState,2),orderDetails=_useState2[0],setOrderDetails=_useState2[1];var location=useLocation();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.profile.personalInfo;}),FullName=_useSelector.FullName,Email=_useSelector.Email,LogoUrl=_useSelector.LogoUrl;var _useSelector2=useSelector(function(state){return state.profile.businessLocations;}),BusinessName=_useSelector2.BusinessName;var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){if(FullName&&Email&&orderDetails&&BusinessName){if(new URLSearchParams(location.search).get(\"print\")===\"true\"){window.print();}}},[FullName,Email,orderDetails]);useEffect(function(){dispatch(getPersonalInfo(function(){setLoading(false);}));dispatch(getBusinessLocation());},[dispatch]);useEffect(function(){getOrderDetails(id).then(function(orderDetails){setOrderDetails(orderDetails);});},[id]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center py-3 d-print-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"px-3\",style:{width:\"1000px\"}},/*#__PURE__*/React.createElement(Button,{onClick:Convert_HTML_To_PDF,className:\"\"},\"PDF\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"togo-waybill px-3\",style:{width:\"1000px\"}},/*#__PURE__*/React.createElement(\"h1\",{className:\"fw-bold h3 text-center\"},translate(\"WAYBILL.TITLE\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"border border-dark border-2 w-50 d-flex justify-content-between p-2 m-inline-e-2\"},/*#__PURE__*/React.createElement(\"img\",{style:{maxWidth:\"200px\"},alt:\"business logo\",src:\"/togo/MobileAPi/\".concat(LogoUrl)//src=\"https://cdn.dribbble.com/users/1111447/screenshots/7697273/media/ba28a6aaee0f52b59662c6d6122c94ef.png?compress=1&resize=400x300\" \n}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,FullName),/*#__PURE__*/React.createElement(\"p\",null,BusinessName),/*#__PURE__*/React.createElement(\"p\",null,translate(\"PERSONAL_DETAILS.EMAIL\"),\": \",Email))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-50\"},/*#__PURE__*/React.createElement(\"p\",null,translate(\"WAYBILL.PRINT_DATE\"),\": \",new Date().toDateString(),\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},orderDetails&&orderDetails.BarCode&&/*#__PURE__*/React.createElement(Barcode,{value:orderDetails.BarCode}),orderDetails&&!orderDetails.BarCode&&/*#__PURE__*/React.createElement(Barcode,{value:id.padStart(8,0)})))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-50  m-inline-e-2\"},/*#__PURE__*/React.createElement(\"fieldset\",{style:{all:\"revert\",margin:\"0\"},className:\"border-dark\"},/*#__PURE__*/React.createElement(\"legend\",{style:{all:\"revert\"}},translate(\"WAYBILL.SENDER\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,translate(\"WORKING_TIME.FROM\"),\": \",orderDetails===null||orderDetails===void 0?void 0:orderDetails.ReceiverName,\", \",/*#__PURE__*/React.createElement(\"br\",null),\" \",orderDetails===null||orderDetails===void 0?void 0:orderDetails.IdCitySource,\",\",/*#__PURE__*/React.createElement(\"br\",null),\" \",orderDetails===null||orderDetails===void 0?void 0:orderDetails.OtherDetailsDes),/*#__PURE__*/React.createElement(\"hr\",{className:\"my-2\"}),/*#__PURE__*/React.createElement(\"p\",null,translate(\"ADMIN.MOBILE_NUMBER\"),\": \",orderDetails===null||orderDetails===void 0?void 0:orderDetails.ReceiverAddressNum)))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-50\"},/*#__PURE__*/React.createElement(\"fieldset\",{style:{all:\"revert\",margin:\"0\"},className:\"border-dark\"},/*#__PURE__*/React.createElement(\"legend\",{style:{all:\"revert\"}},translate(\"WAYBILL.RECEIVER\")),/*#__PURE__*/React.createElement(\"p\",null,translate(\"WORKING_TIME.TO\"),\": \",FullName,\",\",/*#__PURE__*/React.createElement(\"br\",null),orderDetails===null||orderDetails===void 0?void 0:orderDetails.IdCityDes,\",\",/*#__PURE__*/React.createElement(\"br\",null),orderDetails===null||orderDetails===void 0?void 0:orderDetails.OtherDetails),/*#__PURE__*/React.createElement(\"hr\",{className:\"my-2\"}),/*#__PURE__*/React.createElement(\"p\",null,translate(\"ADMIN.MOBILE_NUMBER\"),\": \",orderDetails===null||orderDetails===void 0?void 0:orderDetails.PhoneCustomer)))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex pt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-75 m-inline-e-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"border border-dark p-2 border-2\"},/*#__PURE__*/React.createElement(\"p\",null,translate(\"WAYBILL.NOTES\"),\": \"),/*#__PURE__*/React.createElement(\"p\",null,orderDetails===null||orderDetails===void 0?void 0:orderDetails.DetailsLoad)),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex pt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-75 m-inline-e-2\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-bordered border-2 border-dark\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,translate(\"WAYBILL.LENGTH\")),/*#__PURE__*/React.createElement(\"th\",null,translate(\"WAYBILL.HEIGHT\")),/*#__PURE__*/React.createElement(\"th\",null,translate(\"WAYBILL.WIDTH\")),/*#__PURE__*/React.createElement(\"th\",null,translate(\"WAYBILL.WEIGHT\")))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,(orderDetails===null||orderDetails===void 0?void 0:orderDetails.LengthLoad)||\"N/A\"),/*#__PURE__*/React.createElement(\"td\",null,(orderDetails===null||orderDetails===void 0?void 0:orderDetails.HeightLoad)||\"N/A\"),/*#__PURE__*/React.createElement(\"td\",null,(orderDetails===null||orderDetails===void 0?void 0:orderDetails.WidthLoad)||\"N/A\"),/*#__PURE__*/React.createElement(\"td\",null,(orderDetails===null||orderDetails===void 0?void 0:orderDetails.WeightLoad)||\"N/A\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-25\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-bordered border-2 border-dark\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,translate(\"WAYBILL.SHIP\")))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,packageFormatter({PackageType:orderDetails===null||orderDetails===void 0?void 0:orderDetails.TypeLoad})))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"border border-2 border-dark w-25 text-center mb-3\"},/*#__PURE__*/React.createElement(\"p\",{className:\"p-2 border-bottom border-dark\"},translate(\"WAYBILL.AMOUNT\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center flex-column\",style:{height:\"calc(100% - 38px)\"}},/*#__PURE__*/React.createElement(\"h1\",{className:\"h1\"},orderDetails===null||orderDetails===void 0?void 0:orderDetails.CostLoad),/*#__PURE__*/React.createElement(\"p\",null,translate(\"WAYBILL.NIS\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-50\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"h4\"},translate(\"WAYBILL.TERMS_AND_CONDITIONS\")),/*#__PURE__*/React.createElement(\"ol\",{style:{padding:\"revert\",listStyle:localStorage.getItem(\"Language\")===\"en\"?\"normal\":\"arabic-indic\"}},/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_ONE\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_TWO\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_THREE\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_FOUR\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_FIVE\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_SIX\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-50\",style:{direction:localStorage.getItem(\"Language\")===\"en\"?\"rtl\":\"ltr\"}},/*#__PURE__*/React.createElement(\"h1\",{className:\"h4\"},translate(\"WAYBILL.TERMS_AND_CONDITIONS_AR\")),/*#__PURE__*/React.createElement(\"ol\",{style:{padding:\"revert\",listStyle:localStorage.getItem(\"Language\")===\"en\"?\"arabic-indic\":\"normal\"}},/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_ONE_AR\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_TWO_AR\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_THREE_AR\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_FOUR_AR\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_FIVE_AR\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_SIX_AR\"))))),/*#__PURE__*/React.createElement(\"hr\",{className:\"my-3\"}),/*#__PURE__*/React.createElement(\"img\",{src:whiteLogo,style:{width:\"80px\",filter:\"brightness(0)\"},alt:\"logo\",className:\"mb-3\"}))));}","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/WayBill.jsx"],"names":["React","useEffect","useState","useDispatch","useSelector","useLocation","useParams","getBusinessLocation","getPersonalInfo","translate","getOrderDetails","packageFormatter","whiteLogo","DomToImage","jsPDF","Button","Barcode","require","Convert_HTML_To_PDF","elementHTML","document","querySelector","toPng","width","offsetWidth","then","dataUrl","htmlImage","Image","src","pdf","pageWidth","internal","pageSize","getWidth","pageHeight","getHeight","imageWidth","imageHeight","offsetHeight","ratio","addImage","save","catch","error","console","WayBill","id","orderDetails","setOrderDetails","location","dispatch","state","profile","personalInfo","FullName","Email","LogoUrl","businessLocations","BusinessName","loading","setLoading","URLSearchParams","search","get","window","print","maxWidth","Date","toDateString","BarCode","padStart","all","margin","ReceiverName","IdCitySource","OtherDetailsDes","ReceiverAddressNum","IdCityDes","OtherDetails","PhoneCustomer","DetailsLoad","LengthLoad","HeightLoad","WidthLoad","WeightLoad","PackageType","TypeLoad","height","CostLoad","padding","listStyle","localStorage","getItem","direction","filter"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useLocation, useParams } from \"react-router\";\r\nimport { getBusinessLocation, getPersonalInfo } from \"../Actions/ProfileActions\";\r\nimport translate from \"../i18n/translate\";\r\nimport { getOrderDetails } from \"./APIs/OrdersAPIs\";\r\nimport { packageFormatter } from \"./Orders/OrdersTabularView\";\r\nimport whiteLogo from '../assets/whiteLogo.png';\r\n//import html2canvas from \"html2canvas\";\r\nimport DomToImage from \"dom-to-image\";\r\nimport jsPDF from \"jspdf\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nvar Barcode = require('react-barcode');\r\n\r\nfunction Convert_HTML_To_PDF() {\r\n    var elementHTML = document.querySelector('.togo-waybill');\r\n    DomToImage.toPng( elementHTML, {width: elementHTML.offsetWidth} ).then( ( dataUrl ) => {\r\n        var htmlImage = new Image();\r\n        htmlImage.src = dataUrl;\r\n        var pdf = new jsPDF(\"p\", \"mm\", \"a4\");\r\n        \r\n        var pageWidth = pdf.internal.pageSize.getWidth();\r\n        var pageHeight = pdf.internal.pageSize.getHeight();\r\n        var imageWidth = elementHTML.offsetWidth;\r\n        var imageHeight = elementHTML.offsetHeight;\r\n        var ratio = imageWidth/imageHeight >= pageWidth/pageHeight ? pageWidth/imageWidth : pageHeight/imageHeight;\r\n        //pdf = new jsPDF(this.state.orientation, undefined, format);\r\n        pdf.addImage(htmlImage, 'PNG', 5, 5, imageWidth * ratio - 10, imageHeight * ratio);\r\n\r\n        pdf.save('waybill.pdf' );\r\n      }).catch( ( error ) => {\r\n          console.error('Error: ', error);\r\n      });\r\n\r\n    /* html2canvas(elementHTML, {\r\n        logging: true,\r\n        allowTaint: false,\r\n\t    useCORS: true,\r\n    }).then((canvas) =>{\r\n        document.body.appendChild(canvas);\r\n        var imgData = canvas.toDataURL(\"image/png\",1);\r\n        var pdf = new jsPDF(\"p\", \"mm\", \"a4\");\r\n        var pageWidth = pdf.internal.pageSize.getWidth();\r\n        var pageHeight = pdf.internal.pageSize.getHeight();\r\n        var imageWidth = canvas.width;\r\n        var imageHeight = canvas.height;\r\n\r\n        var ratio = imageWidth/imageHeight >= pageWidth/pageHeight ? pageWidth/imageWidth : pageHeight/imageHeight;\r\n        //pdf = new jsPDF(this.state.orientation, undefined, format);\r\n        pdf.addImage(imgData, 'PNG', 0, 0, imageWidth * ratio, imageHeight * ratio);\r\n        //pdf.save(\"waybill.pdf\");\r\n\r\n    }); */\r\n}\r\n\r\nexport default function WayBill(){\r\n    const{ id } = useParams();\r\n    \r\n    const [orderDetails, setOrderDetails] = useState();\r\n    const location = useLocation();\r\n    const dispatch = useDispatch();\r\n    const {FullName, Email, LogoUrl} = useSelector(state => state.profile.personalInfo);\r\n    const { BusinessName } = useSelector(state => state.profile.businessLocations);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(()=>{\r\n        if(FullName && Email && orderDetails && BusinessName){\r\n            if(new URLSearchParams(location.search).get(\"print\") === \"true\"){\r\n                window.print();\r\n            }\r\n        }\r\n    }, [FullName, Email, orderDetails]);\r\n    \r\n\r\n    useEffect(() => {\r\n        dispatch(getPersonalInfo(() => {\r\n            setLoading(false);\r\n        }));\r\n        dispatch(getBusinessLocation());\r\n    }, [dispatch]);\r\n\r\n    useEffect(()=>{\r\n        \r\n        getOrderDetails(id).then((orderDetails) => {\r\n            setOrderDetails(orderDetails);\r\n        });\r\n\r\n    }, [id]);\r\n    \r\n    return (\r\n        <>\r\n        <div className=\"d-flex justify-content-center py-3 d-print-none\">\r\n            <div className=\"px-3\" style={{width: \"1000px\"}}>\r\n                <Button onClick={Convert_HTML_To_PDF} className=\"\">PDF</Button>\r\n            </div>\r\n        </div>\r\n        \r\n        <div className=\"d-flex justify-content-center\">\r\n        \r\n        <div className=\"togo-waybill px-3\" style={{width: \"1000px\"}}>\r\n            \r\n            <h1 className=\"fw-bold h3 text-center\">{translate(\"WAYBILL.TITLE\")}</h1>\r\n            <div className=\"d-flex\">\r\n                <div className=\"border border-dark border-2 w-50 d-flex justify-content-between p-2 m-inline-e-2\">\r\n                    <img \r\n                        style={{\r\n                            maxWidth: \"200px\"\r\n                        }}\r\n                        alt=\"business logo\"\r\n                        src={`/togo/MobileAPi/${LogoUrl}`}\r\n                        //src=\"https://cdn.dribbble.com/users/1111447/screenshots/7697273/media/ba28a6aaee0f52b59662c6d6122c94ef.png?compress=1&resize=400x300\" \r\n                    />\r\n                    <div>\r\n                        <p>{FullName}</p>\r\n                        <p>{BusinessName}</p>\r\n                        <p>{translate(\"PERSONAL_DETAILS.EMAIL\")}: {Email}</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"w-50\">\r\n                    <p>{translate(\"WAYBILL.PRINT_DATE\")}: {new Date().toDateString()} </p>\r\n                    <div className=\"d-flex justify-content-center\">\r\n                        {orderDetails && orderDetails.BarCode && <Barcode value={orderDetails.BarCode} />}\r\n                        {orderDetails && !orderDetails.BarCode && <Barcode value={id.padStart(8,0)} />}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"d-flex\">\r\n                \r\n                <div className=\"w-50  m-inline-e-2\">\r\n                    <fieldset \r\n                        style={{\r\n                            all: \"revert\",\r\n                            margin: \"0\"\r\n                        }}\r\n                        className=\"border-dark\"\r\n                    >\r\n                        <legend \r\n                            style={{\r\n                                all: \"revert\"\r\n                            }}\r\n                        >\r\n                            {translate(\"WAYBILL.SENDER\")}\r\n                        </legend>\r\n                        <div>\r\n                            <p>{translate(\"WORKING_TIME.FROM\")}: {orderDetails?.ReceiverName}, <br /> {orderDetails?.IdCitySource},<br /> {orderDetails?.OtherDetailsDes}</p>\r\n                            <hr className=\"my-2\" />\r\n                            <p>{translate(\"ADMIN.MOBILE_NUMBER\")}: {orderDetails?.ReceiverAddressNum}</p>\r\n                        </div>\r\n                    </fieldset>\r\n                </div>\r\n\r\n                <div className=\"w-50\">\r\n                    <fieldset \r\n                        style={{\r\n                            all: \"revert\",\r\n                            margin: \"0\",\r\n                        }}\r\n                        className=\"border-dark\"\r\n                    >\r\n                        <legend style={{\r\n                            all: \"revert\"\r\n                        }}>\r\n                            {translate(\"WAYBILL.RECEIVER\")}\r\n                        </legend>\r\n                        <p>{translate(\"WORKING_TIME.TO\")}: {FullName},<br />\r\n                        {orderDetails?.IdCityDes},<br />\r\n                        {orderDetails?.OtherDetails}\r\n                        </p>\r\n                        <hr className=\"my-2\" />\r\n                        <p>{translate(\"ADMIN.MOBILE_NUMBER\")}: {orderDetails?.PhoneCustomer}</p>\r\n                    </fieldset>\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"d-flex pt-2\">\r\n                <div className=\"w-75 m-inline-e-2\">\r\n                    <div className=\"border border-dark p-2 border-2\">\r\n                        <p>{translate(\"WAYBILL.NOTES\")}: </p>\r\n                        <p>{orderDetails?.DetailsLoad}</p>\r\n                    </div>\r\n\r\n                    <div className=\"d-flex pt-2\">\r\n                        <div className=\"w-75 m-inline-e-2\">\r\n                            <table className=\"table table-bordered border-2 border-dark\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>{translate(\"WAYBILL.LENGTH\")}</th>\r\n                                        <th>{translate(\"WAYBILL.HEIGHT\")}</th>\r\n                                        <th>{translate(\"WAYBILL.WIDTH\")}</th>\r\n                                        <th>{translate(\"WAYBILL.WEIGHT\")}</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr>\r\n                                        <td>\r\n                                            {orderDetails?.LengthLoad || \"N/A\"}\r\n                                        </td>\r\n                                        <td>\r\n                                            {orderDetails?.HeightLoad || \"N/A\"}\r\n                                        </td>\r\n                                        <td>\r\n                                            {orderDetails?.WidthLoad || \"N/A\"}\r\n                                        </td>\r\n                                        <td>\r\n                                            {orderDetails?.WeightLoad || \"N/A\"}\r\n                                        </td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                        <div className=\"w-25\">\r\n                            <table className=\"table table-bordered border-2 border-dark\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>{translate(\"WAYBILL.SHIP\")}</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr>\r\n                                        <td>{packageFormatter({PackageType: orderDetails?.TypeLoad})}</td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"border border-2 border-dark w-25 text-center mb-3\">\r\n                    <p className=\"p-2 border-bottom border-dark\">{translate(\"WAYBILL.AMOUNT\")}</p>\r\n                    \r\n                    <div className=\"d-flex justify-content-center flex-column\" style={{height: \"calc(100% - 38px)\"}}>\r\n                        <h1 className=\"h1\">{orderDetails?.CostLoad}</h1>\r\n                        <p>{translate(\"WAYBILL.NIS\")}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"d-flex\">\r\n                <div className=\"w-50\">\r\n                    <h1 className=\"h4\">{translate(\"WAYBILL.TERMS_AND_CONDITIONS\")}</h1>\r\n                    <ol style={{padding: \"revert\", listStyle: localStorage.getItem(\"Language\") === \"en\" ? \"normal\" : \"arabic-indic\"}}>\r\n                        <li>{translate(\"WAYBILL.CLOUSE_ONE\")}</li>\r\n                        <li>{translate(\"WAYBILL.CLOUSE_TWO\")}</li>\r\n                        <li>{translate(\"WAYBILL.CLOUSE_THREE\")}</li>\r\n                        <li>{translate(\"WAYBILL.CLOUSE_FOUR\")}</li>\r\n                        <li>{translate(\"WAYBILL.CLOUSE_FIVE\")}</li>\r\n                        <li>{translate(\"WAYBILL.CLOUSE_SIX\")}</li>\r\n                    </ol>\r\n                </div>\r\n                <div className=\"w-50\" style={{direction: localStorage.getItem(\"Language\") === \"en\" ? \"rtl\" :\"ltr\" }}>\r\n                    <h1 className=\"h4\">{translate(\"WAYBILL.TERMS_AND_CONDITIONS_AR\")}</h1>\r\n                    <ol style={{padding: \"revert\", listStyle: localStorage.getItem(\"Language\") === \"en\" ? \"arabic-indic\" : \"normal\"}}>\r\n                        <li>{translate(\"WAYBILL.CLOUSE_ONE_AR\")}</li>\r\n                        <li>{translate(\"WAYBILL.CLOUSE_TWO_AR\")}</li>\r\n                        <li>{translate(\"WAYBILL.CLOUSE_THREE_AR\")}</li>\r\n                        <li>{translate(\"WAYBILL.CLOUSE_FOUR_AR\")}</li>\r\n                        <li>{translate(\"WAYBILL.CLOUSE_FIVE_AR\")}</li>\r\n                        <li>{translate(\"WAYBILL.CLOUSE_SIX_AR\")}</li>\r\n                    </ol>\r\n\r\n                </div>\r\n                \r\n            </div>\r\n            <hr className=\"my-3\"/>\r\n            <img src={whiteLogo} style={{\r\n                width: \"80px\",filter: \"brightness(0)\"\r\n                }} alt=\"logo\" className=\"mb-3\" />\r\n        </div>\r\n    </div>\r\n    </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}