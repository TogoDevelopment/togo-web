{"ast":null,"code":"import _slicedToArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef}from\"react\";import{useState}from\"react\";import{Button,Dropdown,Form,FormControl,InputGroup,Spinner}from\"react-bootstrap\";import{useHistory}from\"react-router-dom\";import{GetTypeBusiness,SetBusinessInfo}from\"../APIs/LoginAPIs\";export default function BusinessInfoForm(){var BNameRef=useRef();var BLocRef=useRef();var imgRef=useRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),types=_useState2[0],setTypes=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loadingSubmit=_useState4[0],setLoadingSubmit=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),selectedType=_useState6[0],setSelectedType=_useState6[1];var history=useHistory();function onFileChange(event){console.log(imgRef.current);var reader=new FileReader();reader.onload=function(e){imgRef.current.src=e.target.result;};if(event.currentTarget.files[0]){reader.readAsDataURL(event.currentTarget.files[0]);}}useEffect(function(){GetTypeBusiness().then(function(res){setTypes(res.data.server_response);setSelectedType(res.data.server_response[0]);});},[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\" mainbg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"h1 p-3 text-center togo-button\"},\"Create account /client\"),/*#__PURE__*/React.createElement(\"div\",{className:\"m-auto w-75\"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-center togo-border h4\"},\"Business information\"),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formGridEmail\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Business name\"),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{type:\"text\",className:\"bg-white rounded-22\",ref:BNameRef}))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formGridEmail\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Business location\"),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{type:\"text\",className:\"bg-white rounded-22\",ref:BLocRef}))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formGridEmail\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Business type\"),/*#__PURE__*/React.createElement(\"div\",{className:\"togo-outling mb-2\"},/*#__PURE__*/React.createElement(Dropdown,{className:\"rounded-22 bg-white\",onSelect:function onSelect(eve){setSelectedType(types[eve]);}},/*#__PURE__*/React.createElement(Dropdown.Toggle,{variant:\"\",className:\"w-100 text-start d-flex align-items-center shadow-none\"},/*#__PURE__*/React.createElement(\"div\",{style:{width:\"97%\"}},selectedType===null||selectedType===void 0?void 0:selectedType.Name)),/*#__PURE__*/React.createElement(Dropdown.Menu,{className:\"w-100\"},types.map(function(type,index){return/*#__PURE__*/React.createElement(Dropdown.Item,{eventKey:index,key:index,className:\"d-flex\"},\"\".concat(type.Name));})))),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{type:\"file\",className:\"bg-white rounded-22\",accept:\"image/*\",onChange:onFileChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2\",style:{maxHeight:\"150px\"}},/*#__PURE__*/React.createElement(\"img\",{ref:imgRef,className:\"border border-2\",style:{height:\"150px\",margin:\"auto\",padding:\"2px\"}})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{variant:\"\",className:\"d-block m-auto rounded-22 togo-button w-25\",disabled:loadingSubmit,onClick:function onClick(){var dataUri=imgRef.current.src;var base64=dataUri.substr(dataUri.indexOf(\",\")+1);setLoadingSubmit(true);SetBusinessInfo(BNameRef.current.value,BLocRef.current.value,selectedType.id,base64).then(function(res){setLoadingSubmit(false);history.push(\"/dashboard\");});}},loadingSubmit&&/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",size:\"sm\"}),\"Send\"),/*#__PURE__*/React.createElement(Button,{variant:\"\",className:\"d-block m-auto rounded-22 togo-button w-25\",onClick:function onClick(){history.push(\"/business-info\");}},\"Skip\")))));}","map":null,"metadata":{},"sourceType":"module"}