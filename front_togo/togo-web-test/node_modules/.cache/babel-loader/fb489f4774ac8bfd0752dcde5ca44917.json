{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport React, { useRef, useEffect, useImperativeHandle, useCallback } from 'react';\nimport get from 'lodash/get';\nimport isNil from 'lodash/isNil';\nimport { contains } from 'dom-lib';\nimport Overlay from './Overlay';\nimport { createChainedFunction, usePortal, useControlled } from '../utils';\nimport isOneOf from '../utils/isOneOf';\n\nfunction mergeEvents(events, props) {\n  if (events === void 0) {\n    events = {};\n  }\n\n  if (props === void 0) {\n    props = {};\n  }\n\n  var nextEvents = {};\n  Object.keys(events).forEach(function (eventName) {\n    if (events[eventName]) {\n      var _props;\n\n      nextEvents[eventName] = createChainedFunction(events[eventName], (_props = props) === null || _props === void 0 ? void 0 : _props[eventName]);\n    }\n  });\n  return nextEvents;\n}\n/**\n * Useful for mouseover and mouseout.\n * In order to resolve the node entering the mouseover element, a mouseout event and a mouseover event will be triggered.\n * https://javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave\n * @param handler\n * @param event\n */\n\n\nfunction onMouseEventHandler(handler, event, delay) {\n  var target = event.currentTarget;\n  var related = event.relatedTarget || get(event, ['nativeEvent', 'toElement']);\n\n  if ((!related || related !== target) && !contains(target, related)) {\n    handler(event, delay);\n  }\n}\n\nvar defaultProps = {\n  trigger: ['hover', 'focus'],\n  placement: 'bottomStart',\n  rootClose: true\n};\nvar OverlayTrigger = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var children = props.children,\n      container = props.container,\n      controlId = props.controlId,\n      defaultOpen = props.defaultOpen,\n      trigger = props.trigger,\n      disabled = props.disabled,\n      readOnly = props.readOnly,\n      plaintext = props.plaintext,\n      openProp = props.open,\n      delay = props.delay,\n      delayOpenProp = props.delayOpen,\n      delayCloseProp = props.delayClose,\n      enterable = props.enterable,\n      placement = props.placement,\n      speaker = props.speaker,\n      onClick = props.onClick,\n      onMouseOver = props.onMouseOver,\n      onMouseOut = props.onMouseOut,\n      onContextMenu = props.onContextMenu,\n      onFocus = props.onFocus,\n      onBlur = props.onBlur,\n      onClose = props.onClose,\n      rest = _objectWithoutPropertiesLoose(props, [\"children\", \"container\", \"controlId\", \"defaultOpen\", \"trigger\", \"disabled\", \"readOnly\", \"plaintext\", \"open\", \"delay\", \"delayOpen\", \"delayClose\", \"enterable\", \"placement\", \"speaker\", \"onClick\", \"onMouseOver\", \"onMouseOut\", \"onContextMenu\", \"onFocus\", \"onBlur\", \"onClose\"]);\n\n  var _usePortal = usePortal({\n    container: container\n  }),\n      Portal = _usePortal.Portal;\n\n  var triggerRef = useRef();\n  var overlayRef = useRef();\n\n  var _useControlled = useControlled(openProp, defaultOpen),\n      open = _useControlled[0],\n      setOpen = _useControlled[1]; // Delay the timer to close/open the overlay\n  // When the cursor moves from the trigger to the overlay, the overlay will be closed.\n  // In order to keep the overlay open, a timer is used to delay the closing.\n\n\n  var delayOpenTimer = useRef();\n  var delayCloseTimer = useRef();\n  var delayOpen = isNil(delayOpenProp) ? delay : delayOpenProp;\n  var delayClose = isNil(delayCloseProp) ? delay : delayCloseProp; // Whether the cursor is on the overlay\n\n  var isOnOverlay = useRef(false); // Whether the cursor is on the trigger\n\n  var isOnTrigger = useRef(false);\n  useEffect(function () {\n    return function () {\n      clearTimeout(delayOpenTimer.current);\n      clearTimeout(delayCloseTimer.current);\n    };\n  }, []);\n  var handleOpen = useCallback(function (delay) {\n    var ms = _isUndefined(delay) ? delayOpen : delay;\n\n    if (ms && typeof ms === 'number') {\n      return delayOpenTimer.current = setTimeout(function () {\n        delayOpenTimer.current = null;\n        setOpen(true);\n      }, ms);\n    }\n\n    setOpen(true);\n  }, [delayOpen, setOpen]);\n  var handleClose = useCallback(function (delay) {\n    var ms = _isUndefined(delay) ? delayClose : delay;\n\n    if (ms && typeof ms === 'number') {\n      return delayCloseTimer.current = setTimeout(function () {\n        delayCloseTimer.current = null;\n        setOpen(false);\n      }, ms);\n    }\n\n    setOpen(false);\n  }, [delayClose, setOpen]);\n  useImperativeHandle(ref, function () {\n    return {\n      get root() {\n        return triggerRef.current;\n      },\n\n      get overlay() {\n        var _overlayRef$current;\n\n        return (_overlayRef$current = overlayRef.current) === null || _overlayRef$current === void 0 ? void 0 : _overlayRef$current.child;\n      },\n\n      open: handleOpen,\n      close: handleClose,\n      updatePosition: function updatePosition() {\n        var _overlayRef$current2, _overlayRef$current2$;\n\n        (_overlayRef$current2 = overlayRef.current) === null || _overlayRef$current2 === void 0 ? void 0 : (_overlayRef$current2$ = _overlayRef$current2.updatePosition) === null || _overlayRef$current2$ === void 0 ? void 0 : _overlayRef$current2$.call(_overlayRef$current2);\n      }\n    };\n  });\n  /**\n   * Close after the cursor leaves.\n   */\n\n  var handleCloseWhenLeave = useCallback(function () {\n    // When the cursor is not on the overlay and not on the trigger, it is closed.\n    if (!isOnOverlay.current && !isOnTrigger.current) {\n      handleClose();\n    }\n  }, [handleClose]);\n  /**\n   * Toggle open and closed state.\n   */\n\n  var handleOpenState = useCallback(function () {\n    if (open) {\n      handleCloseWhenLeave();\n    } else {\n      handleOpen();\n    }\n  }, [open, handleCloseWhenLeave, handleOpen]);\n  var handleDelayedOpen = useCallback(function () {\n    if (!enterable) {\n      return handleOpen();\n    }\n\n    isOnTrigger.current = true;\n\n    if (!isNil(delayCloseTimer.current)) {\n      clearTimeout(delayCloseTimer.current);\n      delayCloseTimer.current = null;\n      return handleOpen();\n    }\n\n    if (open) {\n      return;\n    }\n\n    handleOpen();\n  }, [enterable, open, handleOpen]);\n  var handleDelayedClose = useCallback(function () {\n    if (!enterable) {\n      handleClose();\n    }\n\n    isOnTrigger.current = false;\n\n    if (!isNil(delayOpenTimer.current)) {\n      clearTimeout(delayOpenTimer.current);\n      delayOpenTimer.current = null;\n      return;\n    }\n\n    if (!open || !isNil(delayCloseTimer.current)) {\n      return;\n    }\n\n    delayCloseTimer.current = setTimeout(function () {\n      clearTimeout(delayCloseTimer.current);\n      delayCloseTimer.current = null;\n      handleCloseWhenLeave();\n    }, 200);\n  }, [enterable, open, handleClose, handleCloseWhenLeave]);\n  var handleSpeakerMouseEnter = useCallback(function () {\n    isOnOverlay.current = true;\n  }, []);\n  var handleSpeakerMouseLeave = useCallback(function () {\n    isOnOverlay.current = false;\n\n    if (!isOneOf('click', trigger) && !isOneOf('contextMenu', trigger) && !isOneOf('active', trigger)) {\n      handleCloseWhenLeave();\n    }\n  }, [handleCloseWhenLeave, trigger]);\n  var preventDefault = useCallback(function (event) {\n    event.preventDefault();\n  }, []);\n  var triggerEvents = {\n    onClick: onClick,\n    onContextMenu: onContextMenu,\n    onMouseOver: onMouseOver,\n    onMouseOut: onMouseOut,\n    onFocus: onFocus,\n    onBlur: onBlur\n  };\n\n  if (!disabled && !readOnly && !plaintext) {\n    if (isOneOf('click', trigger)) {\n      triggerEvents.onClick = createChainedFunction(handleOpenState, triggerEvents.onClick);\n    }\n\n    if (isOneOf('contextMenu', trigger)) {\n      triggerEvents.onContextMenu = createChainedFunction(preventDefault, handleOpenState, triggerEvents.onContextMenu);\n    }\n\n    if (isOneOf('active', trigger)) {\n      triggerEvents.onClick = createChainedFunction(handleDelayedOpen, triggerEvents.onClick);\n    }\n\n    if (isOneOf('hover', trigger)) {\n      var onMouseOverListener = null;\n      var onMouseOutListener = null;\n\n      if (trigger !== 'none') {\n        onMouseOverListener = function onMouseOverListener(e) {\n          return onMouseEventHandler(handleDelayedOpen, e);\n        };\n\n        onMouseOutListener = function onMouseOutListener(e) {\n          return onMouseEventHandler(handleDelayedClose, e);\n        };\n      }\n\n      triggerEvents.onMouseOver = createChainedFunction(onMouseOverListener, onMouseOver);\n      triggerEvents.onMouseOut = createChainedFunction(onMouseOutListener, onMouseOut);\n    }\n\n    if (isOneOf('focus', trigger)) {\n      triggerEvents.onFocus = createChainedFunction(handleDelayedOpen, onFocus);\n      triggerEvents.onBlur = createChainedFunction(handleDelayedClose, onBlur);\n    }\n  }\n\n  var renderOverlay = function renderOverlay() {\n    var overlayProps = _extends({}, rest, {\n      triggerTarget: triggerRef,\n      onClose: trigger !== 'none' ? createChainedFunction(handleClose, onClose) : undefined,\n      placement: placement,\n      container: container,\n      open: open\n    });\n\n    var speakerProps = {\n      id: controlId\n    }; // The purpose of adding mouse entry and exit events to the Overlay is to record whether the current cursor is on the Overlay.\n    // When `trigger` is equal to `hover`, if the cursor leaves the `triggerTarget` and stays on the Overlay,\n    // the Overlay will continue to remain open.\n\n    if (trigger !== 'none' && enterable) {\n      speakerProps.onMouseEnter = handleSpeakerMouseEnter;\n      speakerProps.onMouseLeave = handleSpeakerMouseLeave;\n    }\n\n    return /*#__PURE__*/React.createElement(Overlay, _extends({}, overlayProps, {\n      ref: overlayRef,\n      childrenProps: speakerProps\n    }), typeof speaker === 'function' ? function (props, ref) {\n      return speaker(_extends({}, props, {\n        onClose: handleClose\n      }), ref);\n    } : speaker);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, typeof children === 'function' ? children(triggerEvents, triggerRef) : /*#__PURE__*/React.cloneElement(children, _extends({\n    ref: triggerRef,\n    'aria-describedby': controlId\n  }, mergeEvents(triggerEvents, children.props))), /*#__PURE__*/React.createElement(Portal, null, renderOverlay()));\n});\nOverlayTrigger.displayName = 'OverlayTrigger';\nOverlayTrigger.defaultProps = defaultProps;\nexport default OverlayTrigger;","map":{"version":3,"sources":["/home/system/togo-web-test/node_modules/rsuite/esm/Overlay/OverlayTrigger.js"],"names":["_extends","_objectWithoutPropertiesLoose","_isUndefined","React","useRef","useEffect","useImperativeHandle","useCallback","get","isNil","contains","Overlay","createChainedFunction","usePortal","useControlled","isOneOf","mergeEvents","events","props","nextEvents","Object","keys","forEach","eventName","_props","onMouseEventHandler","handler","event","delay","target","currentTarget","related","relatedTarget","defaultProps","trigger","placement","rootClose","OverlayTrigger","forwardRef","ref","children","container","controlId","defaultOpen","disabled","readOnly","plaintext","openProp","open","delayOpenProp","delayOpen","delayCloseProp","delayClose","enterable","speaker","onClick","onMouseOver","onMouseOut","onContextMenu","onFocus","onBlur","onClose","rest","_usePortal","Portal","triggerRef","overlayRef","_useControlled","setOpen","delayOpenTimer","delayCloseTimer","isOnOverlay","isOnTrigger","clearTimeout","current","handleOpen","ms","setTimeout","handleClose","root","overlay","_overlayRef$current","child","close","updatePosition","_overlayRef$current2","_overlayRef$current2$","call","handleCloseWhenLeave","handleOpenState","handleDelayedOpen","handleDelayedClose","handleSpeakerMouseEnter","handleSpeakerMouseLeave","preventDefault","triggerEvents","onMouseOverListener","onMouseOutListener","e","renderOverlay","overlayProps","triggerTarget","undefined","speakerProps","id","onMouseEnter","onMouseLeave","createElement","childrenProps","Fragment","cloneElement","displayName"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport React, { useRef, useEffect, useImperativeHandle, useCallback } from 'react';\nimport get from 'lodash/get';\nimport isNil from 'lodash/isNil';\nimport { contains } from 'dom-lib';\nimport Overlay from './Overlay';\nimport { createChainedFunction, usePortal, useControlled } from '../utils';\nimport isOneOf from '../utils/isOneOf';\n\nfunction mergeEvents(events, props) {\n  if (events === void 0) {\n    events = {};\n  }\n\n  if (props === void 0) {\n    props = {};\n  }\n\n  var nextEvents = {};\n  Object.keys(events).forEach(function (eventName) {\n    if (events[eventName]) {\n      var _props;\n\n      nextEvents[eventName] = createChainedFunction(events[eventName], (_props = props) === null || _props === void 0 ? void 0 : _props[eventName]);\n    }\n  });\n  return nextEvents;\n}\n\n/**\n * Useful for mouseover and mouseout.\n * In order to resolve the node entering the mouseover element, a mouseout event and a mouseover event will be triggered.\n * https://javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave\n * @param handler\n * @param event\n */\nfunction onMouseEventHandler(handler, event, delay) {\n  var target = event.currentTarget;\n  var related = event.relatedTarget || get(event, ['nativeEvent', 'toElement']);\n\n  if ((!related || related !== target) && !contains(target, related)) {\n    handler(event, delay);\n  }\n}\n\nvar defaultProps = {\n  trigger: ['hover', 'focus'],\n  placement: 'bottomStart',\n  rootClose: true\n};\nvar OverlayTrigger = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var children = props.children,\n      container = props.container,\n      controlId = props.controlId,\n      defaultOpen = props.defaultOpen,\n      trigger = props.trigger,\n      disabled = props.disabled,\n      readOnly = props.readOnly,\n      plaintext = props.plaintext,\n      openProp = props.open,\n      delay = props.delay,\n      delayOpenProp = props.delayOpen,\n      delayCloseProp = props.delayClose,\n      enterable = props.enterable,\n      placement = props.placement,\n      speaker = props.speaker,\n      onClick = props.onClick,\n      onMouseOver = props.onMouseOver,\n      onMouseOut = props.onMouseOut,\n      onContextMenu = props.onContextMenu,\n      onFocus = props.onFocus,\n      onBlur = props.onBlur,\n      onClose = props.onClose,\n      rest = _objectWithoutPropertiesLoose(props, [\"children\", \"container\", \"controlId\", \"defaultOpen\", \"trigger\", \"disabled\", \"readOnly\", \"plaintext\", \"open\", \"delay\", \"delayOpen\", \"delayClose\", \"enterable\", \"placement\", \"speaker\", \"onClick\", \"onMouseOver\", \"onMouseOut\", \"onContextMenu\", \"onFocus\", \"onBlur\", \"onClose\"]);\n\n  var _usePortal = usePortal({\n    container: container\n  }),\n      Portal = _usePortal.Portal;\n\n  var triggerRef = useRef();\n  var overlayRef = useRef();\n\n  var _useControlled = useControlled(openProp, defaultOpen),\n      open = _useControlled[0],\n      setOpen = _useControlled[1]; // Delay the timer to close/open the overlay\n  // When the cursor moves from the trigger to the overlay, the overlay will be closed.\n  // In order to keep the overlay open, a timer is used to delay the closing.\n\n\n  var delayOpenTimer = useRef();\n  var delayCloseTimer = useRef();\n  var delayOpen = isNil(delayOpenProp) ? delay : delayOpenProp;\n  var delayClose = isNil(delayCloseProp) ? delay : delayCloseProp; // Whether the cursor is on the overlay\n\n  var isOnOverlay = useRef(false); // Whether the cursor is on the trigger\n\n  var isOnTrigger = useRef(false);\n  useEffect(function () {\n    return function () {\n      clearTimeout(delayOpenTimer.current);\n      clearTimeout(delayCloseTimer.current);\n    };\n  }, []);\n  var handleOpen = useCallback(function (delay) {\n    var ms = _isUndefined(delay) ? delayOpen : delay;\n\n    if (ms && typeof ms === 'number') {\n      return delayOpenTimer.current = setTimeout(function () {\n        delayOpenTimer.current = null;\n        setOpen(true);\n      }, ms);\n    }\n\n    setOpen(true);\n  }, [delayOpen, setOpen]);\n  var handleClose = useCallback(function (delay) {\n    var ms = _isUndefined(delay) ? delayClose : delay;\n\n    if (ms && typeof ms === 'number') {\n      return delayCloseTimer.current = setTimeout(function () {\n        delayCloseTimer.current = null;\n        setOpen(false);\n      }, ms);\n    }\n\n    setOpen(false);\n  }, [delayClose, setOpen]);\n  useImperativeHandle(ref, function () {\n    return {\n      get root() {\n        return triggerRef.current;\n      },\n\n      get overlay() {\n        var _overlayRef$current;\n\n        return (_overlayRef$current = overlayRef.current) === null || _overlayRef$current === void 0 ? void 0 : _overlayRef$current.child;\n      },\n\n      open: handleOpen,\n      close: handleClose,\n      updatePosition: function updatePosition() {\n        var _overlayRef$current2, _overlayRef$current2$;\n\n        (_overlayRef$current2 = overlayRef.current) === null || _overlayRef$current2 === void 0 ? void 0 : (_overlayRef$current2$ = _overlayRef$current2.updatePosition) === null || _overlayRef$current2$ === void 0 ? void 0 : _overlayRef$current2$.call(_overlayRef$current2);\n      }\n    };\n  });\n  /**\n   * Close after the cursor leaves.\n   */\n\n  var handleCloseWhenLeave = useCallback(function () {\n    // When the cursor is not on the overlay and not on the trigger, it is closed.\n    if (!isOnOverlay.current && !isOnTrigger.current) {\n      handleClose();\n    }\n  }, [handleClose]);\n  /**\n   * Toggle open and closed state.\n   */\n\n  var handleOpenState = useCallback(function () {\n    if (open) {\n      handleCloseWhenLeave();\n    } else {\n      handleOpen();\n    }\n  }, [open, handleCloseWhenLeave, handleOpen]);\n  var handleDelayedOpen = useCallback(function () {\n    if (!enterable) {\n      return handleOpen();\n    }\n\n    isOnTrigger.current = true;\n\n    if (!isNil(delayCloseTimer.current)) {\n      clearTimeout(delayCloseTimer.current);\n      delayCloseTimer.current = null;\n      return handleOpen();\n    }\n\n    if (open) {\n      return;\n    }\n\n    handleOpen();\n  }, [enterable, open, handleOpen]);\n  var handleDelayedClose = useCallback(function () {\n    if (!enterable) {\n      handleClose();\n    }\n\n    isOnTrigger.current = false;\n\n    if (!isNil(delayOpenTimer.current)) {\n      clearTimeout(delayOpenTimer.current);\n      delayOpenTimer.current = null;\n      return;\n    }\n\n    if (!open || !isNil(delayCloseTimer.current)) {\n      return;\n    }\n\n    delayCloseTimer.current = setTimeout(function () {\n      clearTimeout(delayCloseTimer.current);\n      delayCloseTimer.current = null;\n      handleCloseWhenLeave();\n    }, 200);\n  }, [enterable, open, handleClose, handleCloseWhenLeave]);\n  var handleSpeakerMouseEnter = useCallback(function () {\n    isOnOverlay.current = true;\n  }, []);\n  var handleSpeakerMouseLeave = useCallback(function () {\n    isOnOverlay.current = false;\n\n    if (!isOneOf('click', trigger) && !isOneOf('contextMenu', trigger) && !isOneOf('active', trigger)) {\n      handleCloseWhenLeave();\n    }\n  }, [handleCloseWhenLeave, trigger]);\n  var preventDefault = useCallback(function (event) {\n    event.preventDefault();\n  }, []);\n  var triggerEvents = {\n    onClick: onClick,\n    onContextMenu: onContextMenu,\n    onMouseOver: onMouseOver,\n    onMouseOut: onMouseOut,\n    onFocus: onFocus,\n    onBlur: onBlur\n  };\n\n  if (!disabled && !readOnly && !plaintext) {\n    if (isOneOf('click', trigger)) {\n      triggerEvents.onClick = createChainedFunction(handleOpenState, triggerEvents.onClick);\n    }\n\n    if (isOneOf('contextMenu', trigger)) {\n      triggerEvents.onContextMenu = createChainedFunction(preventDefault, handleOpenState, triggerEvents.onContextMenu);\n    }\n\n    if (isOneOf('active', trigger)) {\n      triggerEvents.onClick = createChainedFunction(handleDelayedOpen, triggerEvents.onClick);\n    }\n\n    if (isOneOf('hover', trigger)) {\n      var onMouseOverListener = null;\n      var onMouseOutListener = null;\n\n      if (trigger !== 'none') {\n        onMouseOverListener = function onMouseOverListener(e) {\n          return onMouseEventHandler(handleDelayedOpen, e);\n        };\n\n        onMouseOutListener = function onMouseOutListener(e) {\n          return onMouseEventHandler(handleDelayedClose, e);\n        };\n      }\n\n      triggerEvents.onMouseOver = createChainedFunction(onMouseOverListener, onMouseOver);\n      triggerEvents.onMouseOut = createChainedFunction(onMouseOutListener, onMouseOut);\n    }\n\n    if (isOneOf('focus', trigger)) {\n      triggerEvents.onFocus = createChainedFunction(handleDelayedOpen, onFocus);\n      triggerEvents.onBlur = createChainedFunction(handleDelayedClose, onBlur);\n    }\n  }\n\n  var renderOverlay = function renderOverlay() {\n    var overlayProps = _extends({}, rest, {\n      triggerTarget: triggerRef,\n      onClose: trigger !== 'none' ? createChainedFunction(handleClose, onClose) : undefined,\n      placement: placement,\n      container: container,\n      open: open\n    });\n\n    var speakerProps = {\n      id: controlId\n    }; // The purpose of adding mouse entry and exit events to the Overlay is to record whether the current cursor is on the Overlay.\n    // When `trigger` is equal to `hover`, if the cursor leaves the `triggerTarget` and stays on the Overlay,\n    // the Overlay will continue to remain open.\n\n    if (trigger !== 'none' && enterable) {\n      speakerProps.onMouseEnter = handleSpeakerMouseEnter;\n      speakerProps.onMouseLeave = handleSpeakerMouseLeave;\n    }\n\n    return /*#__PURE__*/React.createElement(Overlay, _extends({}, overlayProps, {\n      ref: overlayRef,\n      childrenProps: speakerProps\n    }), typeof speaker === 'function' ? function (props, ref) {\n      return speaker(_extends({}, props, {\n        onClose: handleClose\n      }), ref);\n    } : speaker);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, typeof children === 'function' ? children(triggerEvents, triggerRef) : /*#__PURE__*/React.cloneElement(children, _extends({\n    ref: triggerRef,\n    'aria-describedby': controlId\n  }, mergeEvents(triggerEvents, children.props))), /*#__PURE__*/React.createElement(Portal, null, renderOverlay()));\n});\nOverlayTrigger.displayName = 'OverlayTrigger';\nOverlayTrigger.defaultProps = defaultProps;\nexport default OverlayTrigger;"]},"metadata":{},"sourceType":"module"}