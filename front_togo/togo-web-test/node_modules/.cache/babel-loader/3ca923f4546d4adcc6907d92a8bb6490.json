{"ast":null,"code":"import _slicedToArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Flex,Image,Text,Box}from\"@chakra-ui/react\";import{getWallet}from\"../../APIs/ProfileAPIs\";import{setWallet,toastMessage}from\"../../Actions/GeneralActions\";import{useDispatch,useSelector}from\"react-redux\";import styles from'./Styles';import walletImage from'../../assets/wallet.png';import Loader from\"../../components/Loader/Loader\";import translate from\"../../i18n/translate\";export default function WalletContainer(){var wallet=useSelector(function(state){return state.general.wallet;});var dispatch=useDispatch();var _useState=useState(true),_useState2=_slicedToArray(_useState,1),loading=_useState2[0];useEffect(function(){var interval=null;var currentWallet=0;getWallet().then(function(_ref){var server_response=_ref.data.server_response;var wallet=server_response[0].TransporterBalance;interval=setInterval(function(){if(!(currentWallet>=wallet)){currentWallet+=wallet/7;dispatch(setWallet(currentWallet.toFixed(2)));}else{dispatch(setWallet(wallet));clearInterval(interval);}},100);}).catch(function(err){dispatch(toastMessage(err));}).finally(function(){//setLoading(false);\n});return function(){return clearInterval(interval);};},[dispatch]);return/*#__PURE__*/React.createElement(Flex,Object.assign({},styles.container,{style:{direction:\"ltr\"}}),/*#__PURE__*/React.createElement(Flex,{alignItems:\"center\",position:\"relative\"},/*#__PURE__*/React.createElement(Image,{src:walletImage,w:300,position:\"fixed\",zIndex:1}),/*#__PURE__*/React.createElement(Box,styles.balanceContainer,loading?/*#__PURE__*/React.createElement(Loader,null):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Text,styles.title,translate(\"WALLET.BALANCE\")),/*#__PURE__*/React.createElement(Text,styles.balance,wallet)))));};","map":{"version":3,"sources":["/home/system/togo-web-test/src/Container/WalletContainer/WalletContainer.js"],"names":["React","useEffect","useState","Flex","Image","Text","Box","getWallet","setWallet","toastMessage","useDispatch","useSelector","styles","walletImage","Loader","translate","WalletContainer","wallet","state","general","dispatch","loading","interval","currentWallet","then","server_response","data","TransporterBalance","setInterval","toFixed","clearInterval","catch","err","finally","container","direction","balanceContainer","title","balance"],"mappings":"iJAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,OAAQC,IAAR,CAAcC,KAAd,CAAqBC,IAArB,CAA2BC,GAA3B,KAAqC,kBAArC,CACA,OAAQC,SAAR,KAAwB,wBAAxB,CACA,OAAQC,SAAR,CAAmBC,YAAnB,KAAsC,8BAAtC,CACA,OAAQC,WAAR,CAAqBC,WAArB,KAAuC,aAAvC,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,yBAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,gCAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,sBAAtB,CAEA,cAAe,SAASC,CAAAA,eAAT,EAA2B,CACtC,GAAMC,CAAAA,MAAM,CAAGN,WAAW,CAAC,SAAAO,KAAK,QAAIA,CAAAA,KAAK,CAACC,OAAN,CAAcF,MAAlB,EAAN,CAA1B,CACA,GAAMG,CAAAA,QAAQ,CAAGV,WAAW,EAA5B,CACA,cAAoBR,QAAQ,CAAC,IAAD,CAA5B,wCAAOmB,OAAP,eAEApB,SAAS,CAAC,UAAM,CACZ,GAAIqB,CAAAA,QAAQ,CAAG,IAAf,CACA,GAAIC,CAAAA,aAAa,CAAG,CAApB,CAEAhB,SAAS,GAAGiB,IAAZ,CAAiB,cAA+B,IAAtBC,CAAAA,eAAsB,MAA7BC,IAA6B,CAAtBD,eAAsB,CAC5C,GAAIR,CAAAA,MAAM,CAAGQ,eAAe,CAAC,CAAD,CAAf,CAAmBE,kBAAhC,CACAL,QAAQ,CAAGM,WAAW,CAAC,UAAM,CACzB,GAAI,EAAEL,aAAa,EAAIN,MAAnB,CAAJ,CAAgC,CAC5BM,aAAa,EAAKN,MAAM,CAAG,CAA3B,CACAG,QAAQ,CAACZ,SAAS,CAACe,aAAa,CAACM,OAAd,CAAsB,CAAtB,CAAD,CAAV,CAAR,CACH,CAHD,IAGO,CACHT,QAAQ,CAACZ,SAAS,CAACS,MAAD,CAAV,CAAR,CACAa,aAAa,CAACR,QAAD,CAAb,CACH,CACJ,CARqB,CAQnB,GARmB,CAAtB,CASH,CAXD,EAWGS,KAXH,CAWS,SAAAC,GAAG,CAAI,CACZZ,QAAQ,CAACX,YAAY,CAACuB,GAAD,CAAb,CAAR,CACH,CAbD,EAaGC,OAbH,CAaW,UAAM,CACb;AACH,CAfD,EAiBA,MAAO,kBAAMH,CAAAA,aAAa,CAACR,QAAD,CAAnB,EAAP,CACH,CAtBQ,CAsBN,CAACF,QAAD,CAtBM,CAAT,CAwBA,mBACI,oBAAC,IAAD,kBAAUR,MAAM,CAACsB,SAAjB,EAA4B,KAAK,CAAE,CAACC,SAAS,CAAE,KAAZ,CAAnC,gBACI,oBAAC,IAAD,EAAM,UAAU,CAAC,QAAjB,CAA0B,QAAQ,CAAC,UAAnC,eACI,oBAAC,KAAD,EACI,GAAG,CAAEtB,WADT,CAEI,CAAC,CAAE,GAFP,CAGI,QAAQ,CAAC,OAHb,CAII,MAAM,CAAE,CAJZ,EADJ,cAOI,oBAAC,GAAD,CAASD,MAAM,CAACwB,gBAAhB,CACKf,OAAO,cAAG,oBAAC,MAAD,MAAH,cACJ,qDACI,oBAAC,IAAD,CAAUT,MAAM,CAACyB,KAAjB,CAAyBtB,SAAS,CAAC,gBAAD,CAAlC,CADJ,cAEI,oBAAC,IAAD,CAAUH,MAAM,CAAC0B,OAAjB,CAA2BrB,MAA3B,CAFJ,CAFR,CAPJ,CADJ,CADJ,CAoBH","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {Flex, Image, Text, Box} from \"@chakra-ui/react\";\r\nimport {getWallet} from \"../../APIs/ProfileAPIs\";\r\nimport {setWallet, toastMessage} from \"../../Actions/GeneralActions\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport styles from './Styles';\r\nimport walletImage from '../../assets/wallet.png';\r\nimport Loader from \"../../components/Loader/Loader\";\r\nimport translate from \"../../i18n/translate\";\r\n\r\nexport default function WalletContainer() {\r\n    const wallet = useSelector(state => state.general.wallet);\r\n    const dispatch = useDispatch();\r\n    const [loading, ] = useState(true);\r\n\r\n    useEffect(() => {\r\n        let interval = null;\r\n        let currentWallet = 0;\r\n\r\n        getWallet().then(({data: {server_response}}) => {\r\n            let wallet = server_response[0].TransporterBalance;\r\n            interval = setInterval(() => {\r\n                if (!(currentWallet >= wallet)) {\r\n                    currentWallet += (wallet / 7);\r\n                    dispatch(setWallet(currentWallet.toFixed(2)));\r\n                } else {\r\n                    dispatch(setWallet(wallet));\r\n                    clearInterval(interval);\r\n                }\r\n            }, 100);\r\n        }).catch(err => {\r\n            dispatch(toastMessage(err));\r\n        }).finally(() => {\r\n            //setLoading(false);\r\n        });\r\n\r\n        return () => clearInterval(interval);\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <Flex {...styles.container} style={{direction: \"ltr\"}}>\r\n            <Flex alignItems=\"center\" position=\"relative\">\r\n                <Image\r\n                    src={walletImage}\r\n                    w={300}\r\n                    position=\"fixed\"\r\n                    zIndex={1}\r\n                />\r\n                <Box {...styles.balanceContainer}>\r\n                    {loading ? <Loader/> : (\r\n                        <>\r\n                            <Text {...styles.title}>{translate(\"WALLET.BALANCE\")}</Text>\r\n                            <Text {...styles.balance}>{wallet}</Text>\r\n                        </>\r\n                    )}\r\n                </Box>\r\n            </Flex>\r\n        </Flex>\r\n    );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}