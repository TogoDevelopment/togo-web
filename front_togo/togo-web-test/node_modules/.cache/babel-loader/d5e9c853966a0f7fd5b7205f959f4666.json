{"ast":null,"code":"import _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/system/togo-web-test/src/components/AdminBoard.jsx\";\nimport { FormControl } from \"react-bootstrap\";\nimport translate from \"../i18n/translate\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport { AddTeamMember, CreateTeam, DeleteMember, DeleteTeam, GetTeam, GetTransporterTeam, UpdateTeam } from \"./APIs/OrdersAPIs\";\nimport { useIntl } from \"react-intl\";\nimport { Box } from \"@chakra-ui/layout\";\nimport DynamicTable from \"./DynamicTable/DynamicTable\";\nimport DeleteTeamDialog from \"./DeleteTeam\";\nimport TransferBtn from \"./TransferBtn\";\nimport { EditTeamDialog } from \"./EditTeamDialog\";\nimport { getWallet } from \"../APIs/ProfileAPIs\";\nimport { setWallet } from \"../Actions/GeneralActions\";\nimport { useDispatch } from \"react-redux\";\nexport default function AdminBoard() {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      teams = _useState2[0],\n      setTeams = _useState2[1];\n\n  var _useState3 = useState([//{FullName: \"test\", PhoneNumber: \"sdfsdf\", TeamStatus: \"sdf\", TransporterId: \"44\"}\n  ]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      members = _useState4[0],\n      setMembers = _useState4[1];\n\n  var _useState5 = useState(-1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selected = _useState6[0],\n      setSelected = _useState6[1];\n\n  var intl = useIntl();\n  var createRef = useRef();\n  var ref = useRef();\n  var getTrans = useCallback(function () {\n    return GetTransporterTeam().then(function (res) {\n      setTeams(res.data.server_response);\n      return res.data.server_response;\n    });\n  }, []);\n  var getMembers = useCallback(function () {\n    var _teams$selected;\n\n    return GetTeam((_teams$selected = teams[selected]) === null || _teams$selected === void 0 ? void 0 : _teams$selected.id).then(function (res) {\n      setMembers(res.data.server_response);\n      return res.data.server_response;\n    });\n  }, [teams, selected]);\n  var columns = [{\n    label: translate(\"ADMIN.TEAM_NAME\"),\n    key: \"Name\"\n  }, {\n    label: \"\",\n    key: \"id\",\n    format: function format(_ref) {\n      var id = _ref.id,\n          Name = _ref.Name;\n      return /*#__PURE__*/React.createElement(DeleteTeamDialog, {\n        teamName: Name,\n        onConfirm: function onConfirm() {\n          DeleteTeam(id).then(function () {\n            getTrans();\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 20\n        }\n      });\n    }\n  }, {\n    label: \"\",\n    key: \"id\",\n    format: function format(_ref2) {\n      var id = _ref2.id,\n          Name = _ref2.Name;\n      return /*#__PURE__*/React.createElement(EditTeamDialog, {\n        teamName: Name,\n        onConfirm: function onConfirm(teamName) {\n          UpdateTeam(teamName, id).then(function () {\n            getTrans();\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }\n      });\n    }\n  }];\n  var dispatch = useDispatch();\n  var membersColumns = [{\n    label: translate(\"ADMIN.MEMBER_NAME\"),\n    key: \"FullName\"\n  }, {\n    label: translate(\"ADMIN.MOBILE_NUMBER\"),\n    key: \"PhoneNumber\"\n  }, {\n    label: translate(\"ADMIN.STATUS\"),\n    key: \"TeamStatus\"\n  }, //{label: translate(\"ADMIN.BALANCE\"), key: \"Balance\"},\n  {\n    label: \"\",\n    key: \"TransporterId\",\n    format: function format(_ref3) {\n      var TransporterId = _ref3.TransporterId,\n          FullName = _ref3.FullName;\n      return /*#__PURE__*/React.createElement(DeleteTeamDialog, {\n        teamName: FullName,\n        onConfirm: function onConfirm() {\n          DeleteMember(TransporterId).then(function () {\n            getMembers();\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 20\n        }\n      });\n    }\n  }, {\n    label: \"\",\n    key: \"TransporterId\",\n    format: function format(_ref4) {\n      var TransporterId = _ref4.TransporterId;\n      return /*#__PURE__*/React.createElement(TransferBtn, {\n        TransporterId: TransporterId,\n        onSuccess: function onSuccess() {\n          getMembers().then(function () {\n            getWallet().then(function (_ref5) {\n              var server_response = _ref5.data.server_response;\n              dispatch(setWallet(server_response[0].TransporterBalance));\n            });\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 20\n        }\n      });\n    }\n  }];\n  useEffect(function () {\n    getTrans().then(function (server_response) {\n      setSelected(server_response.length ? 0 : -1);\n    });\n  }, []);\n  useEffect(function () {\n    if (selected !== -1) {\n      getMembers();\n    }\n  }, [selected]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"block\",\n      width: \"90%\",\n      margin: \"0 auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    w: \"40%\",\n    d: \"inline-block\",\n    borderInlineEnd: \"1px solid #dee2e6\",\n    paddingInlineEnd: \"1%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    d: \"flex\",\n    borderBottom: \"1px solid #dee2e6\",\n    pb: \"10px\",\n    mb: \"10px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    ref: createRef,\n    defaultValue: \"\",\n    style: {\n      flex: \"1\",\n      marginInlineEnd: \"10px\"\n    },\n    placeholder: intl.formatMessage({\n      id: \"ADMIN.ENTER_TEAM_NAME\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onClick: function onClick() {\n      if (createRef.current.value.trim() === \"\") {\n        return;\n      }\n\n      CreateTeam(createRef.current.value).then(function () {\n        GetTransporterTeam().then(function (res) {\n          setTeams(res.data.server_response);\n          createRef.current.value = \"\";\n        });\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, translate(\"ADMIN.CREATE_TEAM\"))), /*#__PURE__*/React.createElement(DynamicTable, {\n    columns: columns,\n    data: teams,\n    onRowSelect: function onRowSelect(info, selectedIdx) {\n      setSelected(selectedIdx);\n    },\n    selected: selected,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Box, {\n    w: \"59%\",\n    d: \"inline-block\",\n    verticalAlign: \"top\",\n    marginInlineStart: \"1%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    d: \"flex\",\n    borderBottom: \"1px solid #dee2e6\",\n    pb: \"10px\",\n    mb: \"10px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    ref: ref,\n    defaultValue: \"\",\n    style: {\n      flex: \"1\",\n      marginInlineEnd: \"10px\"\n    },\n    placeholder: intl.formatMessage({\n      id: \"ADMIN.ENTER_MEMBER_NAME\"\n    }),\n    disabled: selected === -1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onClick: function onClick() {\n      if (ref.current.value.trim() === \"\") {\n        return;\n      }\n\n      AddTeamMember(teams[selected].id, ref.current.value).then(function () {\n        GetTeam(teams[selected].id).then(function (res) {\n          setMembers(res.data.server_response);\n        });\n      });\n      ref.current.value = \"\";\n    },\n    disabled: selected === -1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }, translate(\"ADMIN.ADD_MEMBER\"))), /*#__PURE__*/React.createElement(DynamicTable, {\n    columns: membersColumns,\n    data: members,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  })));\n}","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/AdminBoard.jsx"],"names":["FormControl","translate","React","useCallback","useEffect","useRef","useState","Button","AddTeamMember","CreateTeam","DeleteMember","DeleteTeam","GetTeam","GetTransporterTeam","UpdateTeam","useIntl","Box","DynamicTable","DeleteTeamDialog","TransferBtn","EditTeamDialog","getWallet","setWallet","useDispatch","AdminBoard","teams","setTeams","members","setMembers","selected","setSelected","intl","createRef","ref","getTrans","then","res","data","server_response","getMembers","id","columns","label","key","format","Name","teamName","dispatch","membersColumns","TransporterId","FullName","TransporterBalance","length","display","width","margin","flex","marginInlineEnd","formatMessage","current","value","trim","info","selectedIdx"],"mappings":"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","sourcesContent":["import { FormControl } from \"react-bootstrap\";\r\nimport translate from \"../i18n/translate\";\r\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { AddTeamMember, CreateTeam, DeleteMember, DeleteTeam, GetTeam, GetTransporterTeam, UpdateTeam } from \"./APIs/OrdersAPIs\";\r\nimport { useIntl } from \"react-intl\";\r\nimport { Box } from \"@chakra-ui/layout\";\r\nimport DynamicTable from \"./DynamicTable/DynamicTable\";\r\nimport DeleteTeamDialog from \"./DeleteTeam\";\r\nimport TransferBtn from \"./TransferBtn\";\r\nimport { EditTeamDialog } from \"./EditTeamDialog\";\r\nimport { getWallet } from \"../APIs/ProfileAPIs\";\r\nimport { setWallet } from \"../Actions/GeneralActions\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nexport default function AdminBoard(){\r\n    const [teams, setTeams] = useState([]);\r\n    const [members, setMembers] = useState([\r\n        //{FullName: \"test\", PhoneNumber: \"sdfsdf\", TeamStatus: \"sdf\", TransporterId: \"44\"}\r\n    ]);\r\n    const [selected, setSelected] = useState(-1);\r\n    const intl = useIntl();\r\n    const createRef = useRef();\r\n    const ref = useRef();\r\n    const getTrans = useCallback(()=>{\r\n        return GetTransporterTeam().then((res)=>{\r\n            setTeams(res.data.server_response);\r\n            return res.data.server_response;\r\n        });\r\n    }, []);\r\n    const getMembers = useCallback(()=>{\r\n        return GetTeam(teams[selected]?.id).then((res) => {\r\n            setMembers(res.data.server_response);\r\n            return res.data.server_response;\r\n        });\r\n    }, [teams, selected]);\r\n    const columns = [\r\n        {label: translate(\"ADMIN.TEAM_NAME\"), key: \"Name\"},\r\n        {label: \"\", key: \"id\", format: ({id, Name}) => {\r\n            return <DeleteTeamDialog teamName={Name} onConfirm={()=>{\r\n                DeleteTeam(id).then(()=>{\r\n                     getTrans();\r\n                });}\r\n            } \r\n            />\r\n        }},\r\n        {label: \"\", key: \"id\", format: ({id, Name})=>{\r\n            return (\r\n            <EditTeamDialog teamName={Name} onConfirm={(teamName)=>{\r\n                UpdateTeam(teamName, id).then(()=>{\r\n                    getTrans();\r\n                });\r\n            }} />\r\n            )\r\n        }}\r\n    ];\r\n    const dispatch = useDispatch();\r\n    const membersColumns = [\r\n        {label: translate(\"ADMIN.MEMBER_NAME\"), key: \"FullName\"},\r\n        {label: translate(\"ADMIN.MOBILE_NUMBER\"), key: \"PhoneNumber\"}, \r\n        {label: translate(\"ADMIN.STATUS\"), key: \"TeamStatus\"},\r\n        //{label: translate(\"ADMIN.BALANCE\"), key: \"Balance\"},\r\n        {label: \"\", key: \"TransporterId\", format: ({TransporterId, FullName})=>{\r\n            return <DeleteTeamDialog teamName={FullName} onConfirm={()=>{\r\n                DeleteMember(TransporterId).then(()=>{\r\n                    getMembers();\r\n                });\r\n            }}\r\n            />\r\n        }},\r\n        {label: \"\", key: \"TransporterId\", format: ({TransporterId})=>{\r\n            return <TransferBtn TransporterId={TransporterId} onSuccess={()=>{\r\n                getMembers().then(()=>{\r\n                    getWallet().then(({data: {server_response}}) => {\r\n                        dispatch(setWallet(server_response[0].TransporterBalance));\r\n                    })\r\n                })\r\n            }} />\r\n        }}\r\n    ];\r\n    \r\n    useEffect(()=>{\r\n        getTrans().then((server_response)=>{\r\n            setSelected(server_response.length ? 0 : -1);\r\n        })\r\n    }, []);\r\n\r\n    useEffect(()=>{\r\n        if(selected !== -1){\r\n            getMembers();\r\n        }\r\n    }, [selected]);\r\n\r\n    return (\r\n        <div style={{display: \"block\", width: \"90%\", margin: \"0 auto\"}}>\r\n            <Box w=\"40%\" d=\"inline-block\" borderInlineEnd=\"1px solid #dee2e6\" paddingInlineEnd=\"1%\">\r\n                <Box d=\"flex\" borderBottom=\"1px solid #dee2e6\" pb=\"10px\" mb=\"10px\">\r\n                    <FormControl\r\n                        ref={createRef}\r\n                        defaultValue=\"\"\r\n                        style={{flex: \"1\", marginInlineEnd: \"10px\"}}\r\n                        placeholder={intl.formatMessage({id:\"ADMIN.ENTER_TEAM_NAME\"})}\r\n                    />\r\n                    \r\n                    <Button\r\n                        variant=\"primary\"\r\n                        onClick={() => {\r\n                            if(createRef.current.value.trim() === \"\"){\r\n                                return;\r\n                            }\r\n                            CreateTeam(createRef.current.value).then(()=>{\r\n                                GetTransporterTeam().then((res)=>{\r\n                                    setTeams(res.data.server_response);\r\n                                    createRef.current.value = \"\";\r\n                                });\r\n                            });\r\n                        }}\r\n                    >\r\n                        {translate(\"ADMIN.CREATE_TEAM\")}\r\n                    </Button>\r\n                </Box>\r\n                <DynamicTable \r\n                    columns={columns} \r\n                    data={teams} \r\n                    onRowSelect={(info, selectedIdx)=>{\r\n                        setSelected(selectedIdx);\r\n                    }}\r\n                    selected={selected}\r\n                />\r\n            </Box>\r\n            <Box w=\"59%\" d=\"inline-block\" verticalAlign=\"top\" marginInlineStart=\"1%\">\r\n                <Box d=\"flex\" borderBottom=\"1px solid #dee2e6\" pb=\"10px\" mb=\"10px\">\r\n                    <FormControl\r\n                        ref={ref}\r\n                        defaultValue=\"\"\r\n                        style={{flex: \"1\", marginInlineEnd: \"10px\"}}\r\n                        placeholder={intl.formatMessage({id:\"ADMIN.ENTER_MEMBER_NAME\"})}\r\n                        disabled={selected === -1}\r\n                    />\r\n                    \r\n                    <Button\r\n                        variant=\"primary\"\r\n                        onClick={()=>{\r\n                            if(ref.current.value.trim() === \"\"){\r\n                                return;\r\n                            }\r\n                            AddTeamMember(teams[selected].id, ref.current.value).then(() => {\r\n                                GetTeam(teams[selected].id).then((res) => {\r\n                                    setMembers(res.data.server_response);\r\n                                });\r\n                            });\r\n                            ref.current.value = \"\";\r\n                        }}\r\n                        disabled={selected === -1}\r\n                    >\r\n                        {translate(\"ADMIN.ADD_MEMBER\")}\r\n                    </Button>\r\n                </Box>\r\n                <DynamicTable columns={membersColumns} data={members} />\r\n            </Box>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}