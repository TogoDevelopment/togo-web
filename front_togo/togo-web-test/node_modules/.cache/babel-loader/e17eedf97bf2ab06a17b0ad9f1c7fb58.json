{"ast":null,"code":"import _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/system/togo-web-test/src/components/AssignToDialog.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { Button, Modal } from \"react-bootstrap\";\nimport translate from \"../i18n/translate\";\nimport MyNetworkDropDown from \"./MyNetworkDropDown\";\nimport { GetAllNetworkMembers } from \"../APIs/OrdersAPIs\";\nimport { AssginOrderToMemberOnNetwork } from \"../APIs/OrdersAPIs\";\nexport default function AssignToDialog(_ref) {\n  var ordersIds = _ref.ordersIds,\n    onSuccess = _ref.onSuccess;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    openAssignModal = _useState2[0],\n    setOpenAssignModal = _useState2[1];\n  var handleAssignModalClose = function handleAssignModalClose() {\n    setOpenAssignModal(false);\n  };\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    inputValue = _useState4[0],\n    setInputValue = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    selectedMember = _useState6[0],\n    setSelectedMember = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    loading = _useState8[0],\n    setLoading = _useState8[1];\n  var _useState9 = useState([]),\n    _useState10 = _slicedToArray(_useState9, 2),\n    allNetworkMembers = _useState10[0],\n    setAllNetworkMembers = _useState10[1];\n  var handleAssign = function handleAssign() {\n    /* if (selectedMember === '' || selectedMember === undefined) {\r\n       \r\n        for (let i = 0; i < ordersIds.length; i++) {\r\n            for (let j = 0; j < allNetworkMembers.length; j++) {\r\n                AssginOrderToMemberOnNetwork(ordersIds[i], allNetworkMembers[j]).then(()=>{\r\n                    // console.log(\"order-\" + ordersIds[i] + \" assigned to \" + allNetworkMembers[j].FullName)\r\n                });\r\n            }\r\n        }\r\n          alert(\"order/s assigned to all\");\r\n        \r\n    } else { */\n\n    for (var i = 0; i < ordersIds.length; i++) {\n      // to be fixed \n      AssginOrderToMemberOnNetwork(ordersIds[i], selectedMember.memberId).then(function () {\n        // console.log(\"order-\" + ordersIds[i] + \" assigned to \" + selectedMember.FullName)\n      });\n    }\n    onSuccess();\n    alert(\"order/s assigned\");\n    // }\n  };\n\n  useEffect(function () {\n    var timer = setTimeout(function () {\n      if (openAssignModal) {\n        setLoading(true);\n        GetAllNetworkMembers().then(function (res) {\n          setLoading(false);\n          setAllNetworkMembers(res.data.server_response.filter(function (member) {\n            return member.FullName.toLowerCase().replaceAll(\"أ\", 'ا').replaceAll(\"إ\", 'ا').includes(inputValue.toLowerCase()) || member.PhoneNumber.includes(inputValue);\n          }));\n        });\n      }\n    }, 500);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [inputValue, openAssignModal]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button /* className={\"btn-grad text-white ms-2 me-2\"} */, {\n    variant: \"outline-primary\",\n    onClick: function onClick() {\n      ordersIds.length > 0 ? setOpenAssignModal(true) : alert(\"Select order/s first!\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, translate(\"TEMP.ASSIGN_TO\")), /*#__PURE__*/React.createElement(Modal, {\n    size: \"lg\",\n    show: openAssignModal,\n    onHide: handleAssignModalClose,\n    centered: true,\n    animation: true,\n    backdrop: \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, translate(\"TEMP.ASSIGN_TO\"))), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MyNetworkDropDown, {\n    loading: loading,\n    network: allNetworkMembers,\n    onSearch: setInputValue,\n    onSelect: setSelectedMember,\n    selectedMember: selectedMember,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button /* style={{ position: \"absolute\", left: \"1rem\" }} */, {\n    onClick: function onClick() {\n      handleAssign();\n      handleAssignModalClose();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, translate(\"TEMP.ASSIGN\")), /*#__PURE__*/React.createElement(Button, {\n    variant: \"danger\",\n    onClick: handleAssignModalClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, translate(\"GENERAL.CLOSE\")))));\n}","map":{"version":3,"names":["React","useState","useEffect","Button","Modal","translate","MyNetworkDropDown","GetAllNetworkMembers","AssginOrderToMemberOnNetwork","AssignToDialog","_ref","ordersIds","onSuccess","_useState","_useState2","_slicedToArray","openAssignModal","setOpenAssignModal","handleAssignModalClose","_useState3","_useState4","inputValue","setInputValue","_useState5","_useState6","selectedMember","setSelectedMember","_useState7","_useState8","loading","setLoading","_useState9","_useState10","allNetworkMembers","setAllNetworkMembers","handleAssign","i","length","memberId","then","alert","timer","setTimeout","res","data","server_response","filter","member","FullName","toLowerCase","replaceAll","includes","PhoneNumber","clearTimeout","createElement","Fragment","variant","onClick","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","size","show","onHide","centered","animation","backdrop","Header","closeButton","Title","Body","network","onSearch","onSelect","Footer"],"sources":["/home/system/togo-web-test/src/components/AssignToDialog.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Button, Modal } from \"react-bootstrap\";\r\nimport translate from \"../i18n/translate\";\r\nimport MyNetworkDropDown from \"./MyNetworkDropDown\";\r\nimport { GetAllNetworkMembers } from \"../APIs/OrdersAPIs\";\r\nimport { AssginOrderToMemberOnNetwork } from \"../APIs/OrdersAPIs\";\r\n\r\nexport default function AssignToDialog({ ordersIds, onSuccess }) {\r\n    const [openAssignModal, setOpenAssignModal] = useState(false);\r\n    const handleAssignModalClose = () => { setOpenAssignModal(false); }\r\n\r\n    const [inputValue, setInputValue] = useState('');\r\n    const [selectedMember, setSelectedMember] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [allNetworkMembers, setAllNetworkMembers] = useState([]);\r\n\r\n    const handleAssign = () => {\r\n        /* if (selectedMember === '' || selectedMember === undefined) {\r\n           \r\n            for (let i = 0; i < ordersIds.length; i++) {\r\n                for (let j = 0; j < allNetworkMembers.length; j++) {\r\n                    AssginOrderToMemberOnNetwork(ordersIds[i], allNetworkMembers[j]).then(()=>{\r\n                        // console.log(\"order-\" + ordersIds[i] + \" assigned to \" + allNetworkMembers[j].FullName)\r\n                    });\r\n                }\r\n            }\r\n\r\n            alert(\"order/s assigned to all\");\r\n            \r\n        } else { */\r\n\r\n            for (let i = 0; i < ordersIds.length; i++) { // to be fixed \r\n                AssginOrderToMemberOnNetwork(ordersIds[i], selectedMember.memberId).then(()=>{\r\n                    // console.log(\"order-\" + ordersIds[i] + \" assigned to \" + selectedMember.FullName)\r\n                });\r\n            }\r\n\r\n            onSuccess();\r\n            alert(\"order/s assigned\");\r\n        // }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            if (openAssignModal) {\r\n                setLoading(true);\r\n\r\n                GetAllNetworkMembers().then((res) => {\r\n                    setLoading(false);\r\n\r\n                    setAllNetworkMembers(res.data.server_response.filter(member => member.FullName.toLowerCase().replaceAll(\"أ\", 'ا').replaceAll(\"إ\", 'ا').includes(inputValue.toLowerCase()) || member.PhoneNumber.includes(inputValue)));\r\n                });\r\n            }\r\n        }, 500)\r\n\r\n        return () => {\r\n            return clearTimeout(timer)\r\n        }\r\n    }, [inputValue, openAssignModal]);\r\n\r\n    return <>\r\n        <Button /* className={\"btn-grad text-white ms-2 me-2\"} */ variant=\"outline-primary\" onClick={() => { ordersIds.length > 0 ? setOpenAssignModal(true) : alert(\"Select order/s first!\") }}>{translate(\"TEMP.ASSIGN_TO\")}</Button>\r\n        <Modal size=\"lg\" show={openAssignModal} onHide={handleAssignModalClose} centered animation={true} backdrop=\"static\">\r\n\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>{translate(\"TEMP.ASSIGN_TO\")}</Modal.Title>\r\n            </Modal.Header>\r\n\r\n            <Modal.Body>\r\n\r\n                <MyNetworkDropDown\r\n                    loading={loading}\r\n                    network={allNetworkMembers}\r\n                    onSearch={setInputValue}\r\n                    onSelect={setSelectedMember}\r\n                    selectedMember={selectedMember}\r\n                />\r\n\r\n            </Modal.Body>\r\n\r\n            <Modal.Footer>\r\n                <Button /* style={{ position: \"absolute\", left: \"1rem\" }} */ onClick={() => {handleAssign(); handleAssignModalClose()}}>{translate(\"TEMP.ASSIGN\")}</Button>\r\n                <Button variant=\"danger\" onClick={handleAssignModalClose}>{translate(\"GENERAL.CLOSE\")}</Button>\r\n            </Modal.Footer>\r\n\r\n        </Modal>\r\n    </>\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}