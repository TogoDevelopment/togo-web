{"ast":null,"code":"import _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/system/togo-web-test/src/components/FinancialTransactions/FinancialTransactions.js\";\nimport React, { useEffect, useState } from 'react';\nimport translate from \"../../i18n/translate\";\nimport './FinancialTransactions.css';\nimport DynamicTable from '../DynamicTable/DynamicTable';\nimport { isTransporter } from '../../Util';\nimport { Button } from \"react-bootstrap\";\nimport { transactionTest, invoicesTest } from '../../APIs/OrdersAPIs';\nimport Table from \"react-bootstrap/Table\"; // import { Pagination } from \"@mui/material\";\n\nfunction computeSizeOfPagination(arrSize) {\n  //Pagination special Function\n  var numberOfPages = 1;\n\n  if (arrSize > 0) {\n    numberOfPages = Math.ceil(arrSize / 5);\n  }\n\n  return numberOfPages;\n}\n\nfunction getTransactionsToShow(transactions, currentPage) {\n  /* We populate the users array and associate it with the number of pages and the current page\r\n  --> subordinate to Pagination special Function*/\n  var arr = [];\n  var start = (currentPage - 1) * 5;\n  var end = currentPage * 5 - 1;\n\n  if (transactions.length < end) {\n    for (var x = start; x < transactions.length; x++) {\n      arr.push(transactions[x]);\n    }\n  } else {\n    for (var _x = start; _x <= end; _x++) {\n      arr.push(transactions[_x]);\n    }\n  }\n\n  return arr;\n}\n\nexport default function Transactions() {\n  var _this = this;\n\n  var numberOfPages = computeSizeOfPagination(transactions.length);\n\n  var handleChangePage = function handleChangePage(event, value) {\n    //handle the change of Pagination\n    setCurrentPage(value);\n  };\n\n  var transactionsArray = getMembersToShow(transactions, currentPage);\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      transactions = _useState2[0],\n      setTransactions = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      invoices = _useState4[0],\n      setInvoices = _useState4[1];\n  /*const columns = [\r\n      {\r\n          label: \"Name\",\r\n          key: \"move_name\",\r\n      },\r\n      {\r\n          label: \"date\",\r\n          key: \"date\"\r\n      },\r\n      {\r\n          label: \"Order ID\",\r\n          key: \"ref\",\r\n      },\r\n      {\r\n          label: \"Journal\",\r\n          key: \"journal\",\r\n      },\r\n      {\r\n          label: \"amount\",\r\n          key: \"amount\"\r\n      }\r\n  ];*/\n\n\n  useEffect(function () {\n    var isMounted = true;\n    transactionTest(localStorage.getItem(\"userId\")).then(function (res) {\n      if (isMounted) {\n        var tempArr = res.data.server_response.data.result.response;\n        tempArr.sort(function (a, b) {\n          return b.ref - a.ref;\n        });\n        setTransactions(tempArr);\n      }\n    });\n    return function () {\n      isMounted = false;\n    }; // console.log(localStorage.getItem(\"userId\"));\n\n    /*transactionTest(localStorage.getItem(\"userId\")).then((res)=>{  // edited (test transactions) \r\n        console.log(res.data.server_response);\r\n        setTransactions(res.data.server_response.data.result.response);\r\n    });*/\n\n    /*invoicesTest(localStorage.getItem(\"userId\")).then((res)=>{  // edited (test transactions) \r\n        // console.log(res.data.server_response.data.result.response);\r\n        // setInvoices(res.data.server_response.data.result.response);\r\n    });*/\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, \"Order ID\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 25\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, \"date\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  }, \"Journal Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, \"amount\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, transactionsArray.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 29\n      }\n    }, item.ref), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 29\n      }\n    }, item.move_name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 29\n      }\n    }, item.date), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 29\n      }\n    }, item.Journal), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 29\n      }\n    }, item.amount));\n  }), !transactions.length && /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 42\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    colSpan: columns.length,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 46\n    }\n  }, \"Transactions not found!\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-end py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }));\n}\n;","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/FinancialTransactions/FinancialTransactions.js"],"names":["React","useEffect","useState","translate","DynamicTable","isTransporter","Button","transactionTest","invoicesTest","Table","computeSizeOfPagination","arrSize","numberOfPages","Math","ceil","getTransactionsToShow","transactions","currentPage","arr","start","end","length","x","push","Transactions","handleChangePage","event","value","setCurrentPage","transactionsArray","getMembersToShow","setTransactions","invoices","setInvoices","isMounted","localStorage","getItem","then","res","tempArr","data","server_response","result","response","sort","a","b","ref","map","item","index","move_name","date","Journal","amount","columns"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport translate from \"../../i18n/translate\";\r\nimport './FinancialTransactions.css';\r\nimport DynamicTable from '../DynamicTable/DynamicTable';\r\nimport { isTransporter } from '../../Util';\r\n\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nimport { transactionTest, invoicesTest } from '../../APIs/OrdersAPIs';\r\n\r\nimport Table from \"react-bootstrap/Table\";\r\n\r\n// import { Pagination } from \"@mui/material\";\r\n\r\nfunction computeSizeOfPagination(arrSize) {  //Pagination special Function\r\n    let numberOfPages = 1;\r\n    if (arrSize > 0) {\r\n        numberOfPages = Math.ceil(arrSize / 5);\r\n    }\r\n    return numberOfPages;\r\n}\r\n\r\nfunction getTransactionsToShow(transactions, currentPage) {/* We populate the users array and associate it with the number of pages and the current page\r\n                                                  --> subordinate to Pagination special Function*/\r\n    const arr = [];\r\n    const start = (currentPage - 1) * 5;\r\n    const end = currentPage * 5 - 1;\r\n    if (transactions.length < end) {\r\n        for (let x = start; x < transactions.length; x++) {\r\n            arr.push(transactions[x]);\r\n        }\r\n    } else {\r\n        for (let x = start; x <= end; x++) {\r\n            arr.push(transactions[x]);\r\n        }\r\n    }\r\n    return arr;\r\n}\r\n\r\nexport default function Transactions() {\r\n\r\n    let numberOfPages = computeSizeOfPagination(transactions.length);\r\n\r\n    const handleChangePage = (event, value) => { //handle the change of Pagination\r\n        setCurrentPage(value);\r\n    };\r\n\r\n    const transactionsArray = getMembersToShow(transactions, currentPage);\r\n\r\n    const [transactions, setTransactions] = useState([]);\r\n    const [invoices, setInvoices] = useState([]);\r\n\r\n    /*const columns = [\r\n        {\r\n            label: \"Name\",\r\n            key: \"move_name\",\r\n        },\r\n        {\r\n            label: \"date\",\r\n            key: \"date\"\r\n        },\r\n        {\r\n            label: \"Order ID\",\r\n            key: \"ref\",\r\n        },\r\n        {\r\n            label: \"Journal\",\r\n            key: \"journal\",\r\n        },\r\n        {\r\n            label: \"amount\",\r\n            key: \"amount\"\r\n        }\r\n    ];*/\r\n\r\n    useEffect(() => {\r\n\r\n\r\n\r\n        let isMounted = true;  \r\n          transactionTest(localStorage.getItem(\"userId\")).then(res => {\r\n            if (isMounted) {\r\n                let tempArr = res.data.server_response.data.result.response;\r\n\r\n                tempArr.sort((a, b) => {\r\n                    return b.ref - a.ref;\r\n                });\r\n\r\n                setTransactions(tempArr); \r\n            }\r\n          })\r\n        return () => { isMounted = false };\r\n\r\n\r\n        // console.log(localStorage.getItem(\"userId\"));\r\n\r\n        /*transactionTest(localStorage.getItem(\"userId\")).then((res)=>{  // edited (test transactions) \r\n            console.log(res.data.server_response);\r\n            setTransactions(res.data.server_response.data.result.response);\r\n        });*/\r\n\r\n        /*invoicesTest(localStorage.getItem(\"userId\")).then((res)=>{  // edited (test transactions) \r\n            // console.log(res.data.server_response.data.result.response);\r\n            // setInvoices(res.data.server_response.data.result.response);\r\n        });*/\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            {/*<DynamicTable columns={columns} data={transactions}/>*/}\r\n\r\n            <Table>\r\n                <thead>\r\n                    <tr>\r\n                        <th scope=\"col\">Order ID</th>\r\n                        <th scope=\"col\">Name</th>\r\n                        <th scope=\"col\">date</th>\r\n                        <th scope=\"col\">Journal Name</th>\r\n                        <th scope=\"col\">amount</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                {transactionsArray.map((item, index) =>\r\n                    <tr \r\n                        key={index} \r\n                        >\r\n                        \r\n                            <td>\r\n                                {item.ref}\r\n                            </td>\r\n                            <td>\r\n                                {item.move_name}\r\n                            </td>\r\n                            <td>\r\n                                {item.date}\r\n                            </td>\r\n                            <td>\r\n                                {item.Journal}\r\n                            </td>\r\n                            <td>\r\n                                {item.amount}\r\n                            </td>\r\n                        \r\n                    </tr>\r\n                )}\r\n                {!transactions.length && <tr><td colSpan={columns.length}>Transactions not found!</td></tr>}\r\n                </tbody>\r\n            </Table>\r\n\r\n            <div className=\"d-flex justify-content-end py-3\">\r\n                    {/*<Pagination\r\n                        count={numberOfPages}\r\n                        onChange={handleChangePage}\r\n                        shape=\"rounded\"\r\n                    />*/}\r\n            </div>\r\n\r\n        </div>\r\n\r\n\r\n    );\r\n   \r\n};\r\n"]},"metadata":{},"sourceType":"module"}