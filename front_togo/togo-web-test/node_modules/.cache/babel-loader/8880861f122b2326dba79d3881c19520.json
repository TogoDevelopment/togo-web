{"ast":null,"code":"import _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/system/togo-web-test/src/components/Login.jsx\";\nimport React, { useRef, useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { Button, Dropdown, Form, FormControl, InputGroup, Spinner } from \"react-bootstrap\";\nimport { GetCountryCode, LoginUser } from \"../APIs/LoginAPIs\";\nimport TogoContainer from \"./TogoContainer\";\nimport locicon from \"../assets/locationn.png\";\nimport { useHistory } from \"react-router-dom\";\nexport default function Login() {\n  var _this = this;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loadingSubmit = _useState2[0],\n      setLoadingSubmit = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      countryCodes = _useState4[0],\n      setCountryCodes = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectedCountryCode = _useState6[0],\n      setSelectedCountryCode = _useState6[1];\n\n  var history = useHistory();\n  var phoneRef = useRef();\n  useEffect(function () {\n    GetCountryCode().then(function (res) {\n      setCountryCodes(res.data.server_response);\n      setSelectedCountryCode(res.data.server_response[0]);\n      localStorage.setItem(\"RegId\", res.data.server_response[0].regId);\n      localStorage.setItem(\"RegPostCode\", res.data.server_response[0].postValue);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(TogoContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"togo-outling\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown, {\n    className: \"rounded-22 bg-white\",\n    onSelect: function onSelect(eve) {\n      setSelectedCountryCode(countryCodes[eve]);\n      localStorage.setItem(\"RegId\", countryCodes[eve].regId);\n      localStorage.setItem(\"RegPostCode\", countryCodes[eve].postValue);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown.Toggle, {\n    variant: \"\",\n    className: \"w-100 text-start d-flex align-items-center shadow-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: locicon,\n    style: {\n      width: \"24px\",\n      height: \"24px\"\n    },\n    className: \"me-1\",\n    alt: \"worldicon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"97%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 25\n    }\n  }, \"\".concat(selectedCountryCode === null || selectedCountryCode === void 0 ? void 0 : selectedCountryCode.regName, \" (\").concat(selectedCountryCode === null || selectedCountryCode === void 0 ? void 0 : selectedCountryCode.postValue, \")\"))), /*#__PURE__*/React.createElement(Dropdown.Menu, {\n    className: \"w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 21\n    }\n  }, countryCodes.map(function (country, index) {\n    return /*#__PURE__*/React.createElement(Dropdown.Item, {\n      eventKey: index,\n      key: index,\n      className: \"d-flex\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 33\n      }\n    }, \"\".concat(country.regName, \" (\").concat(country.postValue, \")\"));\n  })))), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"formGridEmail\",\n    className: \"m-inline-e-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, \"Enter mobile number\"), /*#__PURE__*/React.createElement(InputGroup, {\n    className: \"mb-2 togo-outling\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    maxLength: 9,\n    onInput: function onInput(ev) {\n      ev.target.value = ev.target.value.replace(/[^0-9]/gi, \"\");\n    },\n    type: \"text\",\n    className: \"bg-white rounded-22\",\n    ref: phoneRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }))), \"Activation code will be sent to your mobileNumber\", /*#__PURE__*/React.createElement(Button, {\n    variant: \"\",\n    className: \"togo-button w-75 rounded-22\",\n    disabled: loadingSubmit,\n    onClick: function onClick() {\n      var phoneNumber = phoneRef.current.value;\n\n      if (phoneNumber.length === 9) {\n        setLoadingSubmit(true);\n        LoginUser(localStorage.getItem(\"RegPostCode\") + phoneRef.current.value).then(function (res) {\n          console.log(res);\n          localStorage.setItem(\"PhoneNumber\", phoneNumber);\n          setLoadingSubmit(false);\n          history.push(\"/activate\");\n        });\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, loadingSubmit && /*#__PURE__*/React.createElement(Spinner, {\n    animation: \"border\",\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 35\n    }\n  }), \"Send\"));\n}","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/Login.jsx"],"names":["React","useRef","useState","useEffect","Button","Dropdown","Form","FormControl","InputGroup","Spinner","GetCountryCode","LoginUser","TogoContainer","locicon","useHistory","Login","loadingSubmit","setLoadingSubmit","countryCodes","setCountryCodes","selectedCountryCode","setSelectedCountryCode","history","phoneRef","then","res","data","server_response","localStorage","setItem","regId","postValue","eve","width","height","regName","map","country","index","ev","target","value","replace","phoneNumber","current","length","getItem","console","log","push"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\"\r\nimport { useEffect } from \"react\";\r\nimport { Button, Dropdown, Form, FormControl, InputGroup, Spinner } from \"react-bootstrap\";\r\nimport { GetCountryCode, LoginUser } from \"../APIs/LoginAPIs\";\r\nimport TogoContainer from \"./TogoContainer\";\r\nimport locicon from \"../assets/locationn.png\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function Login(){\r\n    const [loadingSubmit, setLoadingSubmit] = useState(false);\r\n    const [countryCodes, setCountryCodes] = useState([]);\r\n    const [selectedCountryCode, setSelectedCountryCode] = useState();\r\n    const history = useHistory();\r\n    const phoneRef = useRef();\r\n    \r\n    useEffect(()=>{\r\n        GetCountryCode().then((res)=>{\r\n            setCountryCodes(res.data.server_response);\r\n            setSelectedCountryCode(res.data.server_response[0]);\r\n            localStorage.setItem(\"RegId\", res.data.server_response[0].regId);\r\n            localStorage.setItem(\"RegPostCode\", res.data.server_response[0].postValue);\r\n        });\r\n    }, []);\r\n    \r\n    return (\r\n        <TogoContainer>\r\n            <div className=\"togo-outling\">\r\n                <Dropdown \r\n                    className=\"rounded-22 bg-white\" \r\n                    onSelect={(eve)=>{\r\n                        setSelectedCountryCode(countryCodes[eve]);\r\n                        localStorage.setItem(\"RegId\", countryCodes[eve].regId);\r\n                        localStorage.setItem(\"RegPostCode\", countryCodes[eve].postValue);\r\n                    }}\r\n                >\r\n                    <Dropdown.Toggle variant=\"\" className=\"w-100 text-start d-flex align-items-center shadow-none\">\r\n                        <img src={locicon} style={{width: \"24px\", height: \"24px\"}} className=\"me-1\" alt=\"worldicon\" />\r\n                        <div style={{width: \"97%\"}}>    \r\n                            {`${selectedCountryCode?.regName} (${selectedCountryCode?.postValue})`}\r\n                        </div>\r\n                    </Dropdown.Toggle>\r\n\r\n                    <Dropdown.Menu className=\"w-100\">\r\n                        {countryCodes.map((country, index)=>{\r\n                            return (\r\n                                <Dropdown.Item eventKey={index} key={index} className=\"d-flex\">\r\n                                    {`${country.regName} (${country.postValue})`}\r\n                                </Dropdown.Item>\r\n                            )\r\n                        })}\r\n                        \r\n                    </Dropdown.Menu>\r\n                </Dropdown>\r\n            </div>\r\n\r\n            <Form.Group controlId=\"formGridEmail\" className=\"m-inline-e-2\">\r\n                <Form.Label>Enter mobile number</Form.Label>\r\n                <InputGroup className=\"mb-2 togo-outling\">\r\n\r\n                    <FormControl \r\n                        maxLength={9}\r\n                        onInput={(ev)=>{\r\n                            ev.target.value = ev.target.value.replace(/[^0-9]/gi, \"\");\r\n                        }} \r\n                        type=\"text\" \r\n                        className=\"bg-white rounded-22\"\r\n                        ref={phoneRef} \r\n                    />\r\n                    \r\n                </InputGroup>\r\n                \r\n            </Form.Group>\r\n\r\n            Activation code will be sent to your mobileNumber\r\n\r\n            <Button\r\n                variant=\"\" \r\n                className=\"togo-button w-75 rounded-22\" \r\n                disabled={loadingSubmit}\r\n                onClick={()=>{\r\n                    let phoneNumber = phoneRef.current.value;\r\n                    if(phoneNumber.length === 9){\r\n                        setLoadingSubmit(true);\r\n                        LoginUser(localStorage.getItem(\"RegPostCode\") + phoneRef.current.value).then((res)=>{\r\n                            console.log(res);\r\n                            localStorage.setItem(\"PhoneNumber\", phoneNumber);\r\n                            setLoadingSubmit(false);\r\n                            history.push(\"/activate\");\r\n                        })\r\n                    }\r\n                }}\r\n            >\r\n                {loadingSubmit && <Spinner animation=\"border\" size=\"sm\"/>} \r\n                Send\r\n            </Button>\r\n        </TogoContainer>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}