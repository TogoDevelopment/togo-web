{"ast":null,"code":"import _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/system/togo-web-test/src/components/FinancialTransactions/FinancialTransactions.js\";\nimport React, { useEffect, useState } from 'react';\nimport translate from \"../../i18n/translate\";\nimport './FinancialTransactions.css';\nimport { transactionTest, invoicesTest } from '../../APIs/OrdersAPIs';\nimport \"./FinancialTransactions.css\";\nimport { Link } from \"react-router-dom\";\nimport Loader from \"../Loader/Loader\";\nimport { Box } from \"@chakra-ui/layout\";\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport paginationFactory from 'react-bootstrap-table2-paginator';\nimport filterFactory, { textFilter } from 'react-bootstrap-table2-filter';\n\nfunction orderIdFormatter(value) {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, Number(value) ? /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: \"/account/Order/\".concat(value)\n    },\n    className: \"orderLink\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 22\n    }\n  }, value) : value);\n}\n/* time formatter, to convert from 24 hrs system to 12 hrs system */\n\n\nfunction timeFormatter(value) {\n  value = value.split(\" \")[1];\n  var tempStr = value.split(\":\");\n  var time = value;\n  if (tempStr[0].length === 1) time = \"0\".concat(value); // Check correct time format and split into components\n\n  time = time.toString().match(/^([01]\\d|2[0-3])(:)([0-5]\\d)(:[0-5]\\d)?$/) || [time];\n\n  if (time.length > 1) {\n    // If time format correct\n    time = time.slice(1); // Remove full string match value\n\n    time[5] = +time[0] < 12 ? ' AM' : ' PM'; // Set AM/PM\n\n    time[0] = +time[0] % 12 || 12; // Adjust hours\n  }\n\n  return time.join(''); // return adjusted time or original string\n}\n/* return only the date from data-time format */\n\n\nfunction dateFormatter(value) {\n  return value.split(\" \")[0];\n}\n\nexport default function Transactions() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      transactions = _useState2[0],\n      setTransactions = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isEmpty = _useState4[0],\n      setIsEmpty = _useState4[1]; // isEmpty used for showing the loader when there are no data yet\n\n\n  useEffect(function () {\n    var isMounted = true;\n    transactionTest(localStorage.getItem(\"userId\")).then(function (res) {\n      var tempArr = res.data.server_response.data.result.response;\n\n      if (isMounted) {\n        setTransactions(tempArr);\n\n        if (tempArr.length > 0) {\n          setIsEmpty(false);\n        } else {\n          setIsEmpty(true);\n        }\n      }\n    });\n    return function () {\n      isMounted = false;\n    };\n  }, []);\n  /* table columns */\n\n  var columns = [{\n    dataField: 'ref',\n    text: translate(\"TRANSACTIONS.ORDER_ID\"),\n    formatter: orderIdFormatter,\n    filter: textFilter({\n      style: {\n        width: '100px',\n        marginLeft: \"10px\",\n        marginRight: \"10px\"\n      },\n      placeholder: 'ID...'\n    }),\n    style: {\n      width: \"250px\"\n    }\n  }, {\n    dataField: 'move_name',\n    text: translate(\"TRANSACTIONS.NAME\")\n  }, {\n    dataField: 'create_date',\n    text: translate(\"TRANSACTIONS.DATE\"),\n    formatter: dateFormatter\n  }, {\n    dataField: 'create_date',\n    text: translate(\"TRANSACTIONS.TIME\"),\n    formatter: timeFormatter\n  }, {\n    dataField: 'journal_id_name',\n    text: translate(\"TRANSACTIONS.JOURNAL_NAME\")\n  }, {\n    dataField: 'credit',\n    text: translate(\"TRANSACTIONS.IN\"),\n    style: function callback(cell) {\n      return {\n        fontWeight: parseFloat(cell) > 0 ? 'bold' : '',\n        color: parseFloat(cell) === 0 ? 'lightgray' : ''\n      };\n    }\n  }, {\n    dataField: 'debit',\n    text: translate(\"TRANSACTIONS.OUT\"),\n    style: function callback(cell) {\n      return {\n        fontWeight: parseFloat(cell) > 0 ? 'bold' : '',\n        color: parseFloat(cell) === 0 ? 'lightgray' : ''\n      };\n    }\n  }];\n  /* clear the borders for table headers */\n\n  for (var i = 0; i < columns.length; i++) {\n    columns[i].headerStyle = {\n      border: 'none'\n    };\n  }\n\n  if (transactions.length > 0) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pe-4 ps-4 pt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(BootstrapTable, {\n      keyField: \"id\",\n      data: transactions,\n      columns: columns,\n      pagination: paginationFactory(),\n      rowClasses: \"custom-row-class\",\n      columnClasses: \"custom-column-class\",\n      filter: filterFactory(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }\n    }));\n  } else if (!isEmpty) {\n    return /*#__PURE__*/React.createElement(Box, {\n      height: \"400px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(Loader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 32\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-100 d-flex justify-content-center mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 10\n    }\n  }, \"There are no Transactions\");\n}\n;","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/FinancialTransactions/FinancialTransactions.js"],"names":["React","useEffect","useState","translate","transactionTest","invoicesTest","Link","Loader","Box","BootstrapTable","paginationFactory","filterFactory","textFilter","orderIdFormatter","value","Number","pathname","timeFormatter","split","tempStr","time","length","concat","toString","match","slice","join","dateFormatter","Transactions","transactions","setTransactions","isEmpty","setIsEmpty","isMounted","localStorage","getItem","then","res","tempArr","data","server_response","result","response","columns","dataField","text","formatter","filter","style","width","marginLeft","marginRight","placeholder","callback","cell","fontWeight","parseFloat","color","i","headerStyle","border"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport translate from \"../../i18n/translate\";\r\nimport './FinancialTransactions.css';\r\nimport { transactionTest, invoicesTest } from '../../APIs/OrdersAPIs';\r\nimport \"./FinancialTransactions.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Loader from \"../Loader/Loader\";\r\nimport { Box } from \"@chakra-ui/layout\";\r\nimport BootstrapTable from 'react-bootstrap-table-next';\r\nimport paginationFactory from 'react-bootstrap-table2-paginator';\r\nimport filterFactory, { textFilter } from 'react-bootstrap-table2-filter';\r\n\r\nfunction orderIdFormatter(value) {\r\n  return <>\r\n    {Number(value) ? <Link\r\n      to={{\r\n        pathname: `/account/Order/${value}`,\r\n      }}\r\n      className=\"orderLink\"\r\n    >\r\n      {value}\r\n    </Link> : value}\r\n  </>\r\n}\r\n\r\n/* time formatter, to convert from 24 hrs system to 12 hrs system */\r\nfunction timeFormatter(value) {\r\n  value = value.split(\" \")[1]\r\n\r\n  const tempStr = value.split(\":\");\r\n  let time = value;\r\n  if (tempStr[0].length === 1)\r\n    time = \"0\".concat(value);\r\n\r\n  // Check correct time format and split into components\r\n  time = time.toString().match(/^([01]\\d|2[0-3])(:)([0-5]\\d)(:[0-5]\\d)?$/) || [time];\r\n\r\n  if (time.length > 1) { // If time format correct\r\n    time = time.slice(1);  // Remove full string match value\r\n    time[5] = +time[0] < 12 ? ' AM' : ' PM'; // Set AM/PM\r\n    time[0] = +time[0] % 12 || 12; // Adjust hours\r\n  }\r\n  return time.join(''); // return adjusted time or original string\r\n}\r\n\r\n/* return only the date from data-time format */\r\nfunction dateFormatter(value) {\r\n  return value.split(\" \")[0]\r\n}\r\n\r\nexport default function Transactions() {\r\n\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [isEmpty, setIsEmpty] = useState(false); // isEmpty used for showing the loader when there are no data yet\r\n\r\n  useEffect(() => {\r\n\r\n    let isMounted = true;\r\n    transactionTest(localStorage.getItem(\"userId\")).then(res => {\r\n\r\n      const tempArr = res.data.server_response.data.result.response;\r\n\r\n      if (isMounted) {\r\n        setTransactions(tempArr);\r\n\r\n\r\n        if (tempArr.length > 0) {\r\n          setIsEmpty(false)\r\n        } else {\r\n          setIsEmpty(true)\r\n        }\r\n      }\r\n    })\r\n    return () => { isMounted = false };\r\n  }, []);\r\n\r\n  /* table columns */\r\n  const columns = [\r\n    {\r\n      dataField: 'ref',\r\n      text: translate(\"TRANSACTIONS.ORDER_ID\"),\r\n      formatter: orderIdFormatter,\r\n      filter: textFilter({ style: { width: '100px', marginLeft: \"10px\", marginRight: \"10px\" }, placeholder: 'ID...' }),\r\n      style: { width: \"250px\" }\r\n    },\r\n    {\r\n      dataField: 'move_name',\r\n      text: translate(\"TRANSACTIONS.NAME\")\r\n    },\r\n    {\r\n      dataField: 'create_date',\r\n      text: translate(\"TRANSACTIONS.DATE\"),\r\n      formatter: dateFormatter\r\n    },\r\n    {\r\n      dataField: 'create_date',\r\n      text: translate(\"TRANSACTIONS.TIME\"),\r\n      formatter: timeFormatter\r\n    },\r\n    {\r\n      dataField: 'journal_id_name',\r\n      text: translate(\"TRANSACTIONS.JOURNAL_NAME\")\r\n    },\r\n    {\r\n      dataField: 'credit',\r\n      text: translate(\"TRANSACTIONS.IN\"),\r\n      style: function callback(cell) { return { fontWeight: parseFloat(cell) > 0 ? 'bold' : '', color: parseFloat(cell) === 0 ? 'lightgray' : '' } }\r\n    },\r\n    {\r\n      dataField: 'debit',\r\n      text: translate(\"TRANSACTIONS.OUT\"),\r\n      style: function callback(cell) { return { fontWeight: parseFloat(cell) > 0 ? 'bold' : '', color: parseFloat(cell) === 0 ? 'lightgray' : '' } }\r\n    }\r\n  ];\r\n\r\n  /* clear the borders for table headers */\r\n  for (let i = 0; i < columns.length; i++) {\r\n    columns[i].headerStyle = { border: 'none' }\r\n  }\r\n\r\n  if (transactions.length > 0) {\r\n    return (\r\n      <div className=\"pe-4 ps-4 pt-2\">\r\n\r\n        <BootstrapTable\r\n          keyField='id'\r\n          data={transactions}\r\n          columns={columns}\r\n          pagination={paginationFactory()}\r\n          rowClasses={\"custom-row-class\"}\r\n          columnClasses={\"custom-column-class\"}\r\n          filter={filterFactory()}\r\n        />\r\n\r\n      </div>\r\n    );\r\n  } else if (!isEmpty) {\r\n    return <Box height=\"400px\"><Loader /></Box>\r\n  }\r\n\r\n  return <div className=\"w-100 d-flex justify-content-center mt-5\">There are no Transactions</div>\r\n\r\n};\r\n"]},"metadata":{},"sourceType":"module"}