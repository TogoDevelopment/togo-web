{"ast":null,"code":"import { contains, focus, getAllFocusable, isRefObject } from \"@chakra-ui/utils\";\nimport { useCallback } from \"react\";\nimport { useEventListener } from \"./use-event-listener\";\nimport { useUpdateEffect } from \"./use-update-effect\";\nvar defaultOptions = {\n  preventScroll: true,\n  shouldFocus: false\n};\nexport function useFocusOnShow(target, options) {\n  if (options === void 0) {\n    options = defaultOptions;\n  }\n  var _options = options,\n    focusRef = _options.focusRef,\n    preventScroll = _options.preventScroll,\n    shouldFocus = _options.shouldFocus,\n    visible = _options.visible;\n  var element = isRefObject(target) ? target.current : target;\n  var autoFocus = shouldFocus && visible;\n  var onFocus = useCallback(function () {\n    if (!element || !autoFocus) return;\n    if (contains(element, document.activeElement)) return;\n    if (focusRef != null && focusRef.current) {\n      focus(focusRef.current, {\n        preventScroll: preventScroll,\n        nextTick: true\n      });\n    } else {\n      var tabbableEls = getAllFocusable(element);\n      if (tabbableEls.length > 0) {\n        focus(tabbableEls[0], {\n          preventScroll: preventScroll,\n          nextTick: true\n        });\n      }\n    }\n  }, [autoFocus, preventScroll, element, focusRef]);\n  useUpdateEffect(function () {\n    onFocus();\n  }, [onFocus]);\n  useEventListener(\"transitionend\", onFocus, element);\n}","map":{"version":3,"names":["contains","focus","getAllFocusable","isRefObject","useCallback","useEventListener","useUpdateEffect","defaultOptions","preventScroll","shouldFocus","useFocusOnShow","target","options","_options","focusRef","visible","element","current","autoFocus","onFocus","document","activeElement","nextTick","tabbableEls","length"],"sources":["../../src/use-focus-on-show.ts"],"sourcesContent":["import {\n  contains,\n  focus,\n  FocusableElement,\n  getAllFocusable,\n  isRefObject,\n} from \"@chakra-ui/utils\"\nimport React, { useCallback } from \"react\"\nimport { useEventListener } from \"./use-event-listener\"\nimport { useUpdateEffect } from \"./use-update-effect\"\n\nexport interface UseFocusOnShowOptions {\n  visible?: boolean\n  shouldFocus?: boolean\n  preventScroll?: boolean\n  focusRef?: React.RefObject<FocusableElement>\n}\n\nconst defaultOptions: UseFocusOnShowOptions = {\n  preventScroll: true,\n  shouldFocus: false,\n}\n\nexport function useFocusOnShow<T extends HTMLElement>(\n  target: React.RefObject<T> | T,\n  options = defaultOptions,\n) {\n  const { focusRef, preventScroll, shouldFocus, visible } = options\n  const element = isRefObject(target) ? target.current : target\n\n  const autoFocus = shouldFocus && visible\n\n  const onFocus = useCallback(() => {\n    if (!element || !autoFocus) return\n\n    if (contains(element, document.activeElement as HTMLElement)) return\n\n    if (focusRef?.current) {\n      focus(focusRef.current, { preventScroll, nextTick: true })\n    } else {\n      const tabbableEls = getAllFocusable(element)\n      if (tabbableEls.length > 0) {\n        focus(tabbableEls[0], { preventScroll, nextTick: true })\n      }\n    }\n  }, [autoFocus, preventScroll, element, focusRef])\n\n  useUpdateEffect(() => {\n    onFocus()\n  }, [onFocus])\n\n  useEventListener(\"transitionend\", onFocus, element)\n}\n"],"mappings":"AAAA,SACEA,QADF,EAEEC,KAFF,EAIEC,eAJF,EAKEC,WALF,QAMO,kBANP;AAOA,SAAgBC,WAAhB,QAAmC,OAAnC;AACA,SAASC,gBAAT,QAAiC,sBAAjC;AACA,SAASC,eAAT,QAAgC,qBAAhC;AASA,IAAMC,cAAqC,GAAG;EAC5CC,aAAa,EAAE,IAD6B;EAE5CC,WAAW,EAAE;AAF+B,CAA9C;AAKA,OAAO,SAASC,cAATA,CACLC,MADK,EAELC,OAFK,EAGL;EAAA,IADAA,OACA;IADAA,OACA,GADUL,cACV;EAAA;EACA,IAAAM,QAAA,GAA0DD,OAA1D;IAAQE,QAAF,GAAAD,QAAA,CAAEC,QAAF;IAAYN,aAAZ,GAAAK,QAAA,CAAYL,aAAZ;IAA2BC,WAA3B,GAAAI,QAAA,CAA2BJ,WAA3B;IAAwCM,OAAA,GAAAF,QAAA,CAAAE,OAAA;EAC9C,IAAMC,OAAO,GAAGb,WAAW,CAACQ,MAAD,CAAX,GAAsBA,MAAM,CAACM,OAA7B,GAAuCN,MAAvD;EAEA,IAAMO,SAAS,GAAGT,WAAW,IAAIM,OAAjC;EAEA,IAAMI,OAAO,GAAGf,WAAW,CAAC,YAAM;IAChC,IAAI,CAACY,OAAD,IAAY,CAACE,SAAjB,EAA4B;IAE5B,IAAIlB,QAAQ,CAACgB,OAAD,EAAUI,QAAQ,CAACC,aAAnB,CAAZ,EAA8D;IAE9D,IAAIP,QAAJ,YAAIA,QAAQ,CAAEG,OAAd,EAAuB;MACrBhB,KAAK,CAACa,QAAQ,CAACG,OAAV,EAAmB;QAAET,aAAF,EAAEA,aAAF;QAAiBc,QAAQ,EAAE;MAA3B,CAAnB,CAAL;IACD,CAFD,MAEO;MACL,IAAMC,WAAW,GAAGrB,eAAe,CAACc,OAAD,CAAnC;MACA,IAAIO,WAAW,CAACC,MAAZ,GAAqB,CAAzB,EAA4B;QAC1BvB,KAAK,CAACsB,WAAW,CAAC,CAAD,CAAZ,EAAiB;UAAEf,aAAF,EAAEA,aAAF;UAAiBc,QAAQ,EAAE;QAA3B,CAAjB,CAAL;MACD;IACF;EACF,CAb0B,EAaxB,CAACJ,SAAD,EAAYV,aAAZ,EAA2BQ,OAA3B,EAAoCF,QAApC,CAbwB,CAA3B;EAeAR,eAAe,CAAC,YAAM;IACpBa,OAAO;EACR,CAFc,EAEZ,CAACA,OAAD,CAFY,CAAf;EAIAd,gBAAgB,CAAC,eAAD,EAAkBc,OAAlB,EAA2BH,OAA3B,CAAhB;AACD"},"metadata":{},"sourceType":"module"}