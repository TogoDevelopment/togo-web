{"ast":null,"code":"import _regeneratorRuntime from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{apiUrl}from\"../Constants/GeneralCont\";import{ACCOUNT_DETAILS_CLEAN_UP,SET_BUSINESS_LOCATIONS,SET_PERSONAL_INFO,SET_VEHICLE_INFO,SET_WORKING_TIME}from\"./ActionsTypes\";import{convert12TimeTo24,isTransporter}from\"../Util\";import{toastMessage}from\"./GeneralActions\";import{updateTransporterBusniessLocationAPI}from\"../APIs/ProfileAPIs\";import{getUserCreditialParams}from\"../APIs/AuthenticationAPIs\";var axios=require(\"axios\");export var getPersonalInfo=function getPersonalInfo(callback){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var params;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:params=getUserCreditialParams();params.append(\"CheckTypeFunction\",isTransporter()?\"TransporterProfileViewPersonalinfo\":\"ClientProfileViewPersonalInfo\");return _context.abrupt(\"return\",axios.post(apiUrl,params).then(function(_ref2){var data=_ref2.data;var resp=isTransporter()?data.PersonalInfo[0]:data.server_response[0];callback&&callback(resp);dispatch({type:SET_PERSONAL_INFO,personalInfo:resp});}).catch(function(err){console.log(err);}));case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getVehicleInfo=function getVehicleInfo(callback){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var params;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:params=getUserCreditialParams();params.append(\"CheckTypeFunction\",\"GetCarInfo\");return _context2.abrupt(\"return\",axios.post(apiUrl,params).then(function(_ref4){var server_response=_ref4.data.server_response;callback&&callback(server_response);dispatch({type:SET_VEHICLE_INFO,vehicleInfo:server_response[0]});}).catch(function(err){console.log(err);}));case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}();};export var getBusinessLocation=function getBusinessLocation(callback,errCallBack){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var params;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:params=getUserCreditialParams();params.append(\"CheckTypeFunction\",isTransporter()?\"TransporterProfileViewCityinfo\":\"ClientProfileGetDataTypeWork\");return _context3.abrupt(\"return\",axios.post(apiUrl,params).then(function(_ref6){var data=_ref6.data;var resp=isTransporter()?data.CityResponse:data.server_response[0];callback&&callback(resp);dispatch({type:SET_BUSINESS_LOCATIONS,businessLocations:resp});}).catch(function(err){errCallBack&&errCallBack(err);dispatch(toastMessage(err));console.log(err);}));case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref5.apply(this,arguments);};}();};export var getWorkingTime=function getWorkingTime(callback){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var params;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:params=getUserCreditialParams();params.append(\"CheckTypeFunction\",\"TransporterProfileViewTimeinfo\");return _context4.abrupt(\"return\",axios.post(apiUrl,params).then(function(_ref8){var TimeResponse=_ref8.data.TimeResponse;callback&&callback(TimeResponse);dispatch({type:SET_WORKING_TIME,workingTime:TimeResponse[0]});}).catch(function(err){console.log(err);}));case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref7.apply(this,arguments);};}();};export var updateWorkingTime=function updateWorkingTime(workingTime){return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var params,workingTimeObj;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:params=getUserCreditialParams();params.append(\"CheckTypeFunction\",\"UpdateWorkTranspoterParameter\");workingTimeObj=[{}];//add 2018-10-23 to each time\nworkingTime.forEach(function(_ref10){var id=_ref10.id,from=_ref10.from,to=_ref10.to;workingTimeObj[0][\"\".concat(id,\"TimeStart\")]=\"2018-10-23 \".concat(convert12TimeTo24(from));workingTimeObj[0][\"\".concat(id,\"TimeFinish\")]=\"2018-10-23 \".concat(convert12TimeTo24(to));});params.append(\"TimeWork\",JSON.stringify({TransportrTime:workingTimeObj}));return _context5.abrupt(\"return\",axios.post(apiUrl,params).then(function(_ref11){var data=_ref11.data;if(data===\"WorkTimeUpdated\"){dispatch(toastMessage(\"Working time is successfully updated\",\"Successfully Updated\",\"success\"));dispatch(getWorkingTime());}else{dispatch(toastMessage(\"Error while updating working time\"));console.log(data);}}).catch(function(err){console.log(err);}));case 6:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref9.apply(this,arguments);};}();};export var accountDetailsCleanUp=function accountDetailsCleanUp(){return/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:dispatch({type:ACCOUNT_DETAILS_CLEAN_UP});case 1:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x6){return _ref12.apply(this,arguments);};}();};export var updateTransporterBusniessLocation=function updateTransporterBusniessLocation(id,action){return/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:updateTransporterBusniessLocationAPI(id,action).then(function(_ref14){var data=_ref14.data;if(data===\"AddeddSucessfully\"||data===\"UpdatedAddSucessfully\"||data===\"UpdatedRemoveSucessfully\"){dispatch(getBusinessLocation());dispatch(toastMessage(\"Business Location Updated Successfully\",\"Updated Successfully\",\"success\"));}else{dispatch(toastMessage(\"Error Update Business Location\"));}}).catch(function(err){dispatch(toastMessage(err,\"Error Update Business Location\"));});case 1:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x7){return _ref13.apply(this,arguments);};}();};","map":null,"metadata":{},"sourceType":"module"}