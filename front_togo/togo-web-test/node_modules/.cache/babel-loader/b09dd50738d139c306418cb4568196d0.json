{"ast":null,"code":"function getResponse(xhr) {\n  var text = xhr.responseText || xhr.response;\n  if (!text) {\n    return text;\n  }\n  try {\n    return JSON.parse(text);\n  } catch (e) {\n    return text;\n  }\n}\nexport default function ajaxUpload(options) {\n  var name = options.name,\n    timeout = options.timeout,\n    _options$headers = options.headers,\n    headers = _options$headers === void 0 ? {} : _options$headers,\n    _options$data = options.data,\n    data = _options$data === void 0 ? {} : _options$data,\n    onError = options.onError,\n    onSuccess = options.onSuccess,\n    onProgress = options.onProgress,\n    file = options.file,\n    url = options.url,\n    withCredentials = options.withCredentials,\n    disableMultipart = options.disableMultipart;\n  var xhr = new XMLHttpRequest();\n  var sendableData = null;\n  xhr.open('POST', url, true);\n  if (!disableMultipart) {\n    sendableData = new FormData();\n    sendableData.append(name, file, file.name);\n    Object.keys(data).forEach(function (key) {\n      return sendableData.append(key, data[key]);\n    });\n  } else {\n    sendableData = file;\n  }\n  Object.keys(headers).forEach(function (key) {\n    if (headers[key] !== null) {\n      xhr.setRequestHeader(key, headers[key]);\n    }\n  });\n  if (headers['X-Requested-With'] !== null) {\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  }\n  if (timeout) {\n    xhr.timeout = timeout;\n    xhr.ontimeout = function (event) {\n      onError === null || onError === void 0 ? void 0 : onError({\n        type: 'timeout'\n      }, event, xhr);\n    };\n  }\n  if (withCredentials && 'withCredentials' in xhr) {\n    xhr.withCredentials = true;\n  }\n  xhr.onload = function (event) {\n    var resp = getResponse(xhr);\n    if (xhr.status < 200 || xhr.status >= 300) {\n      onError === null || onError === void 0 ? void 0 : onError({\n        type: 'server_error',\n        response: resp\n      }, event, xhr);\n      return;\n    }\n    onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess(resp, event, xhr);\n  };\n  if (xhr.upload) {\n    xhr.upload.onprogress = function (event) {\n      var percent = 0;\n      if (event.lengthComputable) {\n        percent = event.loaded / event.total * 100;\n      }\n      onProgress === null || onProgress === void 0 ? void 0 : onProgress(percent, event, xhr);\n    };\n  }\n  xhr.onerror = function (event) {\n    onError === null || onError === void 0 ? void 0 : onError({\n      type: 'xhr_error'\n    }, event, xhr);\n  };\n  xhr.send(sendableData);\n  return {\n    xhr: xhr,\n    data: sendableData\n  };\n}","map":{"version":3,"names":["getResponse","xhr","text","responseText","response","JSON","parse","e","ajaxUpload","options","name","timeout","_options$headers","headers","_options$data","data","onError","onSuccess","onProgress","file","url","withCredentials","disableMultipart","XMLHttpRequest","sendableData","open","FormData","append","Object","keys","forEach","key","setRequestHeader","ontimeout","event","type","onload","resp","status","upload","onprogress","percent","lengthComputable","loaded","total","onerror","send"],"sources":["/home/system/togo-web-test/node_modules/rsuite/esm/utils/ajaxUpload.js"],"sourcesContent":["function getResponse(xhr) {\n  var text = xhr.responseText || xhr.response;\n\n  if (!text) {\n    return text;\n  }\n\n  try {\n    return JSON.parse(text);\n  } catch (e) {\n    return text;\n  }\n}\n\nexport default function ajaxUpload(options) {\n  var name = options.name,\n      timeout = options.timeout,\n      _options$headers = options.headers,\n      headers = _options$headers === void 0 ? {} : _options$headers,\n      _options$data = options.data,\n      data = _options$data === void 0 ? {} : _options$data,\n      onError = options.onError,\n      onSuccess = options.onSuccess,\n      onProgress = options.onProgress,\n      file = options.file,\n      url = options.url,\n      withCredentials = options.withCredentials,\n      disableMultipart = options.disableMultipart;\n  var xhr = new XMLHttpRequest();\n  var sendableData = null;\n  xhr.open('POST', url, true);\n\n  if (!disableMultipart) {\n    sendableData = new FormData();\n    sendableData.append(name, file, file.name);\n    Object.keys(data).forEach(function (key) {\n      return sendableData.append(key, data[key]);\n    });\n  } else {\n    sendableData = file;\n  }\n\n  Object.keys(headers).forEach(function (key) {\n    if (headers[key] !== null) {\n      xhr.setRequestHeader(key, headers[key]);\n    }\n  });\n\n  if (headers['X-Requested-With'] !== null) {\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  }\n\n  if (timeout) {\n    xhr.timeout = timeout;\n\n    xhr.ontimeout = function (event) {\n      onError === null || onError === void 0 ? void 0 : onError({\n        type: 'timeout'\n      }, event, xhr);\n    };\n  }\n\n  if (withCredentials && 'withCredentials' in xhr) {\n    xhr.withCredentials = true;\n  }\n\n  xhr.onload = function (event) {\n    var resp = getResponse(xhr);\n\n    if (xhr.status < 200 || xhr.status >= 300) {\n      onError === null || onError === void 0 ? void 0 : onError({\n        type: 'server_error',\n        response: resp\n      }, event, xhr);\n      return;\n    }\n\n    onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess(resp, event, xhr);\n  };\n\n  if (xhr.upload) {\n    xhr.upload.onprogress = function (event) {\n      var percent = 0;\n\n      if (event.lengthComputable) {\n        percent = event.loaded / event.total * 100;\n      }\n\n      onProgress === null || onProgress === void 0 ? void 0 : onProgress(percent, event, xhr);\n    };\n  }\n\n  xhr.onerror = function (event) {\n    onError === null || onError === void 0 ? void 0 : onError({\n      type: 'xhr_error'\n    }, event, xhr);\n  };\n\n  xhr.send(sendableData);\n  return {\n    xhr: xhr,\n    data: sendableData\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}