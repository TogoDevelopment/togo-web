{"ast":null,"code":"import _slicedToArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef}from\"react\";import{useState}from\"react\";import{Button,Dropdown,Form,FormControl,InputGroup,Spinner}from\"react-bootstrap\";import{useHistory}from\"react-router-dom\";import{GetTypeBusiness,SetBusinessInfo}from\"./APIs/LoginAPIs\";export default function BusinessInfoForm(){var BNameRef=useRef();var BLocRef=useRef();var imgRef=useRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),types=_useState2[0],setTypes=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loadingSubmit=_useState4[0],setLoadingSubmit=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),selectedType=_useState6[0],setSelectedType=_useState6[1];var history=useHistory();function onFileChange(event){console.log(imgRef.current);var reader=new FileReader();reader.onload=function(e){imgRef.current.src=e.target.result;};if(event.currentTarget.files[0]){reader.readAsDataURL(event.currentTarget.files[0]);}}useEffect(function(){GetTypeBusiness().then(function(res){setTypes(res.data.server_response);setSelectedType(res.data.server_response[0]);});},[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\" mainbg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"h1 p-3 text-center togo-button\"},\"Create account /client\"),/*#__PURE__*/React.createElement(\"div\",{className:\"m-auto w-75\"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-center togo-border h4\"},\"Business information\"),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formGridEmail\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Business name\"),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{type:\"text\",className:\"bg-white rounded-22\",ref:BNameRef}))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formGridEmail\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Business location\"),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{type:\"text\",className:\"bg-white rounded-22\",ref:BLocRef}))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formGridEmail\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Business type\"),/*#__PURE__*/React.createElement(\"div\",{className:\"togo-outling mb-2\"},/*#__PURE__*/React.createElement(Dropdown,{className:\"rounded-22 bg-white\",onSelect:function onSelect(eve){setSelectedType(types[eve]);}},/*#__PURE__*/React.createElement(Dropdown.Toggle,{variant:\"\",className:\"w-100 text-start d-flex align-items-center shadow-none\"},/*#__PURE__*/React.createElement(\"div\",{style:{width:\"97%\"}},selectedType===null||selectedType===void 0?void 0:selectedType.Name)),/*#__PURE__*/React.createElement(Dropdown.Menu,{className:\"w-100\"},types.map(function(type,index){return/*#__PURE__*/React.createElement(Dropdown.Item,{eventKey:index,key:index,className:\"d-flex\"},\"\".concat(type.Name));})))),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{type:\"file\",className:\"bg-white rounded-22\",accept:\"image/*\",onChange:onFileChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2\",style:{maxHeight:\"150px\"}},/*#__PURE__*/React.createElement(\"img\",{ref:imgRef,className:\"border border-2\",style:{height:\"150px\",margin:\"auto\",padding:\"2px\"}})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{variant:\"\",className:\"d-block m-auto rounded-22 togo-button w-25\",disabled:loadingSubmit,onClick:function onClick(){var dataUri=imgRef.current.src;var base64=dataUri.substr(dataUri.indexOf(\",\")+1);setLoadingSubmit(true);SetBusinessInfo(BNameRef.current.value,BLocRef.current.value,selectedType.id,base64).then(function(res){setLoadingSubmit(false);history.push(\"/dashboard\");});}},loadingSubmit&&/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",size:\"sm\"}),\"Send\"),/*#__PURE__*/React.createElement(Button,{variant:\"\",className:\"d-block m-auto rounded-22 togo-button w-25\",onClick:function onClick(){history.push(\"/business-info\");}},\"Skip\")))));}","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/BusinessInfoForm.jsx"],"names":["React","useEffect","useRef","useState","Button","Dropdown","Form","FormControl","InputGroup","Spinner","useHistory","GetTypeBusiness","SetBusinessInfo","BusinessInfoForm","BNameRef","BLocRef","imgRef","types","setTypes","loadingSubmit","setLoadingSubmit","selectedType","setSelectedType","history","onFileChange","event","console","log","current","reader","FileReader","onload","e","src","target","result","currentTarget","files","readAsDataURL","then","res","data","server_response","eve","width","Name","map","type","index","maxHeight","height","margin","padding","dataUri","base64","substr","indexOf","value","id","push"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { Button, Dropdown, Form, FormControl, InputGroup, Spinner } from \"react-bootstrap\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { GetTypeBusiness, SetBusinessInfo } from \"./APIs/LoginAPIs\";\r\n\r\nexport default function BusinessInfoForm(){\r\n    const BNameRef = useRef();\r\n    const BLocRef = useRef();\r\n    const imgRef = useRef();\r\n    const [types, setTypes] = useState([]);\r\n    const [loadingSubmit, setLoadingSubmit] = useState(false);\r\n    const [selectedType, setSelectedType] = useState();\r\n    const history = useHistory();\r\n    function onFileChange(event){\r\n        console.log(imgRef.current)\r\n        let reader = new FileReader();\r\n\r\n        reader.onload = function (e) {\r\n            imgRef.current.src = e.target.result\r\n        }\r\n        if(event.currentTarget.files[0]){\r\n            reader.readAsDataURL(event.currentTarget.files[0]);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        GetTypeBusiness().then((res) => {\r\n            setTypes(res.data.server_response);\r\n            setSelectedType(res.data.server_response[0]);\r\n        })\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <div className=\" mainbg\">\r\n                <div className=\"h1 p-3 text-center togo-button\">\r\n                    Create account /client\r\n                </div>\r\n                <div className=\"m-auto w-75\">\r\n                    <p className=\"text-center togo-border h4\">Business information</p>\r\n                    <Form.Group controlId=\"formGridEmail\" className=\"m-inline-e-2\">\r\n                        <Form.Label>Business name</Form.Label>\r\n                        <InputGroup className=\"mb-2 togo-outling\">\r\n                            <FormControl\r\n                                type=\"text\"\r\n                                className=\"bg-white rounded-22\"\r\n                                ref={BNameRef}\r\n                            />\r\n                        </InputGroup>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formGridEmail\" className=\"m-inline-e-2\">\r\n                        <Form.Label>Business location</Form.Label>\r\n                        <InputGroup className=\"mb-2 togo-outling\">\r\n                            <FormControl\r\n                                type=\"text\"\r\n                                className=\"bg-white rounded-22\"\r\n                                ref={BLocRef}\r\n                            />\r\n                        </InputGroup>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formGridEmail\" className=\"m-inline-e-2\">\r\n                        <Form.Label>Business type</Form.Label>\r\n                        <div className=\"togo-outling mb-2\">\r\n                            <Dropdown\r\n                                className=\"rounded-22 bg-white\"\r\n                                onSelect={(eve)=>{\r\n                                    setSelectedType(types[eve])\r\n                                }}\r\n                            >\r\n                                <Dropdown.Toggle variant=\"\" className=\"w-100 text-start d-flex align-items-center shadow-none\">\r\n                                    <div style={{width: \"97%\"}}>\r\n                                        {selectedType?.Name}\r\n                                    </div>\r\n                                </Dropdown.Toggle>\r\n\r\n                                <Dropdown.Menu className=\"w-100\">\r\n                                    {types.map((type, index) => {\r\n                                        return (\r\n                                            <Dropdown.Item eventKey={index} key={index} className=\"d-flex\">\r\n                                                {`${type.Name}`}\r\n                                            </Dropdown.Item>\r\n                                        )\r\n                                    })}\r\n\r\n                                </Dropdown.Menu>\r\n                            </Dropdown>\r\n                        </div>\r\n\r\n                        <InputGroup className=\"mb-2 togo-outling\">\r\n                            <FormControl\r\n                                type=\"file\"\r\n                                className=\"bg-white rounded-22\"\r\n                                accept=\"image/*\"\r\n                                onChange={onFileChange}\r\n                            />\r\n\r\n                        </InputGroup>\r\n                    </Form.Group>\r\n                    <div className=\"mb-2\" style={{maxHeight: \"150px\"}}>\r\n                        <img ref={imgRef} className=\"border border-2\" style={{height: \"150px\",margin: \"auto\",padding: \"2px\"}} />\r\n                    </div>\r\n                    <div>\r\n                        <Button\r\n                            variant=\"\"\r\n                            className=\"d-block m-auto rounded-22 togo-button w-25\"\r\n                            disabled={loadingSubmit}\r\n                            onClick={()=>{\r\n                                let dataUri = imgRef.current.src;\r\n                                let base64 = dataUri.substr(dataUri.indexOf(\",\") + 1);\r\n                                setLoadingSubmit(true);\r\n                                SetBusinessInfo(\r\n                                    BNameRef.current.value,\r\n                                    BLocRef.current.value,\r\n                                    selectedType.id,\r\n                                    base64\r\n                                ).then((res) => {\r\n                                    setLoadingSubmit(false);\r\n                                    history.push(\"/dashboard\");\r\n                                });\r\n                            }}\r\n                        >\r\n                            {loadingSubmit && <Spinner animation=\"border\" size=\"sm\"/>}\r\n                            Send\r\n                        </Button>\r\n                        <Button\r\n                            variant=\"\"\r\n                            className=\"d-block m-auto rounded-22 togo-button w-25\"\r\n                            onClick={()=>{\r\n                                history.push(\"/business-info\")\r\n                            }}\r\n                        >\r\n                            Skip\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}