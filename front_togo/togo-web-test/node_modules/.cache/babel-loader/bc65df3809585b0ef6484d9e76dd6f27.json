{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useImperativeHandle, useCallback } from 'react';\nimport kebabCase from 'lodash/kebabCase';\nimport trim from 'lodash/trim';\nimport isFunction from 'lodash/isFunction';\nimport isUndefined from 'lodash/isUndefined';\nimport omit from 'lodash/omit';\nimport find from 'lodash/find';\nimport { findNodeOfTree, filterNodesOfTree } from '../utils/treeUtils';\nimport { KEY_VALUES, useClassNames, shallowEqual, reactToString, placementPolyfill } from '../utils';\nvar defaultNodeKeys = {\n  valueKey: 'value',\n  childrenKey: 'children'\n};\nexport function createConcatChildrenFunction(node, nodeValue, nodeKeys) {\n  if (nodeKeys === void 0) {\n    nodeKeys = defaultNodeKeys;\n  }\n  var _nodeKeys = nodeKeys,\n    valueKey = _nodeKeys.valueKey,\n    childrenKey = _nodeKeys.childrenKey;\n  return function (data, children) {\n    if (nodeValue) {\n      node = findNodeOfTree(data, function (item) {\n        return nodeValue === item[valueKey];\n      });\n    }\n    node[childrenKey] = children;\n    return data.concat([]);\n  };\n}\nexport function shouldDisplay(label, searchKeyword) {\n  if (!trim(searchKeyword)) {\n    return true;\n  }\n  var keyword = searchKeyword.toLocaleLowerCase();\n  if (typeof label === 'string' || typeof label === 'number') {\n    return (\"\" + label).toLocaleLowerCase().indexOf(keyword) >= 0;\n  } else if ( /*#__PURE__*/React.isValidElement(label)) {\n    var nodes = reactToString(label);\n    return nodes.join('').toLocaleLowerCase().indexOf(keyword) >= 0;\n  }\n  return false;\n}\n\n/**\n * The className of the assembled Toggle is on the Picker.\n */\nexport function usePickerClassName(props) {\n  var _withClassPrefix;\n  var name = props.name,\n    classPrefix = props.classPrefix,\n    className = props.className,\n    placement = props.placement,\n    appearance = props.appearance,\n    cleanable = props.cleanable,\n    block = props.block,\n    disabled = props.disabled,\n    countable = props.countable,\n    readOnly = props.readOnly,\n    plaintext = props.plaintext,\n    hasValue = props.hasValue,\n    rest = _objectWithoutPropertiesLoose(props, [\"name\", \"classPrefix\", \"className\", \"placement\", \"appearance\", \"cleanable\", \"block\", \"disabled\", \"countable\", \"readOnly\", \"plaintext\", \"hasValue\"]);\n  var _useClassNames = useClassNames(classPrefix),\n    withClassPrefix = _useClassNames.withClassPrefix,\n    merge = _useClassNames.merge;\n  var classes = merge(className, withClassPrefix(name, appearance, 'toggle-wrapper', (_withClassPrefix = {}, _withClassPrefix[\"placement-\" + kebabCase(placementPolyfill(placement))] = placement, _withClassPrefix['read-only'] = readOnly, _withClassPrefix['has-value'] = hasValue, _withClassPrefix.cleanable = hasValue && cleanable, _withClassPrefix.block = block, _withClassPrefix.disabled = disabled, _withClassPrefix.countable = countable, _withClassPrefix.plaintext = plaintext, _withClassPrefix)));\n  var usedClassNamePropKeys = Object.keys(omit(props, [].concat(Object.keys(rest || {}), ['disabled', 'readOnly', 'plaintext'])));\n  return [classes, usedClassNamePropKeys];\n}\n\n/**\n * Handling keyboard events...\n * @param event Keyboard event object\n * @param events Event callback functions\n */\nexport function onMenuKeyDown(event, events) {\n  var down = events.down,\n    up = events.up,\n    enter = events.enter,\n    del = events.del,\n    esc = events.esc,\n    right = events.right,\n    left = events.left;\n  switch (event.key) {\n    // down\n    case KEY_VALUES.DOWN:\n      down === null || down === void 0 ? void 0 : down(event);\n      event.preventDefault();\n      break;\n    // up\n\n    case KEY_VALUES.UP:\n      up === null || up === void 0 ? void 0 : up(event);\n      event.preventDefault();\n      break;\n    // enter\n\n    case KEY_VALUES.ENTER:\n      enter === null || enter === void 0 ? void 0 : enter(event);\n      event.preventDefault();\n      break;\n    // delete\n\n    case KEY_VALUES.BACKSPACE:\n      del === null || del === void 0 ? void 0 : del(event);\n      break;\n    // esc | tab\n\n    case KEY_VALUES.ESC:\n    case KEY_VALUES.TAB:\n      esc === null || esc === void 0 ? void 0 : esc(event);\n      break;\n    // left arrow\n\n    case KEY_VALUES.LEFT:\n      left === null || left === void 0 ? void 0 : left(event);\n      break;\n    // right arrow\n\n    case KEY_VALUES.RIGHT:\n      right === null || right === void 0 ? void 0 : right(event);\n      break;\n    default:\n  }\n}\n\n/**\n * A hook that manages the focus state of the option.\n * @param defaultFocusItemValue\n * @param props\n */\nexport var useFocusItemValue = function useFocusItemValue(defaultFocusItemValue, props) {\n  var _props$valueKey = props.valueKey,\n    valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n    _props$focusableQuery = props.focusableQueryKey,\n    focusableQueryKey = _props$focusableQuery === void 0 ? '[data-key][aria-disabled=\"false\"]' : _props$focusableQuery,\n    _props$defaultLayer = props.defaultLayer,\n    defaultLayer = _props$defaultLayer === void 0 ? 0 : _props$defaultLayer,\n    data = props.data,\n    target = props.target,\n    rtl = props.rtl,\n    callback = props.callback;\n  var _useState = useState(defaultFocusItemValue),\n    focusItemValue = _useState[0],\n    setFocusItemValue = _useState[1];\n  var _useState2 = useState(defaultLayer),\n    layer = _useState2[0],\n    setLayer = _useState2[1];\n  var _useState3 = useState([]),\n    keys = _useState3[0],\n    setKeys = _useState3[1];\n  /**\n   * Get the elements visible in all options.\n   */\n\n  var getFocusableMenuItems = useCallback(function () {\n    if (!target) {\n      return [];\n    }\n    var menu = isFunction(target) ? target() : target;\n    var currentKeys = keys;\n    if (currentKeys.length === 0) {\n      var _Array$from;\n      currentKeys = (_Array$from = Array.from(menu === null || menu === void 0 ? void 0 : menu.querySelectorAll(focusableQueryKey))) === null || _Array$from === void 0 ? void 0 : _Array$from.map(function (item) {\n        var _item$dataset;\n        return item === null || item === void 0 ? void 0 : (_item$dataset = item.dataset) === null || _item$dataset === void 0 ? void 0 : _item$dataset.key;\n      });\n      setKeys(currentKeys);\n    }\n    if (currentKeys.length === 0) {\n      return [];\n    } // 1. It is necessary to traverse the `keys` instead of `data` here to preserve the order of the array.\n    // 2. The values ​​in `keys` are all string, so the corresponding value of `data` should also be converted to string\n\n    return currentKeys.map(function (key) {\n      return find(data, function (i) {\n        return \"\" + i[valueKey] === key;\n      });\n    });\n  }, [data, focusableQueryKey, keys, target, valueKey]);\n  /**\n   * Get the index of the focus item.\n   */\n\n  var findFocusItemIndex = useCallback(function (callback) {\n    var items = getFocusableMenuItems();\n    for (var i = 0; i < items.length; i += 1) {\n      var _items$i;\n      if (shallowEqual(focusItemValue, (_items$i = items[i]) === null || _items$i === void 0 ? void 0 : _items$i[valueKey])) {\n        callback(items, i);\n        return;\n      }\n    }\n    callback(items, -1);\n  }, [focusItemValue, getFocusableMenuItems, valueKey]);\n  var focusNextMenuItem = useCallback(function (event) {\n    findFocusItemIndex(function (items, index) {\n      var nextIndex = index + 2 > items.length ? 0 : index + 1;\n      var focusItem = items[nextIndex];\n      if (!isUndefined(focusItem)) {\n        setFocusItemValue(focusItem[valueKey]);\n        callback === null || callback === void 0 ? void 0 : callback(focusItem[valueKey], event);\n      }\n    });\n  }, [callback, findFocusItemIndex, valueKey]);\n  var focusPrevMenuItem = useCallback(function (event) {\n    findFocusItemIndex(function (items, index) {\n      var nextIndex = index === 0 ? items.length - 1 : index - 1;\n      var focusItem = items[nextIndex];\n      if (!isUndefined(focusItem)) {\n        setFocusItemValue(focusItem[valueKey]);\n        callback === null || callback === void 0 ? void 0 : callback(focusItem[valueKey], event);\n      }\n    });\n  }, [callback, findFocusItemIndex, valueKey]);\n  var getSubMenuKeys = useCallback(function (nextLayer) {\n    var menu = isFunction(target) ? target() : target;\n    var subMenu = menu === null || menu === void 0 ? void 0 : menu.querySelector(\"[data-layer=\\\"\" + nextLayer + \"\\\"]\");\n    if (subMenu) {\n      var _Array$from2;\n      return (_Array$from2 = Array.from(subMenu.querySelectorAll(focusableQueryKey))) === null || _Array$from2 === void 0 ? void 0 : _Array$from2.map(function (item) {\n        var _item$dataset2;\n        return item === null || item === void 0 ? void 0 : (_item$dataset2 = item.dataset) === null || _item$dataset2 === void 0 ? void 0 : _item$dataset2.key;\n      });\n    }\n    return null;\n  }, [focusableQueryKey, target]);\n  var focusNextLevelMenu = useCallback(function (event) {\n    var nextLayer = layer + 1;\n    var nextKeys = getSubMenuKeys(nextLayer);\n    if (nextKeys) {\n      setKeys(nextKeys);\n      setLayer(nextLayer);\n      setFocusItemValue(nextKeys[0]);\n      callback === null || callback === void 0 ? void 0 : callback(nextKeys[0], event);\n    }\n  }, [callback, getSubMenuKeys, layer]);\n  var focusPrevLevelMenu = useCallback(function (event) {\n    var nextLayer = layer - 1;\n    var nextKeys = getSubMenuKeys(nextLayer);\n    if (nextKeys) {\n      var _focusItem$parent;\n      setKeys(nextKeys);\n      setLayer(nextLayer);\n      var focusItem = findNodeOfTree(data, function (item) {\n        return item[valueKey] === focusItemValue;\n      });\n      var parentItemValue = focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent = focusItem.parent) === null || _focusItem$parent === void 0 ? void 0 : _focusItem$parent[valueKey];\n      if (parentItemValue) {\n        setFocusItemValue(parentItemValue);\n        callback === null || callback === void 0 ? void 0 : callback(parentItemValue, event);\n      }\n    }\n  }, [callback, data, focusItemValue, getSubMenuKeys, layer, valueKey]);\n  var handleKeyDown = useCallback(function (event) {\n    var _onMenuKeyDown;\n    onMenuKeyDown(event, (_onMenuKeyDown = {\n      down: focusNextMenuItem,\n      up: focusPrevMenuItem\n    }, _onMenuKeyDown[rtl ? 'left' : 'right'] = focusNextLevelMenu, _onMenuKeyDown[rtl ? 'right' : 'left'] = focusPrevLevelMenu, _onMenuKeyDown));\n  }, [focusNextLevelMenu, focusNextMenuItem, focusPrevLevelMenu, focusPrevMenuItem, rtl]);\n  return {\n    focusItemValue: focusItemValue,\n    setFocusItemValue: setFocusItemValue,\n    layer: layer,\n    setLayer: setLayer,\n    keys: keys,\n    setKeys: setKeys,\n    onKeyDown: handleKeyDown\n  };\n};\n\n/**\n * A hook to control the toggle keyboard operation\n * @param props\n */\nexport var useToggleKeyDownEvent = function useToggleKeyDownEvent(props) {\n  var _props$toggle = props.toggle,\n    toggle = _props$toggle === void 0 ? true : _props$toggle,\n    triggerRef = props.triggerRef,\n    targetRef = props.targetRef,\n    overlayRef = props.overlayRef,\n    searchInputRef = props.searchInputRef,\n    active = props.active,\n    onExit = props.onExit,\n    onOpen = props.onOpen,\n    onClose = props.onClose,\n    onKeyDown = props.onKeyDown,\n    onMenuKeyDown = props.onMenuKeyDown,\n    onMenuPressEnter = props.onMenuPressEnter,\n    onMenuPressBackspace = props.onMenuPressBackspace;\n  var handleClose = useCallback(function () {\n    var _triggerRef$current, _triggerRef$current$c;\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$c = _triggerRef$current.close) === null || _triggerRef$current$c === void 0 ? void 0 : _triggerRef$current$c.call(_triggerRef$current);\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n  }, [onClose, triggerRef]);\n  var handleOpen = useCallback(function () {\n    var _triggerRef$current2, _triggerRef$current2$;\n    (_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : (_triggerRef$current2$ = _triggerRef$current2.open) === null || _triggerRef$current2$ === void 0 ? void 0 : _triggerRef$current2$.call(_triggerRef$current2);\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n  }, [onOpen, triggerRef]);\n  var handleToggleDropdown = useCallback(function () {\n    if (active) {\n      handleClose();\n      return;\n    }\n    handleOpen();\n  }, [active, handleOpen, handleClose]);\n  var onToggle = useCallback(function (event) {\n    if (event.target === (targetRef === null || targetRef === void 0 ? void 0 : targetRef.current)) {\n      // enter\n      if (toggle && event.key === KEY_VALUES.ENTER) {\n        handleToggleDropdown();\n      } // delete\n\n      if (event.key === KEY_VALUES.BACKSPACE) {\n        onExit === null || onExit === void 0 ? void 0 : onExit(event);\n      }\n    }\n    if (event.key === KEY_VALUES.ESC || event.key === KEY_VALUES.TAB) {\n      handleClose();\n    } // Native event callback\n\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(event);\n    if (overlayRef !== null && overlayRef !== void 0 && overlayRef.current) {\n      // The keyboard operation callback on the menu.\n      onMenuKeyDown === null || onMenuKeyDown === void 0 ? void 0 : onMenuKeyDown(event);\n      if (event.key === KEY_VALUES.ENTER) {\n        onMenuPressEnter === null || onMenuPressEnter === void 0 ? void 0 : onMenuPressEnter(event);\n      }\n      if (event.key === KEY_VALUES.BACKSPACE) {\n        onMenuPressBackspace === null || onMenuPressBackspace === void 0 ? void 0 : onMenuPressBackspace(event);\n      } // The search box gets focus when typing characters and numbers.\n\n      if (event.key.length === 1 && /\\w/.test(event.key)) {\n        var _searchInputRef$curre;\n        searchInputRef === null || searchInputRef === void 0 ? void 0 : (_searchInputRef$curre = searchInputRef.current) === null || _searchInputRef$curre === void 0 ? void 0 : _searchInputRef$curre.focus();\n      }\n    }\n  }, [handleClose, handleToggleDropdown, overlayRef, onExit, onKeyDown, onMenuKeyDown, onMenuPressBackspace, onMenuPressEnter, toggle, targetRef, searchInputRef]);\n  return onToggle;\n};\n\n/**\n * A hook that handles search filter options\n * @param props\n */\nexport function useSearch(props) {\n  var labelKey = props.labelKey,\n    data = props.data,\n    searchBy = props.searchBy,\n    callback = props.callback; // Use search keywords to filter options.\n\n  var _useState4 = useState(''),\n    searchKeyword = _useState4[0],\n    setSearchKeyword = _useState4[1];\n  /**\n   * Index of keyword  in `label`\n   * @param {node} label\n   */\n\n  var checkShouldDisplay = useCallback(function (item, keyword) {\n    var label = item === null || item === void 0 ? void 0 : item[labelKey];\n    var _keyword = isUndefined(keyword) ? searchKeyword : keyword;\n    if (typeof searchBy === 'function') {\n      return searchBy(_keyword, label, item);\n    }\n    return shouldDisplay(label, _keyword);\n  }, [labelKey, searchBy, searchKeyword]);\n  var updateFilteredData = useCallback(function (nextData) {\n    setFilteredData(filterNodesOfTree(nextData, function (item) {\n      return checkShouldDisplay(item);\n    }));\n  }, [checkShouldDisplay]);\n  var _useState5 = useState(filterNodesOfTree(data, function (item) {\n      return checkShouldDisplay(item);\n    })),\n    filteredData = _useState5[0],\n    setFilteredData = _useState5[1];\n  var handleSearch = function handleSearch(searchKeyword, event) {\n    var filteredData = filterNodesOfTree(data, function (item) {\n      return checkShouldDisplay(item, searchKeyword);\n    });\n    setFilteredData(filteredData);\n    setSearchKeyword(searchKeyword);\n    callback === null || callback === void 0 ? void 0 : callback(searchKeyword, filteredData, event);\n  };\n  return {\n    searchKeyword: searchKeyword,\n    filteredData: filteredData,\n    updateFilteredData: updateFilteredData,\n    setSearchKeyword: setSearchKeyword,\n    checkShouldDisplay: checkShouldDisplay,\n    handleSearch: handleSearch\n  };\n}\n\n/**\n * A hook of the exposed method of Picker\n *\n * {\n *   root: Element;\n *   overlay: Element;\n *   target?: Element;\n *   updatePosition:() => void;\n *   open:() => void;\n *   close:() => void;\n * }\n * @param ref\n * @param params\n */\nexport function usePublicMethods(ref, _ref, disabled) {\n  var triggerRef = _ref.triggerRef,\n    overlayRef = _ref.overlayRef,\n    targetRef = _ref.targetRef,\n    rootRef = _ref.rootRef;\n  var handleOpen = useCallback(function () {\n    var _triggerRef$current3;\n    (_triggerRef$current3 = triggerRef.current) === null || _triggerRef$current3 === void 0 ? void 0 : _triggerRef$current3.open();\n  }, [triggerRef]);\n  var handleClose = useCallback(function () {\n    var _triggerRef$current4;\n    (_triggerRef$current4 = triggerRef.current) === null || _triggerRef$current4 === void 0 ? void 0 : _triggerRef$current4.close();\n  }, [triggerRef]);\n  var handleUpdatePosition = useCallback(function () {\n    var _triggerRef$current5;\n    (_triggerRef$current5 = triggerRef.current) === null || _triggerRef$current5 === void 0 ? void 0 : _triggerRef$current5.updatePosition();\n  }, [triggerRef]);\n  if (!disabled) {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useImperativeHandle(ref, function () {\n      return {\n        get root() {\n          var _triggerRef$current6;\n          return rootRef !== null && rootRef !== void 0 && rootRef.current ? rootRef === null || rootRef === void 0 ? void 0 : rootRef.current : (_triggerRef$current6 = triggerRef.current) === null || _triggerRef$current6 === void 0 ? void 0 : _triggerRef$current6.root;\n        },\n        get overlay() {\n          return overlayRef.current;\n        },\n        get target() {\n          return targetRef === null || targetRef === void 0 ? void 0 : targetRef.current;\n        },\n        updatePosition: handleUpdatePosition,\n        open: handleOpen,\n        close: handleClose\n      };\n    });\n  }\n}","map":{"version":3,"names":["_objectWithoutPropertiesLoose","React","useState","useImperativeHandle","useCallback","kebabCase","trim","isFunction","isUndefined","omit","find","findNodeOfTree","filterNodesOfTree","KEY_VALUES","useClassNames","shallowEqual","reactToString","placementPolyfill","defaultNodeKeys","valueKey","childrenKey","createConcatChildrenFunction","node","nodeValue","nodeKeys","_nodeKeys","data","children","item","concat","shouldDisplay","label","searchKeyword","keyword","toLocaleLowerCase","indexOf","isValidElement","nodes","join","usePickerClassName","props","_withClassPrefix","name","classPrefix","className","placement","appearance","cleanable","block","disabled","countable","readOnly","plaintext","hasValue","rest","_useClassNames","withClassPrefix","merge","classes","usedClassNamePropKeys","Object","keys","onMenuKeyDown","event","events","down","up","enter","del","esc","right","left","key","DOWN","preventDefault","UP","ENTER","BACKSPACE","ESC","TAB","LEFT","RIGHT","useFocusItemValue","defaultFocusItemValue","_props$valueKey","_props$focusableQuery","focusableQueryKey","_props$defaultLayer","defaultLayer","target","rtl","callback","_useState","focusItemValue","setFocusItemValue","_useState2","layer","setLayer","_useState3","setKeys","getFocusableMenuItems","menu","currentKeys","length","_Array$from","Array","from","querySelectorAll","map","_item$dataset","dataset","i","findFocusItemIndex","items","_items$i","focusNextMenuItem","index","nextIndex","focusItem","focusPrevMenuItem","getSubMenuKeys","nextLayer","subMenu","querySelector","_Array$from2","_item$dataset2","focusNextLevelMenu","nextKeys","focusPrevLevelMenu","_focusItem$parent","parentItemValue","parent","handleKeyDown","_onMenuKeyDown","onKeyDown","useToggleKeyDownEvent","_props$toggle","toggle","triggerRef","targetRef","overlayRef","searchInputRef","active","onExit","onOpen","onClose","onMenuPressEnter","onMenuPressBackspace","handleClose","_triggerRef$current","_triggerRef$current$c","current","close","call","handleOpen","_triggerRef$current2","_triggerRef$current2$","open","handleToggleDropdown","onToggle","test","_searchInputRef$curre","focus","useSearch","labelKey","searchBy","_useState4","setSearchKeyword","checkShouldDisplay","_keyword","updateFilteredData","nextData","setFilteredData","_useState5","filteredData","handleSearch","usePublicMethods","ref","_ref","rootRef","_triggerRef$current3","_triggerRef$current4","handleUpdatePosition","_triggerRef$current5","updatePosition","root","_triggerRef$current6","overlay"],"sources":["/home/system/togo-web-test/node_modules/rsuite/esm/Picker/utils.js"],"sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useImperativeHandle, useCallback } from 'react';\nimport kebabCase from 'lodash/kebabCase';\nimport trim from 'lodash/trim';\nimport isFunction from 'lodash/isFunction';\nimport isUndefined from 'lodash/isUndefined';\nimport omit from 'lodash/omit';\nimport find from 'lodash/find';\nimport { findNodeOfTree, filterNodesOfTree } from '../utils/treeUtils';\nimport { KEY_VALUES, useClassNames, shallowEqual, reactToString, placementPolyfill } from '../utils';\nvar defaultNodeKeys = {\n  valueKey: 'value',\n  childrenKey: 'children'\n};\nexport function createConcatChildrenFunction(node, nodeValue, nodeKeys) {\n  if (nodeKeys === void 0) {\n    nodeKeys = defaultNodeKeys;\n  }\n\n  var _nodeKeys = nodeKeys,\n      valueKey = _nodeKeys.valueKey,\n      childrenKey = _nodeKeys.childrenKey;\n  return function (data, children) {\n    if (nodeValue) {\n      node = findNodeOfTree(data, function (item) {\n        return nodeValue === item[valueKey];\n      });\n    }\n\n    node[childrenKey] = children;\n    return data.concat([]);\n  };\n}\nexport function shouldDisplay(label, searchKeyword) {\n  if (!trim(searchKeyword)) {\n    return true;\n  }\n\n  var keyword = searchKeyword.toLocaleLowerCase();\n\n  if (typeof label === 'string' || typeof label === 'number') {\n    return (\"\" + label).toLocaleLowerCase().indexOf(keyword) >= 0;\n  } else if ( /*#__PURE__*/React.isValidElement(label)) {\n    var nodes = reactToString(label);\n    return nodes.join('').toLocaleLowerCase().indexOf(keyword) >= 0;\n  }\n\n  return false;\n}\n\n/**\n * The className of the assembled Toggle is on the Picker.\n */\nexport function usePickerClassName(props) {\n  var _withClassPrefix;\n\n  var name = props.name,\n      classPrefix = props.classPrefix,\n      className = props.className,\n      placement = props.placement,\n      appearance = props.appearance,\n      cleanable = props.cleanable,\n      block = props.block,\n      disabled = props.disabled,\n      countable = props.countable,\n      readOnly = props.readOnly,\n      plaintext = props.plaintext,\n      hasValue = props.hasValue,\n      rest = _objectWithoutPropertiesLoose(props, [\"name\", \"classPrefix\", \"className\", \"placement\", \"appearance\", \"cleanable\", \"block\", \"disabled\", \"countable\", \"readOnly\", \"plaintext\", \"hasValue\"]);\n\n  var _useClassNames = useClassNames(classPrefix),\n      withClassPrefix = _useClassNames.withClassPrefix,\n      merge = _useClassNames.merge;\n\n  var classes = merge(className, withClassPrefix(name, appearance, 'toggle-wrapper', (_withClassPrefix = {}, _withClassPrefix[\"placement-\" + kebabCase(placementPolyfill(placement))] = placement, _withClassPrefix['read-only'] = readOnly, _withClassPrefix['has-value'] = hasValue, _withClassPrefix.cleanable = hasValue && cleanable, _withClassPrefix.block = block, _withClassPrefix.disabled = disabled, _withClassPrefix.countable = countable, _withClassPrefix.plaintext = plaintext, _withClassPrefix)));\n  var usedClassNamePropKeys = Object.keys(omit(props, [].concat(Object.keys(rest || {}), ['disabled', 'readOnly', 'plaintext'])));\n  return [classes, usedClassNamePropKeys];\n}\n\n/**\n * Handling keyboard events...\n * @param event Keyboard event object\n * @param events Event callback functions\n */\nexport function onMenuKeyDown(event, events) {\n  var down = events.down,\n      up = events.up,\n      enter = events.enter,\n      del = events.del,\n      esc = events.esc,\n      right = events.right,\n      left = events.left;\n\n  switch (event.key) {\n    // down\n    case KEY_VALUES.DOWN:\n      down === null || down === void 0 ? void 0 : down(event);\n      event.preventDefault();\n      break;\n    // up\n\n    case KEY_VALUES.UP:\n      up === null || up === void 0 ? void 0 : up(event);\n      event.preventDefault();\n      break;\n    // enter\n\n    case KEY_VALUES.ENTER:\n      enter === null || enter === void 0 ? void 0 : enter(event);\n      event.preventDefault();\n      break;\n    // delete\n\n    case KEY_VALUES.BACKSPACE:\n      del === null || del === void 0 ? void 0 : del(event);\n      break;\n    // esc | tab\n\n    case KEY_VALUES.ESC:\n    case KEY_VALUES.TAB:\n      esc === null || esc === void 0 ? void 0 : esc(event);\n      break;\n    // left arrow\n\n    case KEY_VALUES.LEFT:\n      left === null || left === void 0 ? void 0 : left(event);\n      break;\n    // right arrow\n\n    case KEY_VALUES.RIGHT:\n      right === null || right === void 0 ? void 0 : right(event);\n      break;\n\n    default:\n  }\n}\n\n/**\n * A hook that manages the focus state of the option.\n * @param defaultFocusItemValue\n * @param props\n */\nexport var useFocusItemValue = function useFocusItemValue(defaultFocusItemValue, props) {\n  var _props$valueKey = props.valueKey,\n      valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n      _props$focusableQuery = props.focusableQueryKey,\n      focusableQueryKey = _props$focusableQuery === void 0 ? '[data-key][aria-disabled=\"false\"]' : _props$focusableQuery,\n      _props$defaultLayer = props.defaultLayer,\n      defaultLayer = _props$defaultLayer === void 0 ? 0 : _props$defaultLayer,\n      data = props.data,\n      target = props.target,\n      rtl = props.rtl,\n      callback = props.callback;\n\n  var _useState = useState(defaultFocusItemValue),\n      focusItemValue = _useState[0],\n      setFocusItemValue = _useState[1];\n\n  var _useState2 = useState(defaultLayer),\n      layer = _useState2[0],\n      setLayer = _useState2[1];\n\n  var _useState3 = useState([]),\n      keys = _useState3[0],\n      setKeys = _useState3[1];\n  /**\n   * Get the elements visible in all options.\n   */\n\n\n  var getFocusableMenuItems = useCallback(function () {\n    if (!target) {\n      return [];\n    }\n\n    var menu = isFunction(target) ? target() : target;\n    var currentKeys = keys;\n\n    if (currentKeys.length === 0) {\n      var _Array$from;\n\n      currentKeys = (_Array$from = Array.from(menu === null || menu === void 0 ? void 0 : menu.querySelectorAll(focusableQueryKey))) === null || _Array$from === void 0 ? void 0 : _Array$from.map(function (item) {\n        var _item$dataset;\n\n        return item === null || item === void 0 ? void 0 : (_item$dataset = item.dataset) === null || _item$dataset === void 0 ? void 0 : _item$dataset.key;\n      });\n      setKeys(currentKeys);\n    }\n\n    if (currentKeys.length === 0) {\n      return [];\n    } // 1. It is necessary to traverse the `keys` instead of `data` here to preserve the order of the array.\n    // 2. The values ​​in `keys` are all string, so the corresponding value of `data` should also be converted to string\n\n\n    return currentKeys.map(function (key) {\n      return find(data, function (i) {\n        return \"\" + i[valueKey] === key;\n      });\n    });\n  }, [data, focusableQueryKey, keys, target, valueKey]);\n  /**\n   * Get the index of the focus item.\n   */\n\n  var findFocusItemIndex = useCallback(function (callback) {\n    var items = getFocusableMenuItems();\n\n    for (var i = 0; i < items.length; i += 1) {\n      var _items$i;\n\n      if (shallowEqual(focusItemValue, (_items$i = items[i]) === null || _items$i === void 0 ? void 0 : _items$i[valueKey])) {\n        callback(items, i);\n        return;\n      }\n    }\n\n    callback(items, -1);\n  }, [focusItemValue, getFocusableMenuItems, valueKey]);\n  var focusNextMenuItem = useCallback(function (event) {\n    findFocusItemIndex(function (items, index) {\n      var nextIndex = index + 2 > items.length ? 0 : index + 1;\n      var focusItem = items[nextIndex];\n\n      if (!isUndefined(focusItem)) {\n        setFocusItemValue(focusItem[valueKey]);\n        callback === null || callback === void 0 ? void 0 : callback(focusItem[valueKey], event);\n      }\n    });\n  }, [callback, findFocusItemIndex, valueKey]);\n  var focusPrevMenuItem = useCallback(function (event) {\n    findFocusItemIndex(function (items, index) {\n      var nextIndex = index === 0 ? items.length - 1 : index - 1;\n      var focusItem = items[nextIndex];\n\n      if (!isUndefined(focusItem)) {\n        setFocusItemValue(focusItem[valueKey]);\n        callback === null || callback === void 0 ? void 0 : callback(focusItem[valueKey], event);\n      }\n    });\n  }, [callback, findFocusItemIndex, valueKey]);\n  var getSubMenuKeys = useCallback(function (nextLayer) {\n    var menu = isFunction(target) ? target() : target;\n    var subMenu = menu === null || menu === void 0 ? void 0 : menu.querySelector(\"[data-layer=\\\"\" + nextLayer + \"\\\"]\");\n\n    if (subMenu) {\n      var _Array$from2;\n\n      return (_Array$from2 = Array.from(subMenu.querySelectorAll(focusableQueryKey))) === null || _Array$from2 === void 0 ? void 0 : _Array$from2.map(function (item) {\n        var _item$dataset2;\n\n        return item === null || item === void 0 ? void 0 : (_item$dataset2 = item.dataset) === null || _item$dataset2 === void 0 ? void 0 : _item$dataset2.key;\n      });\n    }\n\n    return null;\n  }, [focusableQueryKey, target]);\n  var focusNextLevelMenu = useCallback(function (event) {\n    var nextLayer = layer + 1;\n    var nextKeys = getSubMenuKeys(nextLayer);\n\n    if (nextKeys) {\n      setKeys(nextKeys);\n      setLayer(nextLayer);\n      setFocusItemValue(nextKeys[0]);\n      callback === null || callback === void 0 ? void 0 : callback(nextKeys[0], event);\n    }\n  }, [callback, getSubMenuKeys, layer]);\n  var focusPrevLevelMenu = useCallback(function (event) {\n    var nextLayer = layer - 1;\n    var nextKeys = getSubMenuKeys(nextLayer);\n\n    if (nextKeys) {\n      var _focusItem$parent;\n\n      setKeys(nextKeys);\n      setLayer(nextLayer);\n      var focusItem = findNodeOfTree(data, function (item) {\n        return item[valueKey] === focusItemValue;\n      });\n      var parentItemValue = focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent = focusItem.parent) === null || _focusItem$parent === void 0 ? void 0 : _focusItem$parent[valueKey];\n\n      if (parentItemValue) {\n        setFocusItemValue(parentItemValue);\n        callback === null || callback === void 0 ? void 0 : callback(parentItemValue, event);\n      }\n    }\n  }, [callback, data, focusItemValue, getSubMenuKeys, layer, valueKey]);\n  var handleKeyDown = useCallback(function (event) {\n    var _onMenuKeyDown;\n\n    onMenuKeyDown(event, (_onMenuKeyDown = {\n      down: focusNextMenuItem,\n      up: focusPrevMenuItem\n    }, _onMenuKeyDown[rtl ? 'left' : 'right'] = focusNextLevelMenu, _onMenuKeyDown[rtl ? 'right' : 'left'] = focusPrevLevelMenu, _onMenuKeyDown));\n  }, [focusNextLevelMenu, focusNextMenuItem, focusPrevLevelMenu, focusPrevMenuItem, rtl]);\n  return {\n    focusItemValue: focusItemValue,\n    setFocusItemValue: setFocusItemValue,\n    layer: layer,\n    setLayer: setLayer,\n    keys: keys,\n    setKeys: setKeys,\n    onKeyDown: handleKeyDown\n  };\n};\n\n/**\n * A hook to control the toggle keyboard operation\n * @param props\n */\nexport var useToggleKeyDownEvent = function useToggleKeyDownEvent(props) {\n  var _props$toggle = props.toggle,\n      toggle = _props$toggle === void 0 ? true : _props$toggle,\n      triggerRef = props.triggerRef,\n      targetRef = props.targetRef,\n      overlayRef = props.overlayRef,\n      searchInputRef = props.searchInputRef,\n      active = props.active,\n      onExit = props.onExit,\n      onOpen = props.onOpen,\n      onClose = props.onClose,\n      onKeyDown = props.onKeyDown,\n      onMenuKeyDown = props.onMenuKeyDown,\n      onMenuPressEnter = props.onMenuPressEnter,\n      onMenuPressBackspace = props.onMenuPressBackspace;\n  var handleClose = useCallback(function () {\n    var _triggerRef$current, _triggerRef$current$c;\n\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$c = _triggerRef$current.close) === null || _triggerRef$current$c === void 0 ? void 0 : _triggerRef$current$c.call(_triggerRef$current);\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n  }, [onClose, triggerRef]);\n  var handleOpen = useCallback(function () {\n    var _triggerRef$current2, _triggerRef$current2$;\n\n    (_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : (_triggerRef$current2$ = _triggerRef$current2.open) === null || _triggerRef$current2$ === void 0 ? void 0 : _triggerRef$current2$.call(_triggerRef$current2);\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n  }, [onOpen, triggerRef]);\n  var handleToggleDropdown = useCallback(function () {\n    if (active) {\n      handleClose();\n      return;\n    }\n\n    handleOpen();\n  }, [active, handleOpen, handleClose]);\n  var onToggle = useCallback(function (event) {\n    if (event.target === (targetRef === null || targetRef === void 0 ? void 0 : targetRef.current)) {\n      // enter\n      if (toggle && event.key === KEY_VALUES.ENTER) {\n        handleToggleDropdown();\n      } // delete\n\n\n      if (event.key === KEY_VALUES.BACKSPACE) {\n        onExit === null || onExit === void 0 ? void 0 : onExit(event);\n      }\n    }\n\n    if (event.key === KEY_VALUES.ESC || event.key === KEY_VALUES.TAB) {\n      handleClose();\n    } // Native event callback\n\n\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(event);\n\n    if (overlayRef !== null && overlayRef !== void 0 && overlayRef.current) {\n      // The keyboard operation callback on the menu.\n      onMenuKeyDown === null || onMenuKeyDown === void 0 ? void 0 : onMenuKeyDown(event);\n\n      if (event.key === KEY_VALUES.ENTER) {\n        onMenuPressEnter === null || onMenuPressEnter === void 0 ? void 0 : onMenuPressEnter(event);\n      }\n\n      if (event.key === KEY_VALUES.BACKSPACE) {\n        onMenuPressBackspace === null || onMenuPressBackspace === void 0 ? void 0 : onMenuPressBackspace(event);\n      } // The search box gets focus when typing characters and numbers.\n\n\n      if (event.key.length === 1 && /\\w/.test(event.key)) {\n        var _searchInputRef$curre;\n\n        searchInputRef === null || searchInputRef === void 0 ? void 0 : (_searchInputRef$curre = searchInputRef.current) === null || _searchInputRef$curre === void 0 ? void 0 : _searchInputRef$curre.focus();\n      }\n    }\n  }, [handleClose, handleToggleDropdown, overlayRef, onExit, onKeyDown, onMenuKeyDown, onMenuPressBackspace, onMenuPressEnter, toggle, targetRef, searchInputRef]);\n  return onToggle;\n};\n\n/**\n * A hook that handles search filter options\n * @param props\n */\nexport function useSearch(props) {\n  var labelKey = props.labelKey,\n      data = props.data,\n      searchBy = props.searchBy,\n      callback = props.callback; // Use search keywords to filter options.\n\n  var _useState4 = useState(''),\n      searchKeyword = _useState4[0],\n      setSearchKeyword = _useState4[1];\n  /**\n   * Index of keyword  in `label`\n   * @param {node} label\n   */\n\n\n  var checkShouldDisplay = useCallback(function (item, keyword) {\n    var label = item === null || item === void 0 ? void 0 : item[labelKey];\n\n    var _keyword = isUndefined(keyword) ? searchKeyword : keyword;\n\n    if (typeof searchBy === 'function') {\n      return searchBy(_keyword, label, item);\n    }\n\n    return shouldDisplay(label, _keyword);\n  }, [labelKey, searchBy, searchKeyword]);\n  var updateFilteredData = useCallback(function (nextData) {\n    setFilteredData(filterNodesOfTree(nextData, function (item) {\n      return checkShouldDisplay(item);\n    }));\n  }, [checkShouldDisplay]);\n\n  var _useState5 = useState(filterNodesOfTree(data, function (item) {\n    return checkShouldDisplay(item);\n  })),\n      filteredData = _useState5[0],\n      setFilteredData = _useState5[1];\n\n  var handleSearch = function handleSearch(searchKeyword, event) {\n    var filteredData = filterNodesOfTree(data, function (item) {\n      return checkShouldDisplay(item, searchKeyword);\n    });\n    setFilteredData(filteredData);\n    setSearchKeyword(searchKeyword);\n    callback === null || callback === void 0 ? void 0 : callback(searchKeyword, filteredData, event);\n  };\n\n  return {\n    searchKeyword: searchKeyword,\n    filteredData: filteredData,\n    updateFilteredData: updateFilteredData,\n    setSearchKeyword: setSearchKeyword,\n    checkShouldDisplay: checkShouldDisplay,\n    handleSearch: handleSearch\n  };\n}\n\n/**\n * A hook of the exposed method of Picker\n *\n * {\n *   root: Element;\n *   overlay: Element;\n *   target?: Element;\n *   updatePosition:() => void;\n *   open:() => void;\n *   close:() => void;\n * }\n * @param ref\n * @param params\n */\nexport function usePublicMethods(ref, _ref, disabled) {\n  var triggerRef = _ref.triggerRef,\n      overlayRef = _ref.overlayRef,\n      targetRef = _ref.targetRef,\n      rootRef = _ref.rootRef;\n  var handleOpen = useCallback(function () {\n    var _triggerRef$current3;\n\n    (_triggerRef$current3 = triggerRef.current) === null || _triggerRef$current3 === void 0 ? void 0 : _triggerRef$current3.open();\n  }, [triggerRef]);\n  var handleClose = useCallback(function () {\n    var _triggerRef$current4;\n\n    (_triggerRef$current4 = triggerRef.current) === null || _triggerRef$current4 === void 0 ? void 0 : _triggerRef$current4.close();\n  }, [triggerRef]);\n  var handleUpdatePosition = useCallback(function () {\n    var _triggerRef$current5;\n\n    (_triggerRef$current5 = triggerRef.current) === null || _triggerRef$current5 === void 0 ? void 0 : _triggerRef$current5.updatePosition();\n  }, [triggerRef]);\n\n  if (!disabled) {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useImperativeHandle(ref, function () {\n      return {\n        get root() {\n          var _triggerRef$current6;\n\n          return rootRef !== null && rootRef !== void 0 && rootRef.current ? rootRef === null || rootRef === void 0 ? void 0 : rootRef.current : (_triggerRef$current6 = triggerRef.current) === null || _triggerRef$current6 === void 0 ? void 0 : _triggerRef$current6.root;\n        },\n\n        get overlay() {\n          return overlayRef.current;\n        },\n\n        get target() {\n          return targetRef === null || targetRef === void 0 ? void 0 : targetRef.current;\n        },\n\n        updatePosition: handleUpdatePosition,\n        open: handleOpen,\n        close: handleClose\n      };\n    });\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}