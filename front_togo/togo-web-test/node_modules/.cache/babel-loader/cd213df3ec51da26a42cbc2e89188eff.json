{"ast":null,"code":"import _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { isArray, isObject } from \"./assertion\";\nexport function walkObject(target, predicate) {\n  function inner(value, path) {\n    if (path === void 0) {\n      path = [];\n    }\n    if (isArray(value)) {\n      return value.map(function (item, index) {\n        return inner(item, [].concat(_toConsumableArray(path), [String(index)]));\n      });\n    }\n    if (isObject(value)) {\n      return Object.fromEntries(Object.entries(value).map(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n          key = _ref2[0],\n          child = _ref2[1];\n        return [key, inner(child, [].concat(_toConsumableArray(path), [key]))];\n      }));\n    }\n    return predicate(value, path);\n  }\n  return inner(target);\n}","map":{"version":3,"names":["isArray","isObject","walkObject","target","predicate","inner","value","path","map","item","index","concat","_toConsumableArray","String","Object","fromEntries","entries","_ref","_ref2","_slicedToArray","key","child"],"sources":["../../src/walk-object.ts"],"sourcesContent":["import { isArray, isObject } from \"./assertion\"\n\nexport type WalkObjectPredicate<Leaf = unknown> = (\n  value: unknown,\n  path: string[],\n) => Leaf\n\nexport type MappedLeavesObject<Obj, LeafType> = {\n  [Prop in keyof Obj]: Obj[Prop] extends Array<any>\n    ? MappedLeavesObject<Obj[Prop][number], LeafType>[]\n    : Obj[Prop] extends object\n    ? MappedLeavesObject<Obj[Prop], LeafType>\n    : LeafType\n}\n\nexport function walkObject<Target, LeafType>(\n  target: Target,\n  predicate: WalkObjectPredicate<LeafType>,\n): MappedLeavesObject<Target, ReturnType<WalkObjectPredicate<LeafType>>> {\n  function inner(value: unknown, path: string[] = []): any {\n    if (isArray(value)) {\n      return value.map((item, index) => inner(item, [...path, String(index)]))\n    }\n\n    if (isObject(value)) {\n      return Object.fromEntries(\n        Object.entries(value).map(([key, child]) => [\n          key,\n          inner(child, [...path, key]),\n        ]),\n      )\n    }\n\n    return predicate(value, path)\n  }\n\n  return inner(target)\n}\n"],"mappings":";;AAAA,SAASA,OAAT,EAAkBC,QAAlB,QAAkC,aAAlC;AAeA,OAAO,SAASC,UAATA,CACLC,MADK,EAELC,SAFK,EAGkE;EACvE,SAASC,KAATA,CAAeC,KAAf,EAA+BC,IAA/B,EAAyD;IAAA,IAA1BA,IAA0B;MAA1BA,IAA0B,GAAT,EAAS;IAAA;IACvD,IAAIP,OAAO,CAACM,KAAD,CAAX,EAAoB;MAClB,OAAOA,KAAK,CAACE,GAAN,CAAU,UAACC,IAAD,EAAOC,KAAP;QAAA,OAAiBL,KAAK,CAACI,IAAD,KAAAE,MAAA,CAAAC,kBAAA,CAAWL,IAAJ,IAAUM,MAAM,CAACH,KAAD,CAAhB,EAAP,CAAhC;MAAA,EAAP;IACD;IAED,IAAIT,QAAQ,CAACK,KAAD,CAAZ,EAAqB;MACnB,OAAOQ,MAAM,CAACC,WAAP,CACLD,MAAM,CAACE,OAAP,CAAeV,KAAf,EAAsBE,GAAtB,CAA0B,UAAAS,IAAA;QAAA,IAAAC,KAAA,GAAAC,cAAA,CAAAF,IAAA;UAAEG,GAAD,GAAAF,KAAA;UAAMG,KAAN,GAAAH,KAAA;QAAD,OAAkB,CAC1CE,GAD0C,EAE1Cf,KAAK,CAACgB,KAAD,KAAAV,MAAA,CAAAC,kBAAA,CAAYL,IAAJ,IAAUa,GAAV,EAAR,CAFqC,CAAlB;MAAA,CAA1B,CADK,CAAP;IAMD;IAED,OAAOhB,SAAS,CAACE,KAAD,EAAQC,IAAR,CAAhB;EACD;EAED,OAAOF,KAAK,CAACF,MAAD,CAAZ;AACD"},"metadata":{},"sourceType":"module"}