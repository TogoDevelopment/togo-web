{"ast":null,"code":"import _objectSpread from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useLocation,useParams,useHistory}from\"react-router-dom\";import{AcceptOfferReq,GetAllBids,GetClientOrderDetails}from\"../../APIs/OrdersAPIs\";import locationImg from\"../../assets/locationn.png\";import Order,{GetOrderStatus}from\"./Order\";import{Button}from\"react-bootstrap\";import{CancelOrder}from\"../OrdersManager/CancelOrder\";import{refreshPage}from\"../../Functions/CommonFunctions\";function Label(_ref){var val=_ref.val,text=_ref.text;return/*#__PURE__*/React.createElement(\"div\",{className:\"w-50\"},/*#__PURE__*/React.createElement(\"div\",{className:\"order-prop-label\"},text),/*#__PURE__*/React.createElement(\"div\",null,val));}export default function ViewOrder(props){var _useParams=useParams(),id=_useParams.id;var history=useHistory();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),orderInfo=_useState2[0],setOrderInfo=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),orderMoreInfo=_useState4[0],setOrderMoreInfo=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),costDetail=_useState6[0],setCostDetails=_useState6[1];useEffect(function(){GetClientOrderDetails(id).then(function(res){setOrderMoreInfo(res.data.server_response[0]);});GetAllBids(id).then(function(res){setOrderInfo(_objectSpread(_objectSpread({},res.data.OrderDetail),{},{bidsCount:res.data.BidCount}));setCostDetails(res.data.CostDetail);});},[id]);var orderStatus=GetOrderStatus(orderInfo.IsAcceptDelivery,orderInfo.Orderfinished,orderInfo.pickup_date,costDetail.length);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Order,{order:orderInfo/* location.state.orderObj */,id:id}),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(Label,{val:orderInfo.PickupName,text:\"Pickup From\"}),/*#__PURE__*/React.createElement(Label,{val:orderInfo.PickupMobile,text:\"Pickup Mobile Number\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(Label,{val:orderInfo.ReceiverName,text:\"Receiver Name\"}),/*#__PURE__*/React.createElement(Label,{val:orderInfo.ReceiverMobile,text:\"Receiver Mobile Number\"}))),(orderStatus==\"WAITING-FOR-BIDS\"||orderStatus==\"AVAILABEL-BIDS\")&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CancelOrder,{orderId:id,className:\"mt-3 d-flex align-items-center m-auto btn-grad rounded-22\",onSuccess:function onSuccess(){history.goBack();}}),/*#__PURE__*/React.createElement(\"h4\",{className:\"fw-bold text-center togo-border\"},\"Available offers\")),!costDetail.length&&orderStatus==\"WAITING-FOR-BIDS\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"text-center\"},\"No offers\"),!!costDetail.length&&orderStatus==\"AVAILABEL-BIDS\"&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h4\",{className:\"fw-bold text-center togo-border\"},\"Available offers\"),costDetail.map(function(bid){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"align-items-center d-flex justify-content-around mt-3\"},/*#__PURE__*/React.createElement(\"img\",{style:{width:\"100px\",height:\"100px\",objectFit:\"cover\"},src:\"http://46.253.93.4/togo/MobileAPi/\".concat(bid.TransporterPersonalImg)}),/*#__PURE__*/React.createElement(\"div\",null,bid.TransporterName),/*#__PURE__*/React.createElement(\"div\",null,bid.BidCost)),/*#__PURE__*/React.createElement(Button,{className:\"btn-grad rounded-22 mt-3 d-block m-auto\",onClick:function onClick(){AcceptOfferReq(bid.IdTransporterBidRequist,id,bid.BidCost).then(function(resp){if(resp.data.indexOf(\"Success\")!==-1){refreshPage();}});}},\"Accept Offer\"));})),(orderStatus==\"BID-ACCEPTED\"||orderStatus==\"OUT-FOR-DELIVERY\")&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{className:\"fw-bold text-center togo-border\"},\"Transporter details\"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(Label,{val:orderMoreInfo.FullNameCustomer,text:\"Transporter name\"}),/*#__PURE__*/React.createElement(Label,{val:orderMoreInfo.CarNumType,text:\"Vehicle type\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(Label,{val:orderMoreInfo.CarLicenceNum,text:\"Vehicle number\"}),/*#__PURE__*/React.createElement(Label,{val:orderMoreInfo.ColorName,text:\"Vehicle color\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(Label,{val:orderMoreInfo.TransNumber,text:\"Transporter mobile\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"w-50 text-start d-flex align-items-center shadow-none\"},/*#__PURE__*/React.createElement(\"img\",{src:locationImg,style:{width:\"24px\",height:\"24px\"},className:\"me-1\",alt:\"worldicon\"}),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"97%\"}},\"Track Transporter\")))));}","map":null,"metadata":{},"sourceType":"module"}