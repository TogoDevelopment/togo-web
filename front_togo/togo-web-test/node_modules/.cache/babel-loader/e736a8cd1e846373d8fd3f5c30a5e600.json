{"ast":null,"code":"import _toConsumableArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/system/togo-web-test/src/components/FinancialTransactions/FinancialTransactions.js\";\n\nimport React, { useEffect, useState } from 'react';\nimport translate from \"../../i18n/translate\";\nimport './FinancialTransactions.css';\nimport DynamicTable from '../DynamicTable/DynamicTable';\nimport { isTransporter } from '../../Util';\nimport { Button, Form } from \"react-bootstrap\";\nimport { transactionTest, invoicesTest } from '../../APIs/OrdersAPIs';\nimport Table from \"react-bootstrap/Table\";\n/* styles */\n\nimport \"./FinancialTransactions.css\";\n\nvar calculateRange = function calculateRange(data, rowsPerPage) {\n  var range = [];\n  var num = Math.ceil(data.length / rowsPerPage);\n  var i = 1;\n\n  for (var _i = 1; _i <= num; _i++) {\n    range.push(_i);\n  }\n\n  return range;\n};\n\nvar sliceData = function sliceData(data, page, rowsPerPage) {\n  return data.slice((page - 1) * rowsPerPage, page * rowsPerPage);\n};\n\nvar useTable = function useTable(data, page, rowsPerPage) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      tableRange = _useState2[0],\n      setTableRange = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      slice = _useState4[0],\n      setSlice = _useState4[1];\n\n  useEffect(function () {\n    var range = calculateRange(data, rowsPerPage);\n    setTableRange(_toConsumableArray(range));\n    var slice = sliceData(data, page, rowsPerPage);\n    setSlice(_toConsumableArray(slice));\n  }, [data, setTableRange, page, setSlice]);\n  return {\n    slice: slice,\n    range: tableRange\n  };\n};\n\nvar TableFooter = function TableFooter(_ref) {\n  var range = _ref.range,\n      setPage = _ref.setPage,\n      page = _ref.page,\n      slice = _ref.slice;\n  useEffect(function () {\n    if (slice.length < 1 && page !== 1) {\n      setPage(page - 1);\n    }\n  }, [slice, page, setPage]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: 'tableFooter',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, range.map(function (el, index) {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      key: index,\n      className: 'button'.concat(\" \", page === el ? 'activeButton' : 'inactiveButton'),\n      onClick: function onClick() {\n        return setPage(el);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }\n    }, el);\n  }));\n};\n\nvar CustomTable = function CustomTable(_ref2) {\n  var data = _ref2.data,\n      rowsPerPage = _ref2.rowsPerPage;\n\n  var _useState5 = useState(1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      page = _useState6[0],\n      setPage = _useState6[1];\n\n  var _useTable = useTable(data, page, rowsPerPage),\n      slice = _useTable.slice,\n      range = _useTable.range;\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, \"Order ID\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, \"date\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, \"Journal Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, \"amount\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, slice.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 29\n      }\n    }, item.ref), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 29\n      }\n    }, item.move_name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 29\n      }\n    }, item.date), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 29\n      }\n    }, item.Journal), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 29\n      }\n    }, item.amount));\n  }))), /*#__PURE__*/React.createElement(TableFooter, {\n    range: range,\n    slice: slice,\n    setPage: setPage,\n    page: page,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default function Transactions() {\n  // console.log(styles)\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      transactions = _useState8[0],\n      setTransactions = _useState8[1]; // const [invoices, setInvoices] = useState([]);\n\n  /*const columns = [\r\n      {\r\n          label: \"Name\",\r\n          key: \"move_name\",\r\n      },\r\n      {\r\n          label: \"date\",\r\n          key: \"date\"\r\n      },\r\n      {\r\n          label: \"Order ID\",\r\n          key: \"ref\",\r\n      },\r\n      {\r\n          label: \"Journal\",\r\n          key: \"journal\",\r\n      },\r\n      {\r\n          label: \"amount\",\r\n          key: \"amount\"\r\n      }\r\n  ];*/\n\n\n  useEffect(function () {\n    var isMounted = true;\n    transactionTest(localStorage.getItem(\"userId\")).then(function (res) {\n      if (isMounted) {\n        var tempArr = res.data.server_response.data.result.response;\n        tempArr.sort(function (a, b) {\n          return b.ref - a.ref;\n        });\n\n        for (var i = 0; i < tempArr.length; i++) {\n          if (tempArr[i].amount < 0) {\n            tempArr[i].amount = Math.abs(tempArr[i].amount) + \" - in\";\n          } else if (tempArr[i].amount > 0) {\n            tempArr[i].amount = tempArr[i].amount + \" - out\";\n          }\n        }\n\n        setTransactions(tempArr);\n      }\n    });\n    return function () {\n      isMounted = false;\n    }; // console.log(localStorage.getItem(\"userId\"));\n\n    /*transactionTest(localStorage.getItem(\"userId\")).then((res)=>{  // edited (test transactions) \r\n        console.log(res.data.server_response);\r\n        setTransactions(res.data.server_response.data.result.response);\r\n    });*/\n\n    /*invoicesTest(localStorage.getItem(\"userId\")).then((res)=>{  // edited (test transactions) \r\n        // console.log(res.data.server_response.data.result.response);\r\n        // setInvoices(res.data.server_response.data.result.response);\r\n    });*/\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pe-4 ps-4 pt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    placeholder: \"Order ID...\",\n    style: {\n      width: \"20%\",\n      float: \"right\",\n      marginTop: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CustomTable, {\n    data: transactions,\n    rowsPerPage: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }\n  }));\n}\n;","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/FinancialTransactions/FinancialTransactions.js"],"names":["React","useEffect","useState","translate","DynamicTable","isTransporter","Button","Form","transactionTest","invoicesTest","Table","calculateRange","data","rowsPerPage","range","num","Math","ceil","length","i","push","sliceData","page","slice","useTable","tableRange","setTableRange","setSlice","TableFooter","setPage","map","el","index","CustomTable","item","ref","move_name","date","Journal","amount","Transactions","transactions","setTransactions","isMounted","localStorage","getItem","then","res","tempArr","server_response","result","response","sort","a","b","abs","width","float","marginTop"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport translate from \"../../i18n/translate\";\r\nimport './FinancialTransactions.css';\r\nimport DynamicTable from '../DynamicTable/DynamicTable';\r\nimport { isTransporter } from '../../Util';\r\n\r\nimport { Button, Form } from \"react-bootstrap\";\r\n\r\nimport { transactionTest, invoicesTest } from '../../APIs/OrdersAPIs';\r\n\r\nimport Table from \"react-bootstrap/Table\";\r\n\r\n/* styles */\r\n\r\nimport \"./FinancialTransactions.css\";\r\n\r\n\r\nconst calculateRange = (data, rowsPerPage) => {\r\n  const range = [];\r\n  const num = Math.ceil(data.length / rowsPerPage);\r\n  let i = 1;\r\n  for (let i = 1; i <= num; i++) {\r\n    range.push(i);\r\n  }\r\n  return range;\r\n};\r\n\r\nconst sliceData = (data, page, rowsPerPage) => {\r\n  return data.slice((page - 1) * rowsPerPage, page * rowsPerPage);\r\n};\r\n\r\nconst useTable = (data, page, rowsPerPage) => {\r\n  const [tableRange, setTableRange] = useState([]);\r\n  const [slice, setSlice] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const range = calculateRange(data, rowsPerPage);\r\n    setTableRange([...range]);\r\n\r\n    const slice = sliceData(data, page, rowsPerPage);\r\n    setSlice([...slice]);\r\n  }, [data, setTableRange, page, setSlice]);\r\n\r\n  return { slice, range: tableRange };\r\n};\r\n\r\nconst TableFooter = ({ range, setPage, page, slice }) => {\r\n  useEffect(() => {\r\n    if (slice.length < 1 && page !== 1) {\r\n      setPage(page - 1);\r\n    }\r\n  }, [slice, page, setPage]);\r\n  return (\r\n    <div className={'tableFooter'}>\r\n\r\n      {/*<Button onClick={() => console.log(range)}>{\"<\"}</Button>*/}\r\n\r\n      {range.map((el, index) => (\r\n        <button\r\n          key={index}\r\n          className={`${'button'} ${\r\n            page === el ? 'activeButton' : 'inactiveButton'\r\n          }`}\r\n          onClick={() => setPage(el)}\r\n        >\r\n          {el}\r\n        </button>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst CustomTable = ({ data, rowsPerPage }) => {\r\n  const [page, setPage] = useState(1);\r\n  const { slice, range } = useTable(data, page, rowsPerPage);\r\n  return (\r\n    <>\r\n      <Table>\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\">Order ID</th>\r\n            <th scope=\"col\">Name</th>\r\n            <th scope=\"col\">date</th>\r\n            <th scope=\"col\">Journal Name</th>\r\n            <th scope=\"col\">amount</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {slice.map((item, index) =>\r\n                    <tr \r\n                        key={index} \r\n                        >\r\n                        \r\n                            <td>\r\n                                {item.ref}\r\n                            </td>\r\n                            <td>\r\n                                {item.move_name}\r\n                            </td>\r\n                            <td>\r\n                                {item.date}\r\n                            </td>\r\n                            <td>\r\n                                {item.Journal}\r\n                            </td>\r\n                            <td>\r\n                                {item.amount}\r\n                            </td>\r\n                        \r\n                    </tr>\r\n                )}\r\n                {/*{!slice.length && <tr><td colSpan={columns.length}>Transactions not found!</td></tr>}*/}\r\n        </tbody>\r\n      </Table>\r\n      <TableFooter range={range} slice={slice} setPage={setPage} page={page} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default function Transactions() {\r\n\r\n    // console.log(styles)\r\n\r\n    const [transactions, setTransactions] = useState([]);\r\n\r\n    // const [invoices, setInvoices] = useState([]);\r\n\r\n    /*const columns = [\r\n        {\r\n            label: \"Name\",\r\n            key: \"move_name\",\r\n        },\r\n        {\r\n            label: \"date\",\r\n            key: \"date\"\r\n        },\r\n        {\r\n            label: \"Order ID\",\r\n            key: \"ref\",\r\n        },\r\n        {\r\n            label: \"Journal\",\r\n            key: \"journal\",\r\n        },\r\n        {\r\n            label: \"amount\",\r\n            key: \"amount\"\r\n        }\r\n    ];*/\r\n\r\n    useEffect(() => {\r\n\r\n\r\n\r\n        let isMounted = true;  \r\n          transactionTest(localStorage.getItem(\"userId\")).then(res => {\r\n            if (isMounted) {\r\n                let tempArr = res.data.server_response.data.result.response;\r\n\r\n                tempArr.sort((a, b) => {\r\n                    return b.ref - a.ref;\r\n                });\r\n\r\n                for (let i = 0; i < tempArr.length; i++) {\r\n                    if (tempArr[i].amount < 0) {\r\n                        tempArr[i].amount = Math.abs(tempArr[i].amount) + \" - in\"\r\n                    } else if (tempArr[i].amount > 0) {\r\n                        tempArr[i].amount = tempArr[i].amount + \" - out\"\r\n                    }\r\n                }\r\n\r\n                setTransactions(tempArr); \r\n            }\r\n          })\r\n        return () => { isMounted = false };\r\n\r\n\r\n        // console.log(localStorage.getItem(\"userId\"));\r\n\r\n        /*transactionTest(localStorage.getItem(\"userId\")).then((res)=>{  // edited (test transactions) \r\n            console.log(res.data.server_response);\r\n            setTransactions(res.data.server_response.data.result.response);\r\n        });*/\r\n\r\n        /*invoicesTest(localStorage.getItem(\"userId\")).then((res)=>{  // edited (test transactions) \r\n            // console.log(res.data.server_response.data.result.response);\r\n            // setInvoices(res.data.server_response.data.result.response);\r\n        });*/\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"pe-4 ps-4 pt-2\">\r\n            {/*<DynamicTable columns={columns} data={transactions}/>*/}\r\n\r\n            {/*<Table>\r\n                <thead>\r\n                    <tr>\r\n                        <th scope=\"col\">Order ID</th>\r\n                        <th scope=\"col\">Name</th>\r\n                        <th scope=\"col\">date</th>\r\n                        <th scope=\"col\">Journal Name</th>\r\n                        <th scope=\"col\">amount</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                {transactions.map((item, index) =>\r\n                    <tr \r\n                        key={index} \r\n                        >\r\n                        \r\n                            <td>\r\n                                {item.ref}\r\n                            </td>\r\n                            <td>\r\n                                {item.move_name}\r\n                            </td>\r\n                            <td>\r\n                                {item.date}\r\n                            </td>\r\n                            <td>\r\n                                {item.Journal}\r\n                            </td>\r\n                            <td>\r\n                                {item.amount}\r\n                            </td>\r\n                        \r\n                    </tr>\r\n                )}\r\n                {!transactions.length && <tr><td colSpan={columns.length}>Transactions not found!</td></tr>}\r\n                </tbody>\r\n            </Table>*/}\r\n\r\n            <Form.Control placeholder=\"Order ID...\" style={{ width: \"20%\", float: \"right\", marginTop: \"20px\" }}/>\r\n\r\n            <CustomTable data={transactions} rowsPerPage={15} />\r\n\r\n        </div>\r\n    );\r\n   \r\n};\r\n"]},"metadata":{},"sourceType":"module"}