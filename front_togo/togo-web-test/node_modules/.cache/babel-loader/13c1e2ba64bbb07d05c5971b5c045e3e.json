{"ast":null,"code":"import _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/system/togo-web-test/src/components/AdminPanel/CustomerInfo/UsersMap.jsx\";\n\nimport React, { Component, useState, useEffect } from \"react\";\nimport \"leaflet/dist/leaflet.css\";\nimport { MapContainer, Marker, Popup, TileLayer } from \"react-leaflet\";\nimport L from 'leaflet';\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Badge from \"react-bootstrap/Badge\";\nimport Table from \"react-bootstrap/Table\";\nimport './styles.css';\nimport { GetAllCities, getLocationUsers } from \"../../../APIs/AdminPanelApis\";\nimport { BiLocationPlus } from 'react-icons/bi';\nvar DefaultIcon = L.icon({\n  iconUrl: icon,\n  shadowUrl: iconShadow\n});\nL.Marker.prototype.options.icon = DefaultIcon;\n\nvar UsersMap = function UsersMap(props) {\n  /* const [windowHeight, setWindowHeight] = useState(window.innerHeight);\r\n    useEffect(() => {\r\n      function handleResize() {\r\n          setWindowHeight(window.innerHeight)\r\n      }\r\n        window.addEventListener('resize', handleResize)\r\n  }, []) */\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      btnClients = _useState2[0],\n      setBtnClients = _useState2[1];\n\n  var _useState3 = useState(\"active\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      btnTransporters = _useState4[0],\n      setBtnTransporters = _useState4[1];\n\n  var toggleHandler = function toggleHandler() {\n    if (btnClients === \"active\") {\n      setBtnClients(\"\");\n      setBtnTransporters(\"active\");\n      GetAllCities(\"transporters\").then(function (res) {\n        setAllCities(res.data.cities_list);\n      });\n    } else {\n      setBtnClients(\"active\");\n      setBtnTransporters(\"\");\n      GetAllCities(\"clients\").then(function (res) {\n        setAllCities(res.data.cities_list);\n      });\n    }\n  };\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      allCities = _useState6[0],\n      setAllCities = _useState6[1];\n\n  var _useState7 = useState({\n    \"centerLat\": 0,\n    \"centerLong\": 0\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      centerMarkerPosition = _useState8[0],\n      setCenterMarkerPosition = _useState8[1];\n\n  useEffect(function () {\n    GetAllCities(\"transporters\").then(function (res) {\n      setAllCities(res.data.cities_list); // console.log(res.data);\n      // setCenterMarkerPosition(getCenter(res.data.cities_list));\n      // console.log(getCenter(res.data.cities_list))\n    });\n  }, []);\n\n  var getCenter = function getCenter(points) {\n    var sumX = 0;\n    var sumY = 0;\n    var n = points.length;\n\n    for (var i = 0; i < points.length; i++) {\n      sumX += parseFloat(points[i].LatRegion);\n      sumY += parseFloat(points[i].LongRegion);\n    }\n\n    return {\n      \"centerLat\": 1 / n * sumX,\n      \"centerLong\": 1 / n * sumY\n    };\n  };\n\n  var viewLocationUsers = function viewLocationUsers(cityId) {\n    var type = btnTransporters == \"active\" ? \"transporters\" : \"clients\";\n    getLocationUsers(cityId, type).then(function (res) {\n      console.log(res.data.transporters_list); //setTempLocationUsers(res.data.transporters_list);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-100 d-flex flex-column bg-white p-3 rounded-22 shadow map-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"toggle-users\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-secondary\",\n    className: btnClients + \" toggleButtonLeft\",\n    onClick: toggleHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, \"Clients\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-secondary\",\n    className: btnTransporters + \" toggleButtonRight\",\n    onClick: toggleHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, \"Transporters\")), /*#__PURE__*/React.createElement(MapContainer, {\n    key: JSON.stringify([0, 0]),\n    id: \"mapId\",\n    center: [31.9522, 35.2332],\n    zoom: 9.5,\n    style: {\n      height: \"100%\"\n    },\n    className: \"rounded-22\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TileLayer, {\n    attribution: \"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n    url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }), allCities === null || allCities === void 0 ? void 0 : allCities.map(function (city, index) {\n    return /*#__PURE__*/React.createElement(Marker, {\n      key: index,\n      position: L.latLng(parseFloat(city.LatRegion), parseFloat(city.LongRegion)),\n      onClick: function onClick() {\n        console.log(\"test\");\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 28\n      }\n    }, /*#__PURE__*/React.createElement(Popup, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 25\n      }\n    }, city.Name, \" \", /*#__PURE__*/React.createElement(\"span\", {\n      onClick: function onClick() {\n        return viewLocationUsers(city.id);\n      },\n      className: \"view-users-icon\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"bi bi-people-fill\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 106\n      }\n    }))));\n  })));\n};\n\nexport default UsersMap;","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/AdminPanel/CustomerInfo/UsersMap.jsx"],"names":["React","Component","useState","useEffect","MapContainer","Marker","Popup","TileLayer","L","icon","iconShadow","Button","Modal","Badge","Table","GetAllCities","getLocationUsers","BiLocationPlus","DefaultIcon","iconUrl","shadowUrl","prototype","options","UsersMap","props","btnClients","setBtnClients","btnTransporters","setBtnTransporters","toggleHandler","then","res","setAllCities","data","cities_list","allCities","centerMarkerPosition","setCenterMarkerPosition","getCenter","points","sumX","sumY","n","length","i","parseFloat","LatRegion","LongRegion","viewLocationUsers","cityId","type","console","log","transporters_list","JSON","stringify","height","map","city","index","latLng","Name","id"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport { MapContainer, Marker, Popup, TileLayer } from \"react-leaflet\";\r\nimport L from 'leaflet';\r\nimport icon from 'leaflet/dist/images/marker-icon.png';\r\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Badge from \"react-bootstrap/Badge\";\r\nimport Table from \"react-bootstrap/Table\";\r\nimport './styles.css';\r\nimport { GetAllCities , getLocationUsers } from \"../../../APIs/AdminPanelApis\";\r\nimport { BiLocationPlus } from 'react-icons/bi';\r\n\r\nlet DefaultIcon = L.icon({\r\n    iconUrl: icon,\r\n    shadowUrl: iconShadow\r\n});\r\n\r\nL.Marker.prototype.options.icon = DefaultIcon;\r\n\r\nconst UsersMap = (props) => {\r\n\r\n    /* const [windowHeight, setWindowHeight] = useState(window.innerHeight);\r\n\r\n    useEffect(() => {\r\n        function handleResize() {\r\n            setWindowHeight(window.innerHeight)\r\n        }\r\n\r\n        window.addEventListener('resize', handleResize)\r\n    }, []) */\r\n\r\n    const [btnClients, setBtnClients] = useState(\"\");\r\n    const [btnTransporters, setBtnTransporters] = useState(\"active\");\r\n\r\n    const toggleHandler = () => {\r\n        if (btnClients === \"active\") {\r\n            setBtnClients(\"\");\r\n            setBtnTransporters(\"active\");\r\n            GetAllCities(\"transporters\").then((res) => {\r\n                setAllCities(res.data.cities_list);\r\n            })\r\n        } else {\r\n            setBtnClients(\"active\");\r\n            setBtnTransporters(\"\");\r\n            GetAllCities(\"clients\").then((res) => {\r\n                setAllCities(res.data.cities_list);\r\n            })\r\n        }\r\n    }\r\n\r\n    const [allCities, setAllCities] = useState([]);\r\n    const [centerMarkerPosition, setCenterMarkerPosition] = useState({ \"centerLat\": 0, \"centerLong\": 0 });\r\n\r\n    useEffect(() => {\r\n        GetAllCities(\"transporters\").then((res) => {\r\n            setAllCities(res.data.cities_list);\r\n            // console.log(res.data);\r\n            // setCenterMarkerPosition(getCenter(res.data.cities_list));\r\n            // console.log(getCenter(res.data.cities_list))\r\n        })\r\n    }, [])\r\n\r\n    const getCenter = (points) => {\r\n        let sumX = 0;\r\n        let sumY = 0;\r\n        const n = points.length;\r\n\r\n        for (let i = 0; i < points.length; i++) {\r\n            sumX += parseFloat(points[i].LatRegion);\r\n            sumY += parseFloat(points[i].LongRegion);\r\n        }\r\n\r\n        return { \"centerLat\": (1 / n) * sumX, \"centerLong\": (1 / n) * sumY };\r\n    }\r\n\r\n    const viewLocationUsers = (cityId) => {\r\n        const type = btnTransporters == \"active\" ? \"transporters\" : \"clients\";\r\n\r\n        getLocationUsers(cityId, type).then((res) => {\r\n            console.log(res.data.transporters_list);\r\n            //setTempLocationUsers(res.data.transporters_list);\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"h-100 d-flex flex-column bg-white p-3 rounded-22 shadow map-container\">\r\n            <div className=\"toggle-users\">\r\n                <Button variant=\"outline-secondary\" className={btnClients + \" toggleButtonLeft\"} onClick={toggleHandler} >Clients</Button>\r\n                <Button variant=\"outline-secondary\" className={btnTransporters + \" toggleButtonRight\"} onClick={toggleHandler} >Transporters</Button>\r\n                {/* <div className=\"ms-5 mt-2 \">\r\n                    <i className=\"bi bi-plus-lg h5\">Add New City/Village</i>\r\n                </div> */}\r\n                {/* <BiLocationPlus /> */}\r\n                {/* <Button variant=\"outline-primary\" className=\"d-flex justify-content-between ms-3\" style={{ height: \"35px\" }}>\r\n                    <BiLocationPlus className=\"me-2 h2\" />\r\n                    <span className=\"mt-1\">Add New City/Village</span>\r\n                </Button> */}\r\n            </div>\r\n            <MapContainer\r\n                key={JSON.stringify([0, 0])}\r\n                id=\"mapId\"\r\n                center={[31.9522, 35.2332]}\r\n                zoom={9.5}\r\n                style={{ height: \"100%\" }}\r\n                className=\"rounded-22\"\r\n            >\r\n                <TileLayer\r\n                    attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                    url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                />\r\n\r\n                {allCities?.map((city, index) => {\r\n                    return <Marker key={index} position={L.latLng(parseFloat(city.LatRegion), parseFloat(city.LongRegion))} onClick={() => {\r\n                        console.log(\"test\");\r\n                    }}>\r\n                        <Popup>\r\n                            {city.Name}{\" \"}\r\n                            <span onClick={() => viewLocationUsers(city.id)} className=\"view-users-icon\"><i className=\"bi bi-people-fill\"></i></span>\r\n                        </Popup>\r\n                    </Marker>\r\n                })}\r\n\r\n            </MapContainer>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default UsersMap;\r\n"]},"metadata":{},"sourceType":"module"}