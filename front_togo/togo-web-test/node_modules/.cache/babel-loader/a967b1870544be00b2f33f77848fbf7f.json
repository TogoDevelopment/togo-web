{"ast":null,"code":"import _slicedToArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import translate from\"../i18n/translate\";import React,{useEffect,useState}from\"react\";import{Button,Col,Form,Modal,Row,FloatingLabel,Spinner}from\"react-bootstrap\";import{CreateAddressReq,GetCityRegion}from\"./APIs/OrdersAPIs\";export default function CreateAddress(_ref){var _cities$map;var onSuccess=_ref.onSuccess,children=_ref.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cities=_useState4[0],setCities=_useState4[1];useEffect(function(){//if(show === true) {\nGetCityRegion().then(function(res){setCities(res.data.server_response);});//}\n},[]);var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),validated=_useState8[0],setValidated=_useState8[1];return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){setShow(true);}},children),/*#__PURE__*/React.createElement(Modal,{show:show,onHide:function onHide(){setShow(false);},centered:true,animation:false,backdrop:\"static\",fullscreen:true},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,translate(\"ORDERS.ADD_ADDRESS\"))),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(Form,{id:\"addressForm\",validated:validated,noValidate:true/* ref={formRef} */,onSubmit:function onSubmit(event){event.preventDefault();event.stopPropagation();var formData=new FormData(event.target),formDataObj=Object.fromEntries(formData.entries());var form=event.currentTarget;if(form.checkValidity()===true){setLoading(true);CreateAddressReq(formDataObj).then(function(){setLoading(false);setShow(false);onSuccess&&onSuccess();});}setValidated(true);console.log(formDataObj);}},/*#__PURE__*/React.createElement(FloatingLabel,{className:\"mb-3\",controlId:\"formBasicEmail\",label:translate(\"ORDERS.ADDRESS_NAME\")},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"...\",name:\"placename\",required:true}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please add place name\")),/*#__PURE__*/React.createElement(FloatingLabel,{className:\"mb-3\",controlId:\"userTel\",label:translate(\"ORDERS.ADDRESS_PHONE\")},/*#__PURE__*/React.createElement(Form.Control,{type:\"tel\",placeholder:\"...\",name:\"phone\",pattern:\"^05[0-9]{8}?$\",required:true}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please enter a valid phone number example 0568000000\")),/*#__PURE__*/React.createElement(FloatingLabel,{className:\"mb-3\",controlId:\"AddressCity\",label:translate(\"ORDERS.ADDRESS_CITY\")},/*#__PURE__*/React.createElement(Form.Select,{name:\"city\"},cities===null||cities===void 0?void 0:(_cities$map=cities.map)===null||_cities$map===void 0?void 0:_cities$map.call(cities,function(city){return/*#__PURE__*/React.createElement(\"option\",{key:city.IdCity,value:city.IdCity},city.Name);}))),/*#__PURE__*/React.createElement(FloatingLabel,{className:\"mb-3\",controlId:\"userAddress\",label:translate(\"ORDERS.ADDRESS\")},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"...\",name:\"address\"})),/*#__PURE__*/React.createElement(FloatingLabel,{className:\"mb-3\",controlId:\"addressInfo\",label:translate(\"ORDERS.ADDRESS_INFO\")},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"...\",name:\"addressinfo\"})),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:true},/*#__PURE__*/React.createElement(FloatingLabel,{className:\"mb-3\",controlId:\"addCountry\",label:translate(\"ORDERS.ADDRESS_COUNTRY\")},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"...\",name:\"country\"}))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FloatingLabel,{className:\"mb-3\",controlId:\"addressCode\",label:translate(\"ORDERS.ADDRESS_CODE\")},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"...\",name:\"zipcode\"})))),/*#__PURE__*/React.createElement(Form.Check,{type:\"switch\",id:\"custom-switch\",label:translate(\"ORDERS.ADDRESS_SHARED\"),name:\"isShared\"}),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",type:\"submit\"},loading&&/*#__PURE__*/React.createElement(Spinner,{size:\"sm\",className:\"me-1\",animation:\"border\",variant:\"light\"}),translate(\"GENERAL.PROCEED\"))))));}","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/CreateAddress.jsx"],"names":["translate","React","useEffect","useState","Button","Col","Form","Modal","Row","FloatingLabel","Spinner","CreateAddressReq","GetCityRegion","CreateAddress","onSuccess","children","show","setShow","cities","setCities","then","res","data","server_response","loading","setLoading","validated","setValidated","event","preventDefault","stopPropagation","formData","FormData","target","formDataObj","Object","fromEntries","entries","form","currentTarget","checkValidity","console","log","map","city","IdCity","Name"],"mappings":"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","sourcesContent":["import translate from \"../i18n/translate\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Button, Col, Form, Modal, Row, FloatingLabel, Spinner } from \"react-bootstrap\";\r\nimport { CreateAddressReq, GetCityRegion } from \"./APIs/OrdersAPIs\";\r\n\r\nexport default function CreateAddress({onSuccess, children}){\r\n\r\n    const [show, setShow] = useState(false);\r\n    const [cities, setCities] = useState([]);\r\n\r\n    useEffect(() => {\r\n        //if(show === true) {\r\n            GetCityRegion().then((res) => {\r\n                setCities(res.data.server_response);\r\n            });\r\n        //}\r\n    }, []);\r\n    \r\n    const [loading, setLoading] = useState(false);\r\n    const [validated, setValidated] = useState(false);\r\n\r\n    return (\r\n        <div>\r\n            <span onClick={()=>{\r\n                setShow(true);\r\n            }}>\r\n            \r\n                {children}\r\n            </span>\r\n            <Modal show={show} onHide={()=>{setShow(false)}} centered animation={false} backdrop=\"static\" fullscreen>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>{translate(\"ORDERS.ADD_ADDRESS\")}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form id=\"addressForm\" validated={validated} noValidate /* ref={formRef} */ onSubmit={(event)=>{\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                        const formData = new FormData(event.target),\r\n                        formDataObj = Object.fromEntries(formData.entries())\r\n                        const form = event.currentTarget;\r\n                        if (form.checkValidity() === true) {\r\n                            setLoading(true);\r\n                            CreateAddressReq(formDataObj).then(()=>{\r\n                                setLoading(false);\r\n                                setShow(false);\r\n                                onSuccess && onSuccess();\r\n                            });\r\n                        }\r\n                        setValidated(true);\r\n                        console.log(formDataObj);\r\n                        \r\n                    }}>\r\n                        \r\n                        <FloatingLabel className=\"mb-3\" controlId=\"formBasicEmail\" label={translate(\"ORDERS.ADDRESS_NAME\")}>\r\n                            <Form.Control type=\"text\" placeholder=\"...\" name=\"placename\" required />\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                Please add place name\r\n                            </Form.Control.Feedback>\r\n                        </FloatingLabel>\r\n                        \r\n                        <FloatingLabel className=\"mb-3\" controlId=\"userTel\" label={translate(\"ORDERS.ADDRESS_PHONE\")}>\r\n                            <Form.Control type=\"tel\" placeholder=\"...\" name=\"phone\" pattern=\"^05[0-9]{8}?$\" required/>\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                Please enter a valid phone number example 0568000000\r\n                            </Form.Control.Feedback>\r\n                        </FloatingLabel>\r\n                        \r\n                        <FloatingLabel className=\"mb-3\" controlId=\"AddressCity\" label={translate(\"ORDERS.ADDRESS_CITY\")}>\r\n                            <Form.Select name=\"city\">\r\n                                {cities?.map?.((city)=>{\r\n                                    return <option key={city.IdCity} value={city.IdCity}>{city.Name}</option>\r\n                                })}\r\n                            </Form.Select>\r\n                        </FloatingLabel>\r\n\r\n                        <FloatingLabel className=\"mb-3\" controlId=\"userAddress\" label={translate(\"ORDERS.ADDRESS\")}>\r\n                            <Form.Control type=\"text\" placeholder=\"...\" name=\"address\" />\r\n                        </FloatingLabel>\r\n\r\n                        <FloatingLabel className=\"mb-3\" controlId=\"addressInfo\" label={translate(\"ORDERS.ADDRESS_INFO\")}>\r\n                            <Form.Control type=\"text\" placeholder=\"...\" name=\"addressinfo\" />\r\n                        </FloatingLabel>\r\n                        <Row>\r\n                            <Col md>\r\n                            <FloatingLabel className=\"mb-3\" controlId=\"addCountry\" label={translate(\"ORDERS.ADDRESS_COUNTRY\")}>\r\n                                <Form.Control type=\"text\" placeholder=\"...\" name=\"country\" />\r\n                            </FloatingLabel>\r\n                            </Col>\r\n                            <Col>\r\n                            <FloatingLabel className=\"mb-3\" controlId=\"addressCode\" label={translate(\"ORDERS.ADDRESS_CODE\")}>\r\n                                <Form.Control type=\"text\" placeholder=\"...\" name=\"zipcode\" />\r\n                            </FloatingLabel>\r\n                            </Col>\r\n                        </Row>\r\n                        \r\n                        <Form.Check \r\n                            type=\"switch\"\r\n                            id=\"custom-switch\"\r\n                            label={translate(\"ORDERS.ADDRESS_SHARED\")}\r\n                            name=\"isShared\"\r\n                        />\r\n\r\n                        <Button variant=\"primary\" type=\"submit\">\r\n                            {loading && <Spinner size=\"sm\" className=\"me-1\" animation=\"border\" variant=\"light\" />}\r\n\r\n                            {translate(\"GENERAL.PROCEED\")}\r\n                        </Button>\r\n                    </Form>\r\n                </Modal.Body>\r\n            </Modal>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}