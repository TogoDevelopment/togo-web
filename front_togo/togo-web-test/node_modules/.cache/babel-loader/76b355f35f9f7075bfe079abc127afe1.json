{"ast":null,"code":"import { useEffect, useCallback } from 'react';\nimport helper from '../DOMHelper';\nimport { getDOMNode, KEY_VALUES } from './';\nfunction isLeftClickEvent(event) {\n  return (event === null || event === void 0 ? void 0 : event.button) === 0;\n}\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event !== null && event !== void 0 && event.shiftKey);\n}\n\n/**\n * A hook that listens to the document click event and closes the overlay.\n * @param onRootClose\n * @param param1\n * @todo Allow different behaviors based on whether clicked element is focusable\n */\nfunction useRootClose(onRootClose, _ref) {\n  var disabled = _ref.disabled,\n    triggerTarget = _ref.triggerTarget,\n    overlayTarget = _ref.overlayTarget,\n    _ref$listenEscape = _ref.listenEscape,\n    listenEscape = _ref$listenEscape === void 0 ? true : _ref$listenEscape;\n  var handleDocumentKeyUp = useCallback(function (event) {\n    if (listenEscape && event.key === KEY_VALUES.ESC) {\n      onRootClose === null || onRootClose === void 0 ? void 0 : onRootClose(event);\n    }\n  }, [listenEscape, onRootClose]);\n  var handleDocumentMouseDown = useCallback(function (event) {\n    var triggerElement = getDOMNode(triggerTarget);\n    var overlayElement = getDOMNode(overlayTarget); // Check if the clicked element is a trigger.\n\n    if (triggerElement && helper.contains(triggerElement, event.target)) {\n      return;\n    } // Check if the clicked element is a overlay.\n\n    if (overlayElement && helper.contains(overlayElement, event.target)) {\n      return;\n    }\n    if (isModifiedEvent(event) || !isLeftClickEvent(event)) {\n      return;\n    }\n    onRootClose === null || onRootClose === void 0 ? void 0 : onRootClose(event);\n  }, [onRootClose, triggerTarget, overlayTarget]);\n  useEffect(function () {\n    var currentTarget = getDOMNode(triggerTarget);\n    if (disabled || !currentTarget) return;\n    var doc = helper.ownerDocument(currentTarget);\n    var onDocumentMouseDownListener = helper.on(doc, 'mousedown', handleDocumentMouseDown, true);\n    var onDocumentKeyupListener = helper.on(doc, 'keyup', handleDocumentKeyUp);\n    return function () {\n      onDocumentMouseDownListener === null || onDocumentMouseDownListener === void 0 ? void 0 : onDocumentMouseDownListener.off();\n      onDocumentKeyupListener === null || onDocumentKeyupListener === void 0 ? void 0 : onDocumentKeyupListener.off();\n    };\n  }, [triggerTarget, disabled, onRootClose, handleDocumentMouseDown, handleDocumentKeyUp]);\n}\nexport default useRootClose;","map":{"version":3,"names":["useEffect","useCallback","helper","getDOMNode","KEY_VALUES","isLeftClickEvent","event","button","isModifiedEvent","metaKey","altKey","ctrlKey","shiftKey","useRootClose","onRootClose","_ref","disabled","triggerTarget","overlayTarget","_ref$listenEscape","listenEscape","handleDocumentKeyUp","key","ESC","handleDocumentMouseDown","triggerElement","overlayElement","contains","target","currentTarget","doc","ownerDocument","onDocumentMouseDownListener","on","onDocumentKeyupListener","off"],"sources":["/home/system/togo-web-test/node_modules/rsuite/esm/utils/useRootClose.js"],"sourcesContent":["import { useEffect, useCallback } from 'react';\nimport helper from '../DOMHelper';\nimport { getDOMNode, KEY_VALUES } from './';\n\nfunction isLeftClickEvent(event) {\n  return (event === null || event === void 0 ? void 0 : event.button) === 0;\n}\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event !== null && event !== void 0 && event.shiftKey);\n}\n\n/**\n * A hook that listens to the document click event and closes the overlay.\n * @param onRootClose\n * @param param1\n * @todo Allow different behaviors based on whether clicked element is focusable\n */\nfunction useRootClose(onRootClose, _ref) {\n  var disabled = _ref.disabled,\n      triggerTarget = _ref.triggerTarget,\n      overlayTarget = _ref.overlayTarget,\n      _ref$listenEscape = _ref.listenEscape,\n      listenEscape = _ref$listenEscape === void 0 ? true : _ref$listenEscape;\n  var handleDocumentKeyUp = useCallback(function (event) {\n    if (listenEscape && event.key === KEY_VALUES.ESC) {\n      onRootClose === null || onRootClose === void 0 ? void 0 : onRootClose(event);\n    }\n  }, [listenEscape, onRootClose]);\n  var handleDocumentMouseDown = useCallback(function (event) {\n    var triggerElement = getDOMNode(triggerTarget);\n    var overlayElement = getDOMNode(overlayTarget); // Check if the clicked element is a trigger.\n\n    if (triggerElement && helper.contains(triggerElement, event.target)) {\n      return;\n    } // Check if the clicked element is a overlay.\n\n\n    if (overlayElement && helper.contains(overlayElement, event.target)) {\n      return;\n    }\n\n    if (isModifiedEvent(event) || !isLeftClickEvent(event)) {\n      return;\n    }\n\n    onRootClose === null || onRootClose === void 0 ? void 0 : onRootClose(event);\n  }, [onRootClose, triggerTarget, overlayTarget]);\n  useEffect(function () {\n    var currentTarget = getDOMNode(triggerTarget);\n    if (disabled || !currentTarget) return;\n    var doc = helper.ownerDocument(currentTarget);\n    var onDocumentMouseDownListener = helper.on(doc, 'mousedown', handleDocumentMouseDown, true);\n    var onDocumentKeyupListener = helper.on(doc, 'keyup', handleDocumentKeyUp);\n    return function () {\n      onDocumentMouseDownListener === null || onDocumentMouseDownListener === void 0 ? void 0 : onDocumentMouseDownListener.off();\n      onDocumentKeyupListener === null || onDocumentKeyupListener === void 0 ? void 0 : onDocumentKeyupListener.off();\n    };\n  }, [triggerTarget, disabled, onRootClose, handleDocumentMouseDown, handleDocumentKeyUp]);\n}\n\nexport default useRootClose;"],"mappings":"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"},"metadata":{},"sourceType":"module"}