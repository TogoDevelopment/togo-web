{"ast":null,"code":"import _slicedToArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import{Button,Dropdown,Form,FormControl,InputGroup,Spinner}from\"react-bootstrap\";import{useHistory}from\"react-router-dom\";import{GetLicenceAndIdentity,SetTransporterPersonalInfo}from\"../APIs/LoginAPIs\";export default function TransporterPersonalInfo(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loadingSubmit=_useState2[0],setLoadingSubmit=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),licenses=_useState4[0],setLicenses=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),selectedLicense=_useState6[0],setSelectedLicense=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),places=_useState8[0],setPlaces=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),selectedPlace=_useState10[0],setSelectedPlace=_useState10[1];useEffect(function(){GetLicenceAndIdentity().then(function(res){setLicenses(res.data.license);setSelectedLicense(res.data.license[0]);setPlaces(res.data.place);setSelectedPlace(res.data.place[0]);});},[]);var licenceImgRef=useRef();var personalImgCode=useRef();function onFileChange(event){var reader=new FileReader();var fileInputName=event.target.name;reader.onload=function(e){var dataUri=e.target.result;var base64=dataUri.substr(dataUri.indexOf(\",\")+1);if(fileInputName===\"personalImg\"){personalImgCode.current=base64;}else{licenceImgRef.current=base64;}};if(event.currentTarget.files[0]){reader.readAsDataURL(event.currentTarget.files[0]);}}return/*#__PURE__*/React.createElement(\"div\",{className:\"mainbg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"h1 p-3 text-center togo-button\"},\"Create account / transporter\"),/*#__PURE__*/React.createElement(Form,{className:\"m-auto w-75\",onSubmit:function onSubmit(event){event.preventDefault();SetTransporterPersonalInfo(event.target,selectedPlace.IdPlace,selectedLicense.IdTypeLicence,personalImgCode.current,licenceImgRef.current);// console.log(event.target[0].value)\n// console.log(event.target.elements.FirstName.value)\n// console.log(event.target.FirstName.value)\n}},/*#__PURE__*/React.createElement(\"p\",{className:\"text-center togo-border h4\"},\"Personal information\"),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"transName\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Name\"),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{type:\"text\",className:\"bg-white rounded-22\",name:\"FirstName\"}))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"transFamilyName\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Family name\"),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{type:\"text\",className:\"bg-white rounded-22\",name:\"LastName\"}))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"PlaceIdentity\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Place of issuing identity\"),/*#__PURE__*/React.createElement(\"div\",{className:\"togo-outling mb-2\"},/*#__PURE__*/React.createElement(Dropdown,{className:\"rounded-22 bg-white\",onSelect:function onSelect(eve){setSelectedLicense(licenses[eve]);}},/*#__PURE__*/React.createElement(Dropdown.Toggle,{variant:\"\",className:\"w-100 text-start d-flex align-items-center shadow-none\"},/*#__PURE__*/React.createElement(\"div\",{style:{width:\"97%\"}},selectedLicense===null||selectedLicense===void 0?void 0:selectedLicense.TypeName)),/*#__PURE__*/React.createElement(Dropdown.Menu,{className:\"w-100\"},licenses.map(function(licence,index){return/*#__PURE__*/React.createElement(Dropdown.Item,{eventKey:index,key:index,className:\"d-flex\"},\"\".concat(licence.TypeName));}))))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"transIDNumber\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"ID Number\"),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{maxLength:9,onInput:function onInput(ev){ev.target.value=ev.target.value.replace(/[^0-9]/gi,\"\");},type:\"text\",className:\"bg-white rounded-22\",name:\"IDNumber\"}))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"transLicenceNumber\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Driver licence number\"),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{type:\"text\",className:\"bg-white rounded-22\",name:\"LicenceNumber\"}))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"transLicenceType\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Driver licence type\"),/*#__PURE__*/React.createElement(\"div\",{className:\"togo-outling mb-2\"},/*#__PURE__*/React.createElement(Dropdown,{className:\"rounded-22 bg-white\",onSelect:function onSelect(eve){setSelectedPlace(places[eve]);}},/*#__PURE__*/React.createElement(Dropdown.Toggle,{variant:\"\",className:\"w-100 text-start d-flex align-items-center shadow-none\"},/*#__PURE__*/React.createElement(\"div\",{style:{width:\"97%\"}},selectedPlace===null||selectedPlace===void 0?void 0:selectedPlace.NamePlace)),/*#__PURE__*/React.createElement(Dropdown.Menu,{className:\"w-100\"},places.map(function(place,index){return/*#__PURE__*/React.createElement(Dropdown.Item,{eventKey:index,key:index,className:\"d-flex\"},\"\".concat(place.NamePlace));}))))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"transEmail\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Email\"),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{type:\"text\",className:\"bg-white rounded-22\",name:\"Email\"}))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"transAccountName\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Account name\"),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{type:\"text\",className:\"bg-white rounded-22\",name:\"AccountName\"}))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formGridEmail\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{type:\"file\",className:\"bg-white rounded-22\",accept:\"image/*\",name:\"personalImg\",onChange:onFileChange}))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formGridEmail\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{type:\"file\",className:\"bg-white rounded-22\",accept:\"image/*\",name:\"licenseImg\",onChange:onFileChange}))),/*#__PURE__*/React.createElement(Button,{variant:\"\",type:\"submit\",className:\"d-block m-auto rounded-22 togo-button w-25\",disabled:loadingSubmit// onClick={(event)=>{\n//     setLoadingSubmit(true);\n//     // SetTransporterPersonalInfo(\n//     // ).then((res) => {\n//     //     setLoadingSubmit(false);\n//     //     history.push(\"/business-info\")\n//     // });\n// }}\n},loadingSubmit&&/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",size:\"sm\"}),\"Accept\")));}","map":null,"metadata":{},"sourceType":"module"}