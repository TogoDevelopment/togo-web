{"ast":null,"code":"import _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/system/togo-web-test/src/components/OrdersManager/FinalizeOrder.jsx\";\nimport React, { useState } from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport InputGroup from \"react-bootstrap/InputGroup\";\nimport FormControl from \"react-bootstrap/FormControl\";\nimport { finalizeTrip, confirmFinalizedTrip } from \"../APIs/OrdersAPIs\";\nimport translate from \"../../i18n/translate\";\nimport { toastMessage } from \"../../Actions/GeneralActions\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nexport function FinalizeOrder(_ref) {\n  var orderId = _ref.orderId;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      show = _useState2[0],\n      setShow = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      verificationCode = _useState4[0],\n      setVerificationCode = _useState4[1];\n\n  var history = useHistory();\n  var dispatch = useDispatch();\n\n  var handleClose = function handleClose() {\n    setShow(false);\n  };\n\n  var handleShow = function handleShow() {\n    return setShow(true);\n  };\n\n  var handleChange = function handleChange(e) {\n    setVerificationCode(e.target.value);\n  };\n\n  var finalizeOrder = function finalizeOrder() {\n    handleShow();\n    finalizeTrip(orderId);\n  };\n\n  var send = function send(lat, long) {\n    confirmFinalizedTrip(orderId, verificationCode, lat, long).then(function (resp) {\n      dispatch(toastMessage(\"ORDERS.SUCCESS_FINALIZE_ORDER\", \"GENERAL.SUCCESS\", \"success\"));\n      history.goBack();\n    }).catch(function (err) {\n      return dispatch(toastMessage(\"ORDERS.ERR_FINALIZE_ORDER\", \"GENERAL.ERROR\"));\n    });\n  };\n\n  var confirmFinalizeOrder = function confirmFinalizeOrder() {\n    if (verificationCode) {\n      navigator.geolocation.getCurrentPosition(function (pos) {\n        send(pos.coords.latitude, pos.coords.longitude);\n      }, function () {\n        send(0, 0);\n      });\n    }\n\n    handleClose();\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    className: \"me-1\",\n    onClick: finalizeOrder,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"16\",\n    height: \"16\",\n    fill: \"currentColor\",\n    className: \"bi bi-check-all\",\n    viewBox: \"0 0 16 16\",\n    style: {\n      display: \"inline-block\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  })), translate(\"ORDER_DETAILS.FINALIZE_ORDER\"), \" \"), /*#__PURE__*/React.createElement(Modal, {\n    show: show,\n    onHide: handleClose,\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, translate(\"ORDER_DETAILS.FINALIZE_ORDER\"), orderId)), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputGroup, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(InputGroup.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 25\n    }\n  }, translate(\"ORDER_DETAILS.VERIFICATION_CODE\")), /*#__PURE__*/React.createElement(FormControl, {\n    value: verificationCode,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, translate(\"GENERAL.CLOSE\")), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onClick: confirmFinalizeOrder,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, translate(\"GENERAL.PROCEED\")))));\n}","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/OrdersManager/FinalizeOrder.jsx"],"names":["React","useState","Button","Modal","InputGroup","FormControl","finalizeTrip","confirmFinalizedTrip","translate","toastMessage","useHistory","useDispatch","FinalizeOrder","orderId","show","setShow","verificationCode","setVerificationCode","history","dispatch","handleClose","handleShow","handleChange","e","target","value","finalizeOrder","send","lat","long","then","resp","goBack","catch","err","confirmFinalizeOrder","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","display"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport {finalizeTrip, confirmFinalizedTrip} from \"../APIs/OrdersAPIs\";\r\nimport translate from \"../../i18n/translate\";\r\nimport {toastMessage} from \"../../Actions/GeneralActions\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {useDispatch} from \"react-redux\";\r\n\r\nexport function FinalizeOrder({orderId}) {\r\n    const [show, setShow] = useState(false);\r\n    const [verificationCode, setVerificationCode] = useState(\"\");\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n\r\n    const handleClose = () => {\r\n        setShow(false);\r\n    };\r\n    const handleShow = () => setShow(true);\r\n\r\n    const handleChange = (e) => {\r\n        setVerificationCode(e.target.value);\r\n    };\r\n\r\n    const finalizeOrder = () => {\r\n        handleShow();\r\n        finalizeTrip(orderId);\r\n    };\r\n    const send = (lat, long) => {\r\n        confirmFinalizedTrip(orderId, verificationCode, lat, long)\r\n            .then(resp => {\r\n                dispatch(toastMessage(\"ORDERS.SUCCESS_FINALIZE_ORDER\", \"GENERAL.SUCCESS\", \"success\"));\r\n                history.goBack();\r\n            })\r\n            .catch(err => dispatch(toastMessage(\"ORDERS.ERR_FINALIZE_ORDER\", \"GENERAL.ERROR\")));\r\n        }\r\n    const confirmFinalizeOrder = () => {\r\n        if (verificationCode) {\r\n            navigator.geolocation.getCurrentPosition((pos)=>{\r\n                send(pos.coords.latitude, pos.coords.longitude);\r\n            }, ()=>{\r\n                send(0, 0);\r\n            })\r\n        }\r\n        handleClose();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button\r\n                variant=\"primary\"\r\n                className=\"me-1\"\r\n                onClick={finalizeOrder}\r\n            >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-check-all\" viewBox=\"0 0 16 16\" style={{display: \"inline-block\"}}>\r\n                    <path d=\"M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z\"/>\r\n                </svg>\r\n                {translate(\"ORDER_DETAILS.FINALIZE_ORDER\")}{\" \"}\r\n            </Button>\r\n            <Modal show={show} onHide={handleClose} centered>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>{translate(\"ORDER_DETAILS.FINALIZE_ORDER\")}{orderId}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <InputGroup className=\"mb-3\">\r\n                        <InputGroup.Text>{translate(\"ORDER_DETAILS.VERIFICATION_CODE\")}</InputGroup.Text>\r\n                        <FormControl value={verificationCode} onChange={handleChange} />\r\n                    </InputGroup>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={handleClose}>\r\n                        {translate(\"GENERAL.CLOSE\")}\r\n                    </Button>\r\n                    <Button variant=\"primary\" onClick={confirmFinalizeOrder}>\r\n                        {translate(\"GENERAL.PROCEED\")}\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}