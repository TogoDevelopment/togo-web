{"ast":null,"code":"/* eslint-disable no-nested-ternary */\nimport { isFunction, isNumber, __DEV__ } from \"./assertion\";\nexport function runIfFn(valueOrFn) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  return isFunction(valueOrFn) ? valueOrFn.apply(void 0, args) : valueOrFn;\n}\nexport function callAllHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n  return function func(event) {\n    fns.some(function (fn) {\n      fn == null ? void 0 : fn(event);\n      return event == null ? void 0 : event.defaultPrevented;\n    });\n  };\n}\nexport function callAll() {\n  for (var _len3 = arguments.length, fns = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    fns[_key3] = arguments[_key3];\n  }\n  return function mergedFn(arg) {\n    fns.forEach(function (fn) {\n      fn == null ? void 0 : fn(arg);\n    });\n  };\n}\nexport var compose = function compose(fn1) {\n  for (var _len4 = arguments.length, fns = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    fns[_key4 - 1] = arguments[_key4];\n  }\n  return fns.reduce(function (f1, f2) {\n    return function () {\n      return f1(f2.apply(void 0, arguments));\n    };\n  }, fn1);\n};\nexport function once(fn) {\n  var result;\n  return function func() {\n    if (fn) {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n      result = fn.apply(this, args);\n      fn = null;\n    }\n    return result;\n  };\n}\nexport var noop = function noop() {};\nexport var warn = once(function (options) {\n  return function () {\n    var condition = options.condition,\n      message = options.message;\n    if (condition && __DEV__) {\n      console.warn(message);\n    }\n  };\n});\nexport var error = once(function (options) {\n  return function () {\n    var condition = options.condition,\n      message = options.message;\n    if (condition && __DEV__) {\n      console.error(message);\n    }\n  };\n});\nexport var pipe = function pipe() {\n  for (var _len6 = arguments.length, fns = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    fns[_key6] = arguments[_key6];\n  }\n  return function (v) {\n    return fns.reduce(function (a, b) {\n      return b(a);\n    }, v);\n  };\n};\nvar distance1D = function distance1D(a, b) {\n  return Math.abs(a - b);\n};\nvar isPoint = function isPoint(point) {\n  return \"x\" in point && \"y\" in point;\n};\nexport function distance(a, b) {\n  if (isNumber(a) && isNumber(b)) {\n    return distance1D(a, b);\n  }\n  if (isPoint(a) && isPoint(b)) {\n    var xDelta = distance1D(a.x, b.x);\n    var yDelta = distance1D(a.y, b.y);\n    return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2));\n  }\n  return 0;\n}","map":{"version":3,"names":["isFunction","isNumber","__DEV__","runIfFn","valueOrFn","_len","arguments","length","args","Array","_key","apply","callAllHandlers","_len2","fns","_key2","func","event","some","fn","defaultPrevented","callAll","_len3","_key3","mergedFn","arg","forEach","compose","fn1","_len4","_key4","reduce","f1","f2","once","result","_len5","_key5","noop","warn","options","condition","message","console","error","pipe","_len6","_key6","v","a","b","distance1D","Math","abs","isPoint","point","distance","xDelta","x","yDelta","y","sqrt","pow"],"sources":["../../src/function.ts"],"sourcesContent":["/* eslint-disable no-nested-ternary */\nimport { isFunction, isNumber, __DEV__ } from \"./assertion\"\nimport { AnyFunction, FunctionArguments } from \"./types\"\n\nexport function runIfFn<T, U>(\n  valueOrFn: T | ((...fnArgs: U[]) => T),\n  ...args: U[]\n): T {\n  return isFunction(valueOrFn) ? valueOrFn(...args) : valueOrFn\n}\n\nexport function callAllHandlers<T extends (event: any) => void>(\n  ...fns: (T | undefined)[]\n) {\n  return function func(event: FunctionArguments<T>[0]) {\n    fns.some((fn) => {\n      fn?.(event)\n      return event?.defaultPrevented\n    })\n  }\n}\n\nexport function callAll<T extends AnyFunction>(...fns: (T | undefined)[]) {\n  return function mergedFn(arg: FunctionArguments<T>[0]) {\n    fns.forEach((fn) => {\n      fn?.(arg)\n    })\n  }\n}\n\nexport const compose = <T>(\n  fn1: (...args: T[]) => T,\n  ...fns: Array<(...args: T[]) => T>\n) => fns.reduce((f1, f2) => (...args) => f1(f2(...args)), fn1)\n\nexport function once<T extends AnyFunction>(fn?: T | null) {\n  let result: any\n\n  return function func(this: any, ...args: Parameters<T>) {\n    if (fn) {\n      result = fn.apply(this, args)\n      fn = null\n    }\n\n    return result\n  }\n}\n\nexport const noop = () => {}\n\ntype MessageOptions = {\n  condition: boolean\n  message: string\n}\n\nexport const warn = once((options: MessageOptions) => () => {\n  const { condition, message } = options\n  if (condition && __DEV__) {\n    console.warn(message)\n  }\n})\n\nexport const error = once((options: MessageOptions) => () => {\n  const { condition, message } = options\n  if (condition && __DEV__) {\n    console.error(message)\n  }\n})\n\nexport const pipe = <R>(...fns: Array<(a: R) => R>) => (v: R) =>\n  fns.reduce((a, b) => b(a), v)\n\nconst distance1D = (a: number, b: number) => Math.abs(a - b)\ntype Point = { x: number; y: number }\n\nconst isPoint = (point: any): point is { x: number; y: number } =>\n  \"x\" in point && \"y\" in point\n\nexport function distance<P extends Point | number>(a: P, b: P) {\n  if (isNumber(a) && isNumber(b)) {\n    return distance1D(a, b)\n  }\n  if (isPoint(a) && isPoint(b)) {\n    const xDelta = distance1D(a.x, b.x)\n    const yDelta = distance1D(a.y, b.y)\n    return Math.sqrt(xDelta ** 2 + yDelta ** 2)\n  }\n  return 0\n}\n"],"mappings":"AAAA;AACA,SAASA,UAAT,EAAqBC,QAArB,EAA+BC,OAA/B,QAA8C,aAA9C;AAGA,OAAO,SAASC,OAATA,CACLC,SADK,EAGF;EAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EADAC,IACA,OAAAC,KAAA,CAAAJ,IAAA,OAAAA,IAAA,WAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;IADAF,IACA,CAAAE,IAAA,QAAAJ,SAAA,CAAAI,IAAA;EAAA;EACH,OAAOV,UAAU,CAACI,SAAD,CAAV,GAAwBA,SAAS,CAAAO,KAAA,SAAIH,IAAJ,CAAjC,GAA6CJ,SAApD;AACD;AAED,OAAO,SAASQ,eAATA,CAAA,EAEL;EAAA,SAAAC,KAAA,GAAAP,SAAA,CAAAC,MAAA,EADGO,GACH,OAAAL,KAAA,CAAAI,KAAA,GAAAE,KAAA,MAAAA,KAAA,GAAAF,KAAA,EAAAE,KAAA;IADGD,GACH,CAAAC,KAAA,IAAAT,SAAA,CAAAS,KAAA;EAAA;EACA,OAAO,SAASC,IAATA,CAAcC,KAAd,EAA8C;IACnDH,GAAG,CAACI,IAAJ,CAAU,UAAAC,EAAD,EAAQ;MACfA,EAAE,QAAF,YAAAA,EAAE,CAAGF,KAAH,CAAF;MACA,OAAOA,KAAP,oBAAOA,KAAK,CAAEG,gBAAd;IACD,CAHD;EAID,CALD;AAMD;AAED,OAAO,SAASC,OAATA,CAAA,EAAmE;EAAA,SAAAC,KAAA,GAAAhB,SAAA,CAAAC,MAAA,EAAxBO,GAAwB,OAAAL,KAAA,CAAAa,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;IAAxBT,GAAwB,CAAAS,KAAA,IAAAjB,SAAA,CAAAiB,KAAA;EAAA;EACxE,OAAO,SAASC,QAATA,CAAkBC,GAAlB,EAAgD;IACrDX,GAAG,CAACY,OAAJ,CAAa,UAAAP,EAAD,EAAQ;MAClBA,EAAE,QAAF,YAAAA,EAAE,CAAGM,GAAH,CAAF;IACD,CAFD;EAGD,CAJD;AAKD;AAED,OAAO,IAAME,OAAO,GAAG,SAAVA,OAAUA,CACrBC,GADqB;EAAA,SAAAC,KAAA,GAAAvB,SAAA,CAAAC,MAAA,EAElBO,GAFkB,OAAAL,KAAA,CAAAoB,KAAA,OAAAA,KAAA,WAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;IAElBhB,GAFkB,CAAAgB,KAAA,QAAAxB,SAAA,CAAAwB,KAAA;EAAA;EAAA,OAGlBhB,GAAG,CAACiB,MAAJ,CAAW,UAACC,EAAD,EAAKC,EAAL;IAAA,OAAY;MAAA,OAAaD,EAAE,CAACC,EAAE,CAAAtB,KAAA,SAACL,SAAD,CAAH,CAAf;IAAA,CAAvB;EAAA,GAAqDsB,GAArD,CAHkB;AAAA,CAAhB;AAKP,OAAO,SAASM,IAATA,CAAqCf,EAArC,EAAoD;EACzD,IAAIgB,MAAJ;EAEA,OAAO,SAASnB,IAATA,CAAA,EAAiD;IACtD,IAAIG,EAAJ,EAAQ;MAAA,SAAAiB,KAAA,GAAA9B,SAAA,CAAAC,MAAA,EADyBC,IACzB,OAAAC,KAAA,CAAA2B,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;QADyB7B,IACzB,CAAA6B,KAAA,IAAA/B,SAAA,CAAA+B,KAAA;MAAA;MACNF,MAAM,GAAGhB,EAAE,CAACR,KAAH,CAAS,IAAT,EAAeH,IAAf,CAAT;MACAW,EAAE,GAAG,IAAL;IACD;IAED,OAAOgB,MAAP;EACD,CAPD;AAQD;AAED,OAAO,IAAMG,IAAI,GAAG,SAAPA,IAAIA,CAAA,EAAS,CAAE,CAArB;AAOP,OAAO,IAAMC,IAAI,GAAGL,IAAI,CAAE,UAAAM,OAAD;EAAA,OAA6B,YAAM;IAC1D,IAAQC,SAAF,GAAyBD,OAA/B,CAAQC,SAAF;MAAaC,OAAA,GAAYF,OAA/B,CAAmBE,OAAA;IACnB,IAAID,SAAS,IAAIvC,OAAjB,EAA0B;MACxByC,OAAO,CAACJ,IAAR,CAAaG,OAAb;IACD;EACF,CALuB;AAAA,EAAjB;AAOP,OAAO,IAAME,KAAK,GAAGV,IAAI,CAAE,UAAAM,OAAD;EAAA,OAA6B,YAAM;IAC3D,IAAQC,SAAF,GAAyBD,OAA/B,CAAQC,SAAF;MAAaC,OAAA,GAAYF,OAA/B,CAAmBE,OAAA;IACnB,IAAID,SAAS,IAAIvC,OAAjB,EAA0B;MACxByC,OAAO,CAACC,KAAR,CAAcF,OAAd;IACD;EACF,CALwB;AAAA,EAAlB;AAOP,OAAO,IAAMG,IAAI,GAAG,SAAPA,IAAOA,CAAA;EAAA,SAAAC,KAAA,GAAAxC,SAAA,CAAAC,MAAA,EAAOO,GAAP,OAAAL,KAAA,CAAAqC,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;IAAOjC,GAAP,CAAAiC,KAAA,IAAAzC,SAAA,CAAAyC,KAAA;EAAA;EAAA,OAAoC,UAAAC,CAAD;IAAA,OACrDlC,GAAG,CAACiB,MAAJ,CAAW,UAACkB,CAAD,EAAIC,CAAJ;MAAA,OAAUA,CAAC,CAACD,CAAD,CAAtB;IAAA,GAA2BD,CAA3B,CADkB;EAAA;AAAA,CAAb;AAGP,IAAMG,UAAU,GAAG,SAAbA,UAAUA,CAAIF,CAAD,EAAYC,CAAZ;EAAA,OAA0BE,IAAI,CAACC,GAAL,CAASJ,CAAC,GAAGC,CAAb,CAA7C;AAAA;AAGA,IAAMI,OAAO,GAAI,SAAXA,OAAOA,CAAIC,KAAD;EAAA,OACd,OAAOA,KAAP,IAAgB,OAAOA,KADzB;AAAA;AAGA,OAAO,SAASC,QAATA,CAA4CP,CAA5C,EAAkDC,CAAlD,EAAwD;EAC7D,IAAIjD,QAAQ,CAACgD,CAAD,CAAR,IAAehD,QAAQ,CAACiD,CAAD,CAA3B,EAAgC;IAC9B,OAAOC,UAAU,CAACF,CAAD,EAAIC,CAAJ,CAAjB;EACD;EACD,IAAII,OAAO,CAACL,CAAD,CAAP,IAAcK,OAAO,CAACJ,CAAD,CAAzB,EAA8B;IAC5B,IAAMO,MAAM,GAAGN,UAAU,CAACF,CAAC,CAACS,CAAH,EAAMR,CAAC,CAACQ,CAAR,CAAzB;IACA,IAAMC,MAAM,GAAGR,UAAU,CAACF,CAAC,CAACW,CAAH,EAAMV,CAAC,CAACU,CAAR,CAAzB;IACA,OAAOR,IAAI,CAACS,IAAL,CAAUT,IAAA,CAAAU,GAAA,CAAAL,MAAM,EAAI,CAAV,IAAAL,IAAA,CAAAU,GAAA,CAAcH,MAAM,EAAI,CAAlC,EAAP;EACD;EACD,OAAO,CAAP;AACD"},"metadata":{},"sourceType":"module"}