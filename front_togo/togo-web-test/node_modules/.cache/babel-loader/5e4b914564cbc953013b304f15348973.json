{"ast":null,"code":"import _toConsumableArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{convert24TimeTo12}from\"../../Util\";import{Box,Flex,Grid}from\"@chakra-ui/layout\";import styles from\"./Styles\";import Loader from\"../../components/Loader/Loader\";import{Input,InputGroup,InputLeftElement}from\"@chakra-ui/input\";import{Button}from\"@chakra-ui/button\";import{useDisclosure}from\"@chakra-ui/hooks\";import{Popover,PopoverArrow,PopoverCloseButton,PopoverContent,PopoverTrigger}from\"@chakra-ui/popover\";import TimeKeeper from\"react-timekeeper\";import{getWorkingTime,updateWorkingTime}from\"../../Actions/ProfileActions\";import{useDispatch,useSelector}from'react-redux';import{IoIosTime}from'react-icons/io';import translate from\"../../i18n/translate\";import'./WorkingTime.css';export default function WorkingTime(){var dispatch=useDispatch();var workingTime=useSelector(function(state){return state.profile.workingTime;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),workingTimeList=_useState2[0],setWorkingTimeList=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var onUpdateTime=function onUpdateTime(){dispatch(updateWorkingTime(workingTimeList));};useEffect(function(){dispatch(getWorkingTime());},[dispatch]);useEffect(function(){var SatTimeStart=workingTime.SatTimeStart,SatTimeFinish=workingTime.SatTimeFinish,SunTimeStart=workingTime.SunTimeStart,SunTimeFinish=workingTime.SunTimeFinish,MonTimeStart=workingTime.MonTimeStart,MonTimeFinish=workingTime.MonTimeFinish,TueTimeStart=workingTime.TueTimeStart,TueTimeFinish=workingTime.TueTimeFinish,WenTimeStart=workingTime.WenTimeStart,WenTimeFinish=workingTime.WenTimeFinish,ThuTimeStart=workingTime.ThuTimeStart,ThuTimeFinish=workingTime.ThuTimeFinish,FriTimeStart=workingTime.FriTimeStart,FriTimeFinish=workingTime.FriTimeFinish;var workingTimeList=[{title:translate(\"WORKING_TIME.SATURDAY\"),id:\"Sat\",from:formatTime(SatTimeStart),to:formatTime(SatTimeFinish)},{title:translate(\"WORKING_TIME.SUNDAY\"),id:\"Sun\",from:formatTime(SunTimeStart),to:formatTime(SunTimeFinish)},{title:translate(\"WORKING_TIME.MONDAY\"),id:\"Mon\",from:formatTime(MonTimeStart),to:formatTime(MonTimeFinish)},{title:translate(\"WORKING_TIME.TUESDAY\"),id:\"Tue\",from:formatTime(TueTimeStart),to:formatTime(TueTimeFinish)},{title:translate(\"WORKING_TIME.WEDNESDAY\"),id:\"Wen\",from:formatTime(WenTimeStart),to:formatTime(WenTimeFinish)},{title:translate(\"WORKING_TIME.THURSDAY\"),id:\"Thu\",from:formatTime(ThuTimeStart),to:formatTime(ThuTimeFinish)},{title:translate(\"WORKING_TIME.FRIDAY\"),id:\"Fri\",from:formatTime(FriTimeStart),to:formatTime(FriTimeFinish)}];setWorkingTimeList(workingTimeList);if(Object.keys(workingTime).length){setLoading(false);}},[workingTime]);var formatTime=function formatTime(value){if(!value)return null;var time=value.split(\" \")[1].slice(0,-3);return convert24TimeTo12(time);};var onTimeChange=function onTimeChange(dayId,type,value){var workingTimeListClone=_toConsumableArray(workingTimeList);var workingTimeClone=workingTimeListClone.find(function(workingTime){return workingTime.id===dayId;});workingTimeClone[type]=value;setWorkingTimeList(workingTimeListClone);};return/*#__PURE__*/React.createElement(Box,styles.content,loading?/*#__PURE__*/React.createElement(Loader,null):/*#__PURE__*/React.createElement(Grid,styles.workTimeContainer,/*#__PURE__*/React.createElement(Grid,Object.assign({gridColumn:\"1 / span 3\"},styles.workTimeItems,styles.subTitle),/*#__PURE__*/React.createElement(Box,{justifySelf:\"start\"},translate(\"WORKING_TIME.DAY\")),/*#__PURE__*/React.createElement(Box,null,translate(\"WORKING_TIME.FROM\")),/*#__PURE__*/React.createElement(Box,null,translate(\"WORKING_TIME.TO\"))),workingTimeList===null||workingTimeList===void 0?void 0:workingTimeList.map(function(workTime,index){return/*#__PURE__*/React.createElement(React.Fragment,{key:index},/*#__PURE__*/React.createElement(Box,styles.title,workTime.title),[{type:\"from\",popupPlacement:\"bottom-start\"},{type:\"to\",popupPlacement:\"left\"}].map(function(item){return/*#__PURE__*/React.createElement(Flex,{justifyContent:\"center\",key:\"\".concat(workTime.title,\"-\").concat(item.type)},/*#__PURE__*/React.createElement(InputGroup,{w:\"100%\"},/*#__PURE__*/React.createElement(InputLeftElement,Object.assign({value:2},styles.timerIcon,{pointerEvents:\"none\",children:/*#__PURE__*/React.createElement(IoIosTime,{color:\"gray.300\"})})),workTime[item.type]&&/*#__PURE__*/React.createElement(TimePickerPopover,{placement:item.popupPlacement,value:workTime[item.type],onChange:function onChange(value){return onTimeChange(workTime.id,item.type,value);}})));}));}),/*#__PURE__*/React.createElement(Button,Object.assign({onClick:onUpdateTime},styles.workTimeSubmitButton),translate(\"WORKING_TIME.UPDATE\"))));};var TimePickerPopover=function TimePickerPopover(_ref){var placement=_ref.placement,value=_ref.value,onChange=_ref.onChange;var _useDisclosure=useDisclosure(),onOpen=_useDisclosure.onOpen,onClose=_useDisclosure.onClose,isOpen=_useDisclosure.isOpen;var _useState5=useState(value),_useState6=_slicedToArray(_useState5,2),time=_useState6[0],setTime=_useState6[1];var onTimeChange=function onTimeChange(value){setTime(value);onChange&&onChange(value);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Popover,{isOpen:isOpen,onOpen:onOpen,onClose:onClose,placement:placement},/*#__PURE__*/React.createElement(PopoverTrigger,null,/*#__PURE__*/React.createElement(Input,{type:\"phone\",onChange:function onChange(_ref2){var value=_ref2.target.value;return onTimeChange(value);},value:time,textAlign:\"center\",pl:\"2rem\"})),/*#__PURE__*/React.createElement(PopoverContent,null,/*#__PURE__*/React.createElement(PopoverArrow,null),/*#__PURE__*/React.createElement(PopoverCloseButton,null),/*#__PURE__*/React.createElement(Box,{zIndex:5},/*#__PURE__*/React.createElement(TimeKeeper,{time:time,onChange:function onChange(data){return onTimeChange(data.formatted12);}})))));};","map":null,"metadata":{},"sourceType":"module"}