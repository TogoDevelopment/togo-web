{"ast":null,"code":"import _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/system/togo-web-test/src/Container/WalletContainer/WalletContainer.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Flex, Image, Text, Box } from \"@chakra-ui/react\";\nimport { getWallet } from \"../../APIs/ProfileAPIs\";\nimport { setWallet, toastMessage } from \"../../Actions/GeneralActions\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styles from './Styles';\nimport walletImage from '../../assets/wallet.png';\nimport Loader from \"../../components/Loader/Loader\";\nimport translate from \"../../i18n/translate\";\nexport default function WalletContainer() {\n  var wallet = useSelector(function (state) {\n    return state.general.wallet;\n  });\n  var dispatch = useDispatch();\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 1),\n    loading = _useState2[0];\n  useEffect(function () {\n    var interval = null;\n    var currentWallet = 0;\n    getWallet().then(function (_ref) {\n      var server_response = _ref.data.server_response;\n      var wallet = server_response[0].TransporterBalance;\n      interval = setInterval(function () {\n        if (!(currentWallet >= wallet)) {\n          currentWallet += wallet / 7;\n          dispatch(setWallet(currentWallet.toFixed(2)));\n        } else {\n          dispatch(setWallet(wallet));\n          clearInterval(interval);\n        }\n      }, 100);\n    }).catch(function (err) {\n      dispatch(toastMessage(err));\n    }).finally(function () {\n      //setLoading(false);\n    });\n    return function () {\n      return clearInterval(interval);\n    };\n  }, [dispatch]);\n  return /*#__PURE__*/React.createElement(Flex, Object.assign({}, styles.container, {\n    style: {\n      direction: \"ltr\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Flex, {\n    alignItems: \"center\",\n    position: \"relative\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: walletImage,\n    w: 300,\n    position: \"fixed\",\n    zIndex: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Box, Object.assign({}, styles.balanceContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }), loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 32\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Text, Object.assign({}, styles.title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 29\n    }\n  }), translate(\"WALLET.BALANCE\")), /*#__PURE__*/React.createElement(Text, Object.assign({}, styles.balance, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 29\n    }\n  }), wallet)))));\n}\n;","map":{"version":3,"names":["React","useEffect","useState","Flex","Image","Text","Box","getWallet","setWallet","toastMessage","useDispatch","useSelector","styles","walletImage","Loader","translate","WalletContainer","wallet","state","general","dispatch","_useState","_useState2","_slicedToArray","loading","interval","currentWallet","then","_ref","server_response","data","TransporterBalance","setInterval","toFixed","clearInterval","catch","err","finally","createElement","Object","assign","container","style","direction","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","alignItems","position","src","w","zIndex","balanceContainer","Fragment","title","balance"],"sources":["/home/system/togo-web-test/src/Container/WalletContainer/WalletContainer.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {Flex, Image, Text, Box} from \"@chakra-ui/react\";\r\nimport {getWallet} from \"../../APIs/ProfileAPIs\";\r\nimport {setWallet, toastMessage} from \"../../Actions/GeneralActions\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport styles from './Styles';\r\nimport walletImage from '../../assets/wallet.png';\r\nimport Loader from \"../../components/Loader/Loader\";\r\nimport translate from \"../../i18n/translate\";\r\n\r\nexport default function WalletContainer() {\r\n    const wallet = useSelector(state => state.general.wallet);\r\n    const dispatch = useDispatch();\r\n    const [loading, ] = useState(true);\r\n\r\n    useEffect(() => {\r\n        let interval = null;\r\n        let currentWallet = 0;\r\n\r\n        getWallet().then(({data: {server_response}}) => {\r\n            let wallet = server_response[0].TransporterBalance;\r\n            interval = setInterval(() => {\r\n                if (!(currentWallet >= wallet)) {\r\n                    currentWallet += (wallet / 7);\r\n                    dispatch(setWallet(currentWallet.toFixed(2)));\r\n                } else {\r\n                    dispatch(setWallet(wallet));\r\n                    clearInterval(interval);\r\n                }\r\n            }, 100);\r\n        }).catch(err => {\r\n            dispatch(toastMessage(err));\r\n        }).finally(() => {\r\n            //setLoading(false);\r\n        });\r\n\r\n        return () => clearInterval(interval);\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <Flex {...styles.container} style={{direction: \"ltr\"}}>\r\n            <Flex alignItems=\"center\" position=\"relative\">\r\n                <Image\r\n                    src={walletImage}\r\n                    w={300}\r\n                    position=\"fixed\"\r\n                    zIndex={1}\r\n                />\r\n                <Box {...styles.balanceContainer}>\r\n                    {loading ? <Loader/> : (\r\n                        <>\r\n                            <Text {...styles.title}>{translate(\"WALLET.BALANCE\")}</Text>\r\n                            <Text {...styles.balance}>{wallet}</Text>\r\n                        </>\r\n                    )}\r\n                </Box>\r\n            </Flex>\r\n        </Flex>\r\n    );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}