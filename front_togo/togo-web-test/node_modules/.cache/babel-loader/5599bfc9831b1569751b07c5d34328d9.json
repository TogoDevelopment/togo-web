{"ast":null,"code":"import _slicedToArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from\"react\";import{useEffect}from\"react\";import{Button,Dropdown,Form,FormControl,InputGroup,Spinner}from\"react-bootstrap\";import{GetCountryCode,LoginUser}from\"./APIs/LoginAPIs\";import TogoContainer from\"./TogoContainer\";import locicon from\"../assets/locationn.png\";import{useHistory}from\"react-router-dom\";export default function Login(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loadingSubmit=_useState2[0],setLoadingSubmit=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),countryCodes=_useState4[0],setCountryCodes=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),selectedCountryCode=_useState6[0],setSelectedCountryCode=_useState6[1];var history=useHistory();var phoneRef=useRef();useEffect(function(){GetCountryCode().then(function(res){setCountryCodes(res.data.server_response);setSelectedCountryCode(res.data.server_response[0]);localStorage.setItem(\"RegId\",res.data.server_response[0].regId);localStorage.setItem(\"RegPostCode\",res.data.server_response[0].postValue);});},[]);return/*#__PURE__*/React.createElement(TogoContainer,null,/*#__PURE__*/React.createElement(\"div\",{className:\"togo-outling\"},/*#__PURE__*/React.createElement(Dropdown,{className:\"rounded-22 bg-white\",onSelect:function onSelect(eve){setSelectedCountryCode(countryCodes[eve]);localStorage.setItem(\"RegId\",countryCodes[eve].regId);localStorage.setItem(\"RegPostCode\",countryCodes[eve].postValue);}},/*#__PURE__*/React.createElement(Dropdown.Toggle,{variant:\"\",className:\"w-100 text-start d-flex align-items-center shadow-none\"},/*#__PURE__*/React.createElement(\"img\",{src:locicon,style:{width:\"24px\",height:\"24px\"},className:\"me-1\",alt:\"worldicon\"}),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"97%\"}},\"\".concat(selectedCountryCode===null||selectedCountryCode===void 0?void 0:selectedCountryCode.regName,\" (\").concat(selectedCountryCode===null||selectedCountryCode===void 0?void 0:selectedCountryCode.postValue,\")\"))),/*#__PURE__*/React.createElement(Dropdown.Menu,{className:\"w-100\"},countryCodes.map(function(country,index){return/*#__PURE__*/React.createElement(Dropdown.Item,{eventKey:index,key:index,className:\"d-flex\"},\"\".concat(country.regName,\" (\").concat(country.postValue,\")\"));})))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formGridEmail\",className:\"m-inline-e-2\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Enter mobile number\"),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-2 togo-outling\"},/*#__PURE__*/React.createElement(FormControl,{maxLength:9,onInput:function onInput(ev){ev.target.value=ev.target.value.replace(/[^0-9]/gi,\"\");},type:\"text\",className:\"bg-white rounded-22\",ref:phoneRef}))),\"Activation code will be sent to your mobileNumber\",/*#__PURE__*/React.createElement(Button,{variant:\"\",className:\"togo-button w-75 rounded-22\",disabled:loadingSubmit,onClick:function onClick(){var phoneNumber=phoneRef.current.value;if(phoneNumber.length===9){setLoadingSubmit(true);LoginUser(localStorage.getItem(\"RegPostCode\")+phoneRef.current.value).then(function(res){localStorage.setItem(\"PhoneNumber\",phoneNumber);setLoadingSubmit(false);history.push(\"/activate\");});}}},loadingSubmit&&/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",size:\"sm\"}),\"Send\"));}","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/Login.jsx"],"names":["React","useRef","useState","useEffect","Button","Dropdown","Form","FormControl","InputGroup","Spinner","GetCountryCode","LoginUser","TogoContainer","locicon","useHistory","Login","loadingSubmit","setLoadingSubmit","countryCodes","setCountryCodes","selectedCountryCode","setSelectedCountryCode","history","phoneRef","then","res","data","server_response","localStorage","setItem","regId","postValue","eve","width","height","regName","map","country","index","ev","target","value","replace","phoneNumber","current","length","getItem","push"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\"\r\nimport { useEffect } from \"react\";\r\nimport { Button, Dropdown, Form, FormControl, InputGroup, Spinner } from \"react-bootstrap\";\r\nimport { GetCountryCode, LoginUser } from \"./APIs/LoginAPIs\";\r\nimport TogoContainer from \"./TogoContainer\";\r\nimport locicon from \"../assets/locationn.png\";\r\nimport { useHistory } from \"react-router-dom\";\r\nexport default function Login(){\r\n    const [loadingSubmit, setLoadingSubmit] = useState(false);\r\n    const [countryCodes, setCountryCodes] = useState([]);\r\n    const [selectedCountryCode, setSelectedCountryCode] = useState();\r\n    const history = useHistory();\r\n    const phoneRef = useRef();\r\n    \r\n    useEffect(()=>{\r\n        GetCountryCode().then((res)=>{\r\n            setCountryCodes(res.data.server_response);\r\n            setSelectedCountryCode(res.data.server_response[0]);\r\n            localStorage.setItem(\"RegId\", res.data.server_response[0].regId);\r\n            localStorage.setItem(\"RegPostCode\", res.data.server_response[0].postValue);\r\n        });\r\n    }, []);\r\n    \r\n    return (\r\n        <TogoContainer>\r\n            <div className=\"togo-outling\">\r\n                <Dropdown \r\n                    className=\"rounded-22 bg-white\" \r\n                    onSelect={(eve)=>{\r\n                        setSelectedCountryCode(countryCodes[eve]);\r\n                        localStorage.setItem(\"RegId\", countryCodes[eve].regId);\r\n                        localStorage.setItem(\"RegPostCode\", countryCodes[eve].postValue);\r\n                    }}\r\n                >\r\n                    <Dropdown.Toggle variant=\"\" className=\"w-100 text-start d-flex align-items-center shadow-none\">\r\n                        <img src={locicon} style={{width: \"24px\", height: \"24px\"}} className=\"me-1\" alt=\"worldicon\" />\r\n                        <div style={{width: \"97%\"}}>    \r\n                            {`${selectedCountryCode?.regName} (${selectedCountryCode?.postValue})`}\r\n                        </div>\r\n                    </Dropdown.Toggle>\r\n\r\n                    <Dropdown.Menu className=\"w-100\">\r\n                        {countryCodes.map((country, index)=>{\r\n                            return (\r\n                                <Dropdown.Item eventKey={index} key={index} className=\"d-flex\">\r\n                                    {`${country.regName} (${country.postValue})`}\r\n                                </Dropdown.Item>\r\n                            )\r\n                        })}\r\n                        \r\n                    </Dropdown.Menu>\r\n                </Dropdown>\r\n            </div>\r\n\r\n            <Form.Group controlId=\"formGridEmail\" className=\"m-inline-e-2\">\r\n                <Form.Label>Enter mobile number</Form.Label>\r\n                <InputGroup className=\"mb-2 togo-outling\">\r\n\r\n                    <FormControl \r\n                        maxLength={9}\r\n                        onInput={(ev)=>{\r\n                            ev.target.value = ev.target.value.replace(/[^0-9]/gi, \"\");\r\n                        }} \r\n                        type=\"text\" \r\n                        className=\"bg-white rounded-22\"\r\n                        ref={phoneRef} \r\n                    />\r\n                    \r\n                </InputGroup>\r\n                \r\n            </Form.Group>\r\n\r\n            Activation code will be sent to your mobileNumber\r\n\r\n            <Button\r\n                variant=\"\" \r\n                className=\"togo-button w-75 rounded-22\" \r\n                disabled={loadingSubmit}\r\n                onClick={()=>{\r\n                    let phoneNumber = phoneRef.current.value;\r\n                    if(phoneNumber.length === 9){\r\n                        setLoadingSubmit(true);\r\n                        LoginUser(localStorage.getItem(\"RegPostCode\") + phoneRef.current.value).then((res)=>{\r\n                            localStorage.setItem(\"PhoneNumber\", phoneNumber);\r\n                            setLoadingSubmit(false);\r\n                            history.push(\"/activate\");\r\n                        })\r\n                    }\r\n                }}\r\n            >\r\n                {loadingSubmit && <Spinner animation=\"border\" size=\"sm\"/>} \r\n                Send\r\n            </Button>\r\n        </TogoContainer>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}