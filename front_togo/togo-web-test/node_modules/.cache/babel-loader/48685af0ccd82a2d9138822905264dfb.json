{"ast":null,"code":"import _defineProperty from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import{Button,Form,FormControl,Modal,Spinner}from\"react-bootstrap\";import{SetWorkingHours}from\"./APIs/LoginAPIs\";import{GetCityRegion}from\"./APIs/OrdersAPIs\";import locationImg from\"../assets/locationn.png\";var DAYS=['Saturday','Sunday','Monday','Tuesday','Wednesday','Thursday','Friday'];function FromToFields(_ref){var id=_ref.id,children=_ref.children,time=_ref.time,onChangeStartTime=_ref.onChangeStartTime,onChangeEndTime=_ref.onChangeEndTime;return/*#__PURE__*/React.createElement(\"div\",{className:\"align-items-center d-flex\"},children,/*#__PURE__*/React.createElement(\"p\",{className:\"me-2\"},\"From\"),/*#__PURE__*/React.createElement(FormControl,{type:\"time\",className:\"bg-white rounded-22 w-auto\",name:\"from\",value:time.from,onChange:onChangeStartTime}),/*#__PURE__*/React.createElement(\"p\",{className:\"me-2\"},\"to\"),/*#__PURE__*/React.createElement(FormControl,{type:\"time\",className:\"bg-white rounded-22 w-auto\",name:\"to\",value:time.to,onChange:onChangeEndTime}));}export default function WorkInfo(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loadingSubmit=_useState2[0],setLoadingSubmit=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),cities=_useState6[0],setCities=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),selectedCities=_useState8[0],setSelectedCities=_useState8[1];var _useState9=useState(\"1\"),_useState10=_slicedToArray(_useState9,2),isAllTime=_useState10[0],setIsAllTime=_useState10[1];var _useState11=useState(DAYS),_useState12=_slicedToArray(_useState11,2),selectedDays=_useState12[0],setSelectedDays=_useState12[1];var _useState13=useState(\"1\"),_useState14=_slicedToArray(_useState13,2),selectedTimeRange=_useState14[0],setSelectedTimeRange=_useState14[1];var _useState15=useState({from:\"\",to:\"\"}),_useState16=_slicedToArray(_useState15,2),time=_useState16[0],setTime=_useState16[1];var handleChangeEndTime=function handleChangeEndTime(e){setTime({from:time.from,to:e.target.value});};var handleChangeStartTime=function handleChangeStartTime(e){setTime({from:e.target.value,to:time.to});};var formRef=useRef();useEffect(function(){GetCityRegion().then(function(res){setCities(res.data.server_response);});},[]);var getTime={Saturday:{SatTimeStart:\"\",SatTimeFinish:\"\"},Sunday:{SunTimeStart:\"\",SunTimeFinish:\"\"},Monday:{MonTimeStart:\"\",MonTimeFinish:\"\"},Tuesday:{TueTimeStart:\"\",TueTimeFinish:\"\"},Wednesday:{WenTimeStart:\"\",WenTimeFinish:\"\"},Thursday:{ThuTimeStart:\"\",ThuTimeFinish:\"\"},Friday:{FriTimeStart:\"\",FriTimeFinish:\"\"}};useEffect(function(){var data=DAYS.map(function(day){return _objectSpread({day:day,isChecked:false},getTime[day]);});setSelectedDays(data);},[]);var locationsArray=Array.from(selectedCities,function(item){return _objectSpread({},item[1]);});return/*#__PURE__*/React.createElement(\"div\",{className:\"mainbg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"h1 p-3 text-center togo-button\"},\"Create account / transporter\"),/*#__PURE__*/React.createElement(Form,{className:\"m-auto w-75\",onSubmit:function onSubmit(event){event.preventDefault();var result=selectedDays.reduce(function(obj,cur){return _objectSpread(_objectSpread({},obj),cur);},{});delete result.day;delete result.isChecked;var requestTime=_objectSpread(_objectSpread({},result),{},{AllTimeFlag:isAllTime});var requestAllTime={AllTimeFlag:isAllTime,AllTimeStart:time.from,AllTimeFinish:time.to};var request=isAllTime===\"0\"?requestTime:requestAllTime;SetWorkingHours(locationsArray,request);//console.log(event.target);\n// console.log(event.target[0].value)\n// console.log(event.target.elements.FirstName.value)\n// console.log(event.target.FirstName.value)\n},onChange:function onChange(event){console.log(event.target);if(event.target.name){setSelectedTimeRange(event.target.value);}}},/*#__PURE__*/React.createElement(\"p\",{className:\"text-center togo-border h4\"},\"Work information\"),/*#__PURE__*/React.createElement(\"p\",null,\"Work area\"),/*#__PURE__*/React.createElement(\"div\",{className:\"togo-outling\",onClick:function onClick(){setOpen(true);}},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex text-center bg-white rounded-22\"},/*#__PURE__*/React.createElement(\"img\",{src:locationImg,style:{width:\"24px\",height:\"24px\"},className:\"me-1\",alt:\"worldicon\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"flex-grow-1\"},\"Select Work areas\"))),/*#__PURE__*/React.createElement(\"p\",null,\"Select working time\"),/*#__PURE__*/React.createElement(FromToFields,{time:time,onChangeStartTime:handleChangeStartTime,onChangeEndTime:handleChangeEndTime},/*#__PURE__*/React.createElement(Form.Check,{label:\"All Days\",type:\"radio\",id:\"allDays\",name:\"time\",value:\"1\",checked:isAllTime===\"1\",onChange:function onChange(e){return setIsAllTime(e.target.value);},className:\"togo-checkbox flex-grow-1\"// defaultChecked\n})),/*#__PURE__*/React.createElement(Form.Check,{label:\"Days of the week\",type:\"radio\",id:\"someDays\",name:\"time\",value:\"0\",checked:isAllTime===\"0\",onChange:function onChange(e){return setIsAllTime(e.target.value);},className:\"togo-checkbox\"}),isAllTime===\"0\"&&/*#__PURE__*/React.createElement(\"div\",null,selectedDays.map(function(day){return/*#__PURE__*/React.createElement(\"div\",{className:\"align-items-center d-flex\",key:day.day},/*#__PURE__*/React.createElement(Form.Check,{label:day.day,type:\"checkbox\",id:\"\".concat(day.day,\"someDays\"),name:\"\".concat(day.day,\"time\"),checked:day.isChecked,onChange:function onChange(e){var newData=selectedDays.map(function(selectedDay){return(selectedDay===null||selectedDay===void 0?void 0:selectedDay.day)===day.day?_objectSpread(_objectSpread({},day),{},{isChecked:e.target.checked}):selectedDay;});setSelectedDays(newData);},className:\"togo-checkbox flex-grow-1\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"me-2\"},\"From\"),/*#__PURE__*/React.createElement(FormControl,{type:\"time\",className:\"bg-white rounded-22 w-auto\",name:day.day&&Object.keys(getTime[day.day])[0]// value={day.day && Object.values(getTime[day.day])?.[0]}\n,onChange:function onChange(e){var newData=selectedDays.map(function(selectedDay){return(selectedDay===null||selectedDay===void 0?void 0:selectedDay.day)===day.day?_objectSpread(_objectSpread({},day),{},_defineProperty({},Object.keys(getTime[day.day])[0],e.target.value)):selectedDay;});setSelectedDays(newData);},disabled:!day.isChecked}),/*#__PURE__*/React.createElement(\"p\",{className:\"me-2\"},\"to\"),/*#__PURE__*/React.createElement(FormControl,{type:\"time\",className:\"bg-white rounded-22 w-auto\",name:day.day&&Object.keys(getTime[day.day])[1]// value={day.day && Object.values(getTime[day.day])?.[1]}\n,onChange:function onChange(e){var newData=selectedDays.map(function(selectedDay){return(selectedDay===null||selectedDay===void 0?void 0:selectedDay.day)===day.day?_objectSpread(_objectSpread({},day),{},_defineProperty({},Object.keys(getTime[day.day])[1],e.target.value)):selectedDay;});setSelectedDays(newData);},disabled:!day.isChecked}));})),/*#__PURE__*/React.createElement(Button,{variant:\"\",type:\"submit\",className:\"d-block m-auto rounded-22 togo-button w-25\",disabled:loadingSubmit// onClick={(event)=>{\n//     setLoadingSubmit(true);\n//     // SetTransporterPersonalInfo(\n//     // ).then((res) => {\n//     //     setLoadingSubmit(false);\n//     //     history.push(\"/business-info\")\n//     // });\n// }}\n},loadingSubmit&&/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",size:\"sm\"}),\"Accept\")),/*#__PURE__*/React.createElement(Modal,{show:open,onHide:function onHide(){setOpen(false);}},/*#__PURE__*/React.createElement(Modal.Header,null,/*#__PURE__*/React.createElement(Modal.Title,null,\"Select areas\")),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(Form,{ref:formRef},cities.map(function(city){var _selectedCities$get;return/*#__PURE__*/React.createElement(Form.Check,{label:city.Name,type:\"checkbox\",id:\"\".concat(city.Name,\"-someDays\"),name:city.Name,key:city.IdCity,value:city.IdCity,className:\"togo-checkbox\",defaultChecked:selectedCities===null||selectedCities===void 0?void 0:(_selectedCities$get=selectedCities.get)===null||_selectedCities$get===void 0?void 0:_selectedCities$get.call(selectedCities,city.IdCity)});}))),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:function onClick(){setOpen(false);}},\"Close\"),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function onClick(){var selected=new Map();Array.from(formRef.current.elements).forEach(function(elem){if(elem.checked){selected.set(elem.value,{IdCity:elem.value});}});setSelectedCities(selected);setOpen(false);}},\"Save Changes\"))));}","map":null,"metadata":{},"sourceType":"module"}