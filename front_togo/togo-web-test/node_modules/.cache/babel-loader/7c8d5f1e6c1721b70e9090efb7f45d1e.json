{"ast":null,"code":"import _slicedToArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useLocation,useParams}from\"react-router\";import{getBusinessLocation,getPersonalInfo}from\"../Actions/ProfileActions\";import translate from\"../i18n/translate\";import{getOrderDetails}from\"./APIs/OrdersAPIs\";import{packageFormatter}from\"./Orders/OrdersTabularView\";import whiteLogo from'../assets/whiteLogo.png';//import html2canvas from \"html2canvas\";\nimport DomToImage from\"dom-to-image\";import jsPDF from\"jspdf\";import{Button}from\"react-bootstrap\";var Barcode=require('react-barcode');function Convert_HTML_To_PDF(){var elementHTML=document.querySelector('.togo-waybill');DomToImage.toPng(elementHTML,{width:elementHTML.offsetWidth}).then(function(dataUrl){var htmlImage=new Image();htmlImage.src=dataUrl;var pdf=new jsPDF(\"p\",\"mm\",\"a4\");var pageWidth=pdf.internal.pageSize.getWidth();var pageHeight=pdf.internal.pageSize.getHeight();var imageWidth=elementHTML.offsetWidth;var imageHeight=elementHTML.offsetHeight;var ratio=imageWidth/imageHeight>=pageWidth/pageHeight?pageWidth/imageWidth:pageHeight/imageHeight;//pdf = new jsPDF(this.state.orientation, undefined, format);\npdf.addImage(htmlImage,'PNG',5,5,imageWidth*ratio-10,imageHeight*ratio);pdf.save('waybill.pdf');}).catch(function(error){console.error('Error: ',error);});/* html2canvas(elementHTML, {\r\n        logging: true,\r\n        allowTaint: false,\r\n\t    useCORS: true,\r\n    }).then((canvas) =>{\r\n        document.body.appendChild(canvas);\r\n        var imgData = canvas.toDataURL(\"image/png\",1);\r\n        var pdf = new jsPDF(\"p\", \"mm\", \"a4\");\r\n        var pageWidth = pdf.internal.pageSize.getWidth();\r\n        var pageHeight = pdf.internal.pageSize.getHeight();\r\n        var imageWidth = canvas.width;\r\n        var imageHeight = canvas.height;\r\n\r\n        var ratio = imageWidth/imageHeight >= pageWidth/pageHeight ? pageWidth/imageWidth : pageHeight/imageHeight;\r\n        //pdf = new jsPDF(this.state.orientation, undefined, format);\r\n        pdf.addImage(imgData, 'PNG', 0, 0, imageWidth * ratio, imageHeight * ratio);\r\n        //pdf.save(\"waybill.pdf\");\r\n\r\n    }); */}export default function WayBill(){var _useParams=useParams(),id=_useParams.id;var _useState=useState(),_useState2=_slicedToArray(_useState,2),orderDetails=_useState2[0],setOrderDetails=_useState2[1];var location=useLocation();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.profile.personalInfo;}),FullName=_useSelector.FullName,Email=_useSelector.Email,LogoUrl=_useSelector.LogoUrl;var _useSelector2=useSelector(function(state){return state.profile.businessLocations;}),BusinessName=_useSelector2.BusinessName;var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){if(FullName&&Email&&orderDetails&&BusinessName){if(new URLSearchParams(location.search).get(\"print\")===\"true\"){window.print();}}},[FullName,Email,orderDetails]);useEffect(function(){dispatch(getPersonalInfo(function(){setLoading(false);}));dispatch(getBusinessLocation());},[dispatch]);useEffect(function(){getOrderDetails(id).then(function(orderDetails){setOrderDetails(orderDetails);});},[id]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center py-3 d-print-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"px-3\",style:{width:\"1000px\"}},/*#__PURE__*/React.createElement(Button,{onClick:Convert_HTML_To_PDF,className:\"\"},\"PDF\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"togo-waybill px-3\",style:{width:\"1000px\"}},/*#__PURE__*/React.createElement(\"h1\",{className:\"fw-bold h3 text-center\"},translate(\"WAYBILL.TITLE\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"border border-dark border-2 w-50 d-flex justify-content-between p-2 m-inline-e-2\"},/*#__PURE__*/React.createElement(\"img\",{style:{maxWidth:\"200px\"},alt:\"business logo\",src:\"/togo/MobileAPi/\".concat(LogoUrl)//src=\"https://cdn.dribbble.com/users/1111447/screenshots/7697273/media/ba28a6aaee0f52b59662c6d6122c94ef.png?compress=1&resize=400x300\" \n}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,FullName),/*#__PURE__*/React.createElement(\"p\",null,BusinessName),/*#__PURE__*/React.createElement(\"p\",null,translate(\"PERSONAL_DETAILS.EMAIL\"),\": \",Email))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-50\"},/*#__PURE__*/React.createElement(\"p\",null,translate(\"WAYBILL.PRINT_DATE\"),\": \",new Date().toDateString(),\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},orderDetails&&orderDetails.BarCode&&/*#__PURE__*/React.createElement(Barcode,{value:orderDetails.BarCode}),orderDetails&&!orderDetails.BarCode&&/*#__PURE__*/React.createElement(Barcode,{value:id.padStart(8,0)})))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-50  m-inline-e-2\"},/*#__PURE__*/React.createElement(\"fieldset\",{style:{all:\"revert\",margin:\"0\"},className:\"border-dark\"},/*#__PURE__*/React.createElement(\"legend\",{style:{all:\"revert\"}},translate(\"WAYBILL.SENDER\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,translate(\"WORKING_TIME.FROM\"),\": \",orderDetails===null||orderDetails===void 0?void 0:orderDetails.ReceiverName,\", \",/*#__PURE__*/React.createElement(\"br\",null),\" \",orderDetails===null||orderDetails===void 0?void 0:orderDetails.IdCitySource,\",\",/*#__PURE__*/React.createElement(\"br\",null),\" \",orderDetails===null||orderDetails===void 0?void 0:orderDetails.OtherDetailsDes),/*#__PURE__*/React.createElement(\"hr\",{className:\"my-2\"}),/*#__PURE__*/React.createElement(\"p\",null,translate(\"ADMIN.MOBILE_NUMBER\"),\": \",orderDetails===null||orderDetails===void 0?void 0:orderDetails.ReceiverAddressNum)))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-50\"},/*#__PURE__*/React.createElement(\"fieldset\",{style:{all:\"revert\",margin:\"0\"},className:\"border-dark\"},/*#__PURE__*/React.createElement(\"legend\",{style:{all:\"revert\"}},translate(\"WAYBILL.RECEIVER\")),/*#__PURE__*/React.createElement(\"p\",null,translate(\"WORKING_TIME.TO\"),\": \",FullName,\",\",/*#__PURE__*/React.createElement(\"br\",null),orderDetails===null||orderDetails===void 0?void 0:orderDetails.IdCityDes,\",\",/*#__PURE__*/React.createElement(\"br\",null),orderDetails===null||orderDetails===void 0?void 0:orderDetails.OtherDetails),/*#__PURE__*/React.createElement(\"hr\",{className:\"my-2\"}),/*#__PURE__*/React.createElement(\"p\",null,translate(\"ADMIN.MOBILE_NUMBER\"),\": \",orderDetails===null||orderDetails===void 0?void 0:orderDetails.PhoneCustomer)))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex pt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-75 m-inline-e-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"border border-dark p-2 border-2\"},/*#__PURE__*/React.createElement(\"p\",null,translate(\"WAYBILL.NOTES\"),\": \"),/*#__PURE__*/React.createElement(\"p\",null,orderDetails===null||orderDetails===void 0?void 0:orderDetails.DetailsLoad)),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex pt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-75 m-inline-e-2\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-bordered border-2 border-dark\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,translate(\"WAYBILL.LENGTH\")),/*#__PURE__*/React.createElement(\"th\",null,translate(\"WAYBILL.HEIGHT\")),/*#__PURE__*/React.createElement(\"th\",null,translate(\"WAYBILL.WIDTH\")),/*#__PURE__*/React.createElement(\"th\",null,translate(\"WAYBILL.WEIGHT\")))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,(orderDetails===null||orderDetails===void 0?void 0:orderDetails.LengthLoad)||\"N/A\"),/*#__PURE__*/React.createElement(\"td\",null,(orderDetails===null||orderDetails===void 0?void 0:orderDetails.HeightLoad)||\"N/A\"),/*#__PURE__*/React.createElement(\"td\",null,(orderDetails===null||orderDetails===void 0?void 0:orderDetails.WidthLoad)||\"N/A\"),/*#__PURE__*/React.createElement(\"td\",null,(orderDetails===null||orderDetails===void 0?void 0:orderDetails.WeightLoad)||\"N/A\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-25\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-bordered border-2 border-dark\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,translate(\"WAYBILL.SHIP\")))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,packageFormatter({PackageType:orderDetails===null||orderDetails===void 0?void 0:orderDetails.TypeLoad})))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"border border-2 border-dark w-25 text-center mb-3\"},/*#__PURE__*/React.createElement(\"p\",{className:\"p-2 border-bottom border-dark\"},translate(\"WAYBILL.AMOUNT\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center flex-column\",style:{height:\"calc(100% - 38px)\"}},/*#__PURE__*/React.createElement(\"h1\",{className:\"h1\"},orderDetails===null||orderDetails===void 0?void 0:orderDetails.CostLoad),/*#__PURE__*/React.createElement(\"p\",null,translate(\"WAYBILL.NIS\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-50\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"h4\"},translate(\"WAYBILL.TERMS_AND_CONDITIONS\")),/*#__PURE__*/React.createElement(\"ol\",{style:{padding:\"revert\",listStyle:localStorage.getItem(\"Language\")===\"en\"?\"normal\":\"arabic-indic\"}},/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_ONE\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_TWO\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_THREE\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_FOUR\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_FIVE\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_SIX\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-50\",style:{direction:localStorage.getItem(\"Language\")===\"en\"?\"rtl\":\"ltr\"}},/*#__PURE__*/React.createElement(\"h1\",{className:\"h4\"},translate(\"WAYBILL.TERMS_AND_CONDITIONS_AR\")),/*#__PURE__*/React.createElement(\"ol\",{style:{padding:\"revert\",listStyle:localStorage.getItem(\"Language\")===\"en\"?\"arabic-indic\":\"normal\"}},/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_ONE_AR\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_TWO_AR\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_THREE_AR\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_FOUR_AR\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_FIVE_AR\")),/*#__PURE__*/React.createElement(\"li\",null,translate(\"WAYBILL.CLOUSE_SIX_AR\"))))),/*#__PURE__*/React.createElement(\"hr\",{className:\"my-3\"}),/*#__PURE__*/React.createElement(\"img\",{src:whiteLogo,style:{width:\"80px\",filter:\"brightness(0)\"},alt:\"logo\",className:\"mb-3\"}))));}","map":null,"metadata":{},"sourceType":"module"}