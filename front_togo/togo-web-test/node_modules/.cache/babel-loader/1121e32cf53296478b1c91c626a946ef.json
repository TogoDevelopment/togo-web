{"ast":null,"code":"import _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/system/togo-web-test/src/components/Orders/OrdersTabularView.jsx\";\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport './OrdersTabularView.css';\nimport translate from \"../../i18n/translate\";\nimport { Link } from \"react-router-dom\";\nimport { CancelOrder } from \"../OrdersManager/CancelOrder\";\nimport DynamicTable from \"../DynamicTable/DynamicTable\";\nimport { isTransporter, isTransporterMaster } from \"../../Util\";\nexport var PackageTypes = {\n  \"1\": \"FOOD\",\n  \"2\": \"SMALL_PACKAGE_AND_ENVELOPS\",\n  \"3\": \"MEDIUM_PACKAGE\",\n  \"4\": \"LARGE_PACKAGE\"\n};\nexport var DeliveryTypes = {\n  \"1\": \"DELIVERY\",\n  \"2\": \"COD\",\n  \"3\": \"PICKUP\",\n  \"4\": \"PAP\"\n};\nexport var deliverFormatter = function deliverFormatter(data) {\n  if (DeliveryTypes[parseInt(data.DeliveryWays)]) {\n    return translate(\"ORDERS.\" + DeliveryTypes[parseInt(data.DeliveryWays)]);\n  }\n\n  return \"\";\n};\nexport var packageFormatter = function packageFormatter(data) {\n  if (PackageTypes[parseInt(data.PackageType)]) {\n    return translate(\"ORDERS.\" + PackageTypes[parseInt(data.PackageType)]);\n  }\n\n  return \"\";\n};\nexport var OrdersTabularView = function OrdersTabularView(_ref) {\n  var orders = _ref.orders,\n      currentPage = _ref.currentPage,\n      update = _ref.update;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      columns = _useState2[0],\n      setColumns = _useState2[1];\n\n  var showDetailsButton = useCallback(function (orderId) {\n    return /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: \"/account/Order/\".concat(orderId),\n        state: {\n          currentPage: currentPage\n        }\n      },\n      style: {\n        paddingRight: \"20%\",\n        paddingLeft: \"20%\",\n        border: \"none\",\n        width: \"100%\",\n        textAlign: \"center\"\n      },\n      className: \"btn btn-primary btn-rounded btn-grad\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }\n    }, translate(\"ORDERS.SHOW\"));\n  }, [currentPage]);\n  useEffect(function () {\n    var newColumns = [{\n      label: translate(\"ORDERS.ORDER_NUM\"),\n      key: \"idOrder\"\n    }, {\n      label: translate(\"ORDERS.DELIVERY_TYPE\"),\n      key: \"DeliveryWays\",\n      format: deliverFormatter\n    }, {\n      label: translate(\"ORDERS.PACKAGE_TYPE\"),\n      key: \"PackageType\",\n      format: packageFormatter\n    }, {\n      label: translate(\"ORDERS.ORDER_STATUS\"),\n      key: \"OrderStatus\"\n    }, {\n      label: translate(\"ORDERS.ORDER_DATE\"),\n      key: \"DateOrder\"\n    }, {\n      label: translate(\"ORDERS.ORDER_TIME\"),\n      key: \"TimeOrder\"\n    }, {\n      label: translate(\"ORDERS.FROM_CITY\"),\n      key: \"FromAddress\"\n    }, {\n      label: translate(\"ORDERS.TO_CITY\"),\n      key: \"ToAddress\"\n    }, {\n      label: translate(\"ORDERS.FULL_DETAILS\"),\n      key: \"idOrder\",\n      format: function format(_ref2) {\n        var idOrder = _ref2.idOrder;\n        return showDetailsButton(idOrder);\n      }\n    }];\n\n    if (!isTransporter() && currentPage === \"all-orders\") {\n      newColumns.push({\n        label: \"\",\n        key: \"\",\n        format: function format(_ref3) {\n          var idOrder = _ref3.idOrder;\n          return /*#__PURE__*/React.createElement(CancelOrder, {\n            className: \"w-100\",\n            orderId: idOrder,\n            onSuccess: update,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 40\n            }\n          });\n        }\n      });\n    }\n\n    if (currentPage === \"current-orders\") {\n      //TODO:: key to be changed\n      newColumns.splice(3, 0, {\n        label: translate(\"ORDERS.PRICE\"),\n        key: \"CostLoad\"\n      });\n\n      if (isTransporterMaster()) {\n        newColumns.splice(newColumns.length - 1, 0, {\n          label: translate(\"ORDER_DETAILS.ASSIGNED\"),\n          key: \"AssignedMemberName\"\n        });\n      }\n    }\n    /* else if (currentPage === \"previous-orders\") {\r\n      newColumns.push({\r\n          label: translate(\"ORDERS.ORDER_STATUS\"),\r\n          key: \"idOrder\",\r\n          format: ({IsFinished, IsDeleted}) => IsFinished ? translate(\"ORDERS.COMPLETED\") : IsDeleted ? translate(\"ORDERS.CANCELED\") : null\r\n      })\r\n    } */\n\n\n    setColumns(newColumns);\n  }, [currentPage, showDetailsButton]);\n  return /*#__PURE__*/React.createElement(DynamicTable, {\n    columns: columns,\n    data: orders,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 12\n    }\n  });\n};","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/Orders/OrdersTabularView.jsx"],"names":["React","useCallback","useEffect","useState","translate","Link","CancelOrder","DynamicTable","isTransporter","isTransporterMaster","PackageTypes","DeliveryTypes","deliverFormatter","data","parseInt","DeliveryWays","packageFormatter","PackageType","OrdersTabularView","orders","currentPage","update","columns","setColumns","showDetailsButton","orderId","pathname","state","paddingRight","paddingLeft","border","width","textAlign","newColumns","label","key","format","idOrder","push","splice","length"],"mappings":"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","sourcesContent":["import React, {useCallback, useEffect, useState} from \"react\";\r\nimport './OrdersTabularView.css';\r\nimport translate from \"../../i18n/translate\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {CancelOrder} from \"../OrdersManager/CancelOrder\";\r\nimport DynamicTable from \"../DynamicTable/DynamicTable\";\r\nimport { isTransporter, isTransporterMaster } from \"../../Util\";\r\n\r\nexport const PackageTypes = {\r\n    \"1\": \"FOOD\",\r\n    \"2\": \"SMALL_PACKAGE_AND_ENVELOPS\",\r\n    \"3\": \"MEDIUM_PACKAGE\",\r\n    \"4\": \"LARGE_PACKAGE\"\r\n};\r\n\r\nexport const DeliveryTypes = {\r\n    \"1\": \"DELIVERY\",\r\n    \"2\": \"COD\",\r\n    \"3\": \"PICKUP\",\r\n    \"4\": \"PAP\"\r\n};\r\n\r\nexport const deliverFormatter = (data) => {\r\n    if(DeliveryTypes[parseInt(data.DeliveryWays)]){\r\n        return translate(\"ORDERS.\" + DeliveryTypes[parseInt(data.DeliveryWays)])\r\n    }\r\n    return \"\";\r\n}\r\n\r\nexport const packageFormatter = (data) => {\r\n    if(PackageTypes[parseInt(data.PackageType)]){\r\n        return translate(\"ORDERS.\" + PackageTypes[parseInt(data.PackageType)])\r\n    }\r\n    return \"\";\r\n}\r\n\r\nexport const OrdersTabularView = ({orders, currentPage, update}) => {\r\n    const [columns, setColumns] = useState([]);\r\n\r\n    const showDetailsButton = useCallback((orderId) =>\r\n        <Link\r\n            to={{\r\n                pathname: `/account/Order/${orderId}`,\r\n                state: {currentPage: currentPage},\r\n            }}\r\n            style={{\r\n                paddingRight: \"20%\",\r\n                paddingLeft: \"20%\",\r\n                border: \"none\",\r\n                width: \"100%\",\r\n                textAlign: \"center\",\r\n            }}\r\n            className=\"btn btn-primary btn-rounded btn-grad\"\r\n        >\r\n            {translate(\"ORDERS.SHOW\")}\r\n        </Link>, [currentPage]);\r\n\r\n    useEffect(() => {\r\n        const newColumns = [\r\n            {\r\n                label: translate(\"ORDERS.ORDER_NUM\"),\r\n                key: \"idOrder\"\r\n            },\r\n            {\r\n                label: translate(\"ORDERS.DELIVERY_TYPE\"),\r\n                key: \"DeliveryWays\",\r\n                format: deliverFormatter\r\n            },\r\n            {\r\n                label: translate(\"ORDERS.PACKAGE_TYPE\"),\r\n                key: \"PackageType\",\r\n                format: packageFormatter\r\n            },\r\n            {\r\n                label: translate(\"ORDERS.ORDER_STATUS\"),\r\n                key: \"OrderStatus\"\r\n            },\r\n            {\r\n                label: translate(\"ORDERS.ORDER_DATE\"),\r\n                key: \"DateOrder\"\r\n            },\r\n            {\r\n                label: translate(\"ORDERS.ORDER_TIME\"),\r\n                key: \"TimeOrder\"\r\n            },\r\n            {\r\n                label: translate(\"ORDERS.FROM_CITY\"),\r\n                key: \"FromAddress\"\r\n            },\r\n            {\r\n                label: translate(\"ORDERS.TO_CITY\"),\r\n                key: \"ToAddress\"\r\n            },\r\n            {\r\n                label: translate(\"ORDERS.FULL_DETAILS\"),\r\n                key: \"idOrder\",\r\n                format: ({idOrder}) => showDetailsButton(idOrder)\r\n            }\r\n        ];\r\n        \r\n        if(!isTransporter() && currentPage === \"all-orders\"){ \r\n            newColumns.push({\r\n                label: \"\",\r\n                key: \"\",\r\n                format: ({idOrder}) => <CancelOrder className=\"w-100\" orderId={idOrder} onSuccess={update} />\r\n            });\r\n        }\r\n\r\n        if (currentPage === \"current-orders\") {\r\n            //TODO:: key to be changed\r\n\r\n            newColumns.splice(3, 0, {\r\n                label: translate(\"ORDERS.PRICE\"),\r\n                key: \"CostLoad\"\r\n            });\r\n            \r\n            if(isTransporterMaster()){\r\n                newColumns.splice(newColumns.length - 1, 0,{\r\n                    label: translate(\"ORDER_DETAILS.ASSIGNED\"),\r\n                    key: \"AssignedMemberName\",\r\n                });\r\n            }\r\n        } /* else if (currentPage === \"previous-orders\") {\r\n            newColumns.push({\r\n                label: translate(\"ORDERS.ORDER_STATUS\"),\r\n                key: \"idOrder\",\r\n                format: ({IsFinished, IsDeleted}) => IsFinished ? translate(\"ORDERS.COMPLETED\") : IsDeleted ? translate(\"ORDERS.CANCELED\") : null\r\n            })\r\n        } */\r\n\r\n        setColumns(newColumns);\r\n    }, [currentPage, showDetailsButton]);\r\n\r\n    return <DynamicTable columns={columns} data={orders}/>;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}