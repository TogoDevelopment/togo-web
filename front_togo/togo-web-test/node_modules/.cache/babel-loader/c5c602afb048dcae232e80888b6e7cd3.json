{"ast":null,"code":"import _toConsumableArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { getLastItem } from \"./array\";\nimport { isNumber, isObject } from \"./assertion\";\nimport { fromEntries } from \"./object\";\nfunction analyzeCSSValue(value) {\n  var num = parseFloat(value.toString());\n  var unit = value.toString().replace(String(num), \"\");\n  return {\n    unitless: !unit,\n    value: num,\n    unit: unit\n  };\n}\nexport function px(value) {\n  if (value == null) return value;\n  var _analyzeCSSValue = analyzeCSSValue(value),\n    unitless = _analyzeCSSValue.unitless;\n  return unitless || isNumber(value) ? value + \"px\" : value;\n}\nvar sortByBreakpointValue = function sortByBreakpointValue(a, b) {\n  return parseInt(a[1], 10) > parseInt(b[1], 10) ? 1 : -1;\n};\nvar sortBps = function sortBps(breakpoints) {\n  return fromEntries(Object.entries(breakpoints).sort(sortByBreakpointValue));\n};\nfunction normalize(breakpoints) {\n  var sorted = sortBps(breakpoints);\n  return Object.assign(Object.values(sorted), sorted);\n}\nfunction keys(breakpoints) {\n  var value = Object.keys(sortBps(breakpoints));\n  return new Set(value);\n}\nfunction subtract(value) {\n  var _px;\n  if (!value) return value;\n  value = (_px = px(value)) != null ? _px : value;\n  var factor = value.endsWith(\"px\") ? -1 :\n  // the equivalent of 1px in em using a 16px base\n  -0.0635;\n  return isNumber(value) ? \"\" + (value + factor) : value.replace(/([0-9]+\\.?[0-9]*)/, function (m) {\n    return \"\" + (parseFloat(m) + factor);\n  });\n}\nfunction queryString(min, max) {\n  var query = [];\n  if (min) query.push(\"@media screen and (min-width: \" + px(min) + \")\");\n  if (query.length > 0 && max) query.push(\"and\");\n  if (max) query.push(\"@media screen and (max-width: \" + px(max) + \")\");\n  return query.join(\" \");\n}\nexport function analyzeBreakpoints(breakpoints) {\n  var _breakpoints$base;\n  if (!breakpoints) return null;\n  breakpoints.base = (_breakpoints$base = breakpoints.base) != null ? _breakpoints$base : \"0px\";\n  var normalized = normalize(breakpoints);\n  var queries = Object.entries(breakpoints).sort(sortByBreakpointValue).map(function (_ref, index, entry) {\n    var _entry;\n    var _ref2 = _slicedToArray(_ref, 2),\n      breakpoint = _ref2[0],\n      minW = _ref2[1];\n    var _ref3 = (_entry = entry[index + 1]) != null ? _entry : [],\n      _ref4 = _slicedToArray(_ref3, 2),\n      maxW = _ref4[1];\n    maxW = parseFloat(maxW) > 0 ? subtract(maxW) : undefined;\n    return {\n      breakpoint: breakpoint,\n      minW: minW,\n      maxW: maxW,\n      maxWQuery: queryString(null, maxW),\n      minWQuery: queryString(minW),\n      minMaxQuery: queryString(minW, maxW)\n    };\n  });\n  var _keys = keys(breakpoints);\n  var _keysArr = Array.from(_keys.values());\n  return {\n    keys: _keys,\n    normalized: normalized,\n    isResponsive: function isResponsive(test) {\n      var keys = Object.keys(test);\n      return keys.length > 0 && keys.every(function (key) {\n        return _keys.has(key);\n      });\n    },\n    asObject: sortBps(breakpoints),\n    asArray: normalize(breakpoints),\n    details: queries,\n    media: [null].concat(_toConsumableArray(normalized.map(function (minW) {\n      return queryString(minW);\n    }).slice(1))),\n    toArrayValue: function toArrayValue(test) {\n      if (!isObject(test)) {\n        throw new Error(\"toArrayValue: value must be an object\");\n      }\n      var result = _keysArr.map(function (bp) {\n        var _test$bp;\n        return (_test$bp = test[bp]) != null ? _test$bp : null;\n      });\n      while (getLastItem(result) === null) {\n        result.pop();\n      }\n      return result;\n    },\n    toObjectValue: function toObjectValue(test) {\n      if (!Array.isArray(test)) {\n        throw new Error(\"toObjectValue: value must be an array\");\n      }\n      return test.reduce(function (acc, value, index) {\n        var key = _keysArr[index];\n        if (key != null && value != null) acc[key] = value;\n        return acc;\n      }, {});\n    }\n  };\n}","map":{"version":3,"names":["getLastItem","isNumber","isObject","fromEntries","analyzeCSSValue","value","num","parseFloat","toString","unit","replace","String","unitless","px","_analyzeCSSValue","sortByBreakpointValue","a","b","parseInt","sortBps","breakpoints","Object","entries","sort","normalize","sorted","assign","values","keys","Set","subtract","_px","factor","endsWith","m","queryString","min","max","query","push","length","join","analyzeBreakpoints","_breakpoints$base","base","normalized","queries","map","_ref","index","entry","_entry","_ref2","_slicedToArray","breakpoint","minW","_ref3","_ref4","maxW","undefined","maxWQuery","minWQuery","minMaxQuery","_keys","_keysArr","Array","from","isResponsive","test","every","key","has","asObject","asArray","details","media","concat","_toConsumableArray","slice","toArrayValue","Error","result","bp","_test$bp","pop","toObjectValue","isArray","reduce","acc"],"sources":["../../src/breakpoint.ts"],"sourcesContent":["import { getLastItem } from \"./array\"\nimport { isNumber, isObject } from \"./assertion\"\nimport { fromEntries } from \"./object\"\nimport { Dict } from \"./types\"\n\nfunction analyzeCSSValue(value: number | string) {\n  const num = parseFloat(value.toString())\n  const unit = value.toString().replace(String(num), \"\")\n  return { unitless: !unit, value: num, unit }\n}\n\nexport function px(value: number | string | null): string | null {\n  if (value == null) return value\n  const { unitless } = analyzeCSSValue(value)\n  return unitless || isNumber(value) ? `${value}px` : value\n}\n\nconst sortByBreakpointValue = (a: any[], b: any[]) =>\n  parseInt(a[1], 10) > parseInt(b[1], 10) ? 1 : -1\n\nconst sortBps = (breakpoints: Dict): Dict =>\n  fromEntries(Object.entries(breakpoints).sort(sortByBreakpointValue))\n\nfunction normalize(breakpoints: Dict) {\n  const sorted = sortBps(breakpoints)\n  return Object.assign(Object.values(sorted), sorted) as string[]\n}\n\nfunction keys(breakpoints: Dict) {\n  const value = Object.keys(sortBps(breakpoints))\n  return new Set(value)\n}\n\nfunction subtract(value: string) {\n  if (!value) return value\n  value = px(value) ?? value\n  const factor = value.endsWith(\"px\")\n    ? -1\n    : // the equivalent of 1px in em using a 16px base\n      -0.0635\n  return isNumber(value)\n    ? `${value + factor}`\n    : value.replace(/(\\d+\\.?\\d*)/u, (m) => `${parseFloat(m) + factor}`)\n}\n\nfunction queryString(min: string | null, max?: string) {\n  const query = []\n\n  if (min) query.push(`@media screen and (min-width: ${px(min)})`)\n  if (query.length > 0 && max) query.push(\"and\")\n  if (max) query.push(`@media screen and (max-width: ${px(max)})`)\n\n  return query.join(\" \")\n}\n\nexport function analyzeBreakpoints(breakpoints: Dict) {\n  if (!breakpoints) return null\n\n  breakpoints.base = breakpoints.base ?? \"0px\"\n\n  const normalized = normalize(breakpoints)\n\n  const queries = Object.entries(breakpoints)\n    .sort(sortByBreakpointValue)\n    .map(([breakpoint, minW], index, entry) => {\n      let [, maxW] = entry[index + 1] ?? []\n      maxW = parseFloat(maxW) > 0 ? subtract(maxW) : undefined\n      return {\n        breakpoint,\n        minW,\n        maxW,\n        maxWQuery: queryString(null, maxW),\n        minWQuery: queryString(minW),\n        minMaxQuery: queryString(minW, maxW),\n      }\n    })\n\n  const _keys = keys(breakpoints)\n  const _keysArr = Array.from(_keys.values())\n\n  return {\n    keys: _keys,\n    normalized,\n    isResponsive(test: Dict) {\n      const keys = Object.keys(test)\n      return keys.length > 0 && keys.every((key) => _keys.has(key))\n    },\n    asObject: sortBps(breakpoints),\n    asArray: normalize(breakpoints),\n    details: queries,\n    media: [null, ...normalized.map((minW) => queryString(minW)).slice(1)],\n    toArrayValue(test: Dict) {\n      if (!isObject(test)) {\n        throw new Error(\"toArrayValue: value must be an object\")\n      }\n      const result = _keysArr.map((bp) => test[bp] ?? null)\n      while (getLastItem(result) === null) {\n        result.pop()\n      }\n      return result\n    },\n    toObjectValue(test: any[]) {\n      if (!Array.isArray(test)) {\n        throw new Error(\"toObjectValue: value must be an array\")\n      }\n      return test.reduce((acc, value, index) => {\n        const key = _keysArr[index]\n        if (key != null && value != null) acc[key] = value\n        return acc\n      }, {} as Dict)\n    },\n  }\n}\n\nexport type AnalyzeBreakpointsReturn = ReturnType<typeof analyzeBreakpoints>\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}