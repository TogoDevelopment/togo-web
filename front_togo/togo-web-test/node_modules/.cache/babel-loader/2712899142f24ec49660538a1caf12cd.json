{"ast":null,"code":"import _objectSpread from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/system/togo-web-test/src/components/Order/ViewOrder.jsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { useLocation, useParams, useHistory } from \"react-router-dom\";\nimport { AcceptOfferReq, GetAllBids, GetClientOrderDetails } from \"../../APIs/OrdersAPIs\";\nimport locationImg from \"../../assets/locationn.png\";\nimport Order, { GetOrderStatus } from \"./Order\";\nimport { Button } from \"react-bootstrap\";\nimport { CancelOrder } from \"../OrdersManager/CancelOrder\";\nimport { refreshPage } from \"../../Functions/CommonFunctions\";\n\nfunction Label(_ref) {\n  var val = _ref.val,\n      text = _ref.text;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-prop-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 13\n    }\n  }, text), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 13\n    }\n  }, val));\n}\n\nexport default function ViewOrder(props) {\n  var _this = this;\n\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  var history = useHistory();\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      orderInfo = _useState2[0],\n      setOrderInfo = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      orderMoreInfo = _useState4[0],\n      setOrderMoreInfo = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      costDetail = _useState6[0],\n      setCostDetails = _useState6[1];\n\n  useEffect(function () {\n    GetClientOrderDetails(id).then(function (res) {\n      setOrderMoreInfo(res.data.server_response[0]);\n    });\n    GetAllBids(id).then(function (res) {\n      setOrderInfo(_objectSpread(_objectSpread({}, res.data.OrderDetail), {}, {\n        bidsCount: res.data.BidCount\n      }));\n      setCostDetails(res.data.CostDetail);\n    });\n  }, [id]);\n  var orderStatus = GetOrderStatus(orderInfo.IsAcceptDelivery, orderInfo.Orderfinished, orderInfo.pickup_date, costDetail.length);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Order, {\n    order: orderInfo\n    /* location.state.orderObj */\n    ,\n    id: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    val: orderInfo.PickupName,\n    text: \"Pickup From\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Label, {\n    val: orderInfo.PickupMobile,\n    text: \"Pickup Mobile Number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    val: orderInfo.ReceiverName,\n    text: \"Receiver Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Label, {\n    val: orderInfo.ReceiverMobile,\n    text: \"Receiver Mobile Number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 21\n    }\n  }))), (orderStatus == \"WAITING-FOR-BIDS\" || orderStatus == \"AVAILABEL-BIDS\") && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 90\n    }\n  }, /*#__PURE__*/React.createElement(CancelOrder, {\n    orderId: id,\n    className: \"mt-3 d-flex align-items-center m-auto btn-grad rounded-22\",\n    onSuccess: function onSuccess() {\n      history.goBack();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"fw-bold text-center togo-border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, \"Available offers\")), !costDetail.length && orderStatus == \"WAITING-FOR-BIDS\" && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, \"No offers\"), !!costDetail.length && orderStatus == \"AVAILABEL-BIDS\" && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 72\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"fw-bold text-center togo-border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, \"Available offers\"), costDetail.map(function (bid) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"align-items-center d-flex justify-content-around mt-3\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      style: {\n        width: \"100px\",\n        height: \"100px\",\n        objectFit: \"cover\"\n      },\n      src: \"http://46.253.93.4/togo/MobileAPi/\".concat(bid.TransporterPersonalImg),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 33\n      }\n    }, bid.TransporterName), /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 33\n      }\n    }, bid.BidCost)), /*#__PURE__*/React.createElement(Button, {\n      className: \"btn-grad rounded-22 mt-3 d-block m-auto\",\n      onClick: function onClick() {\n        AcceptOfferReq(bid.IdTransporterBidRequist, id, bid.BidCost).then(function (resp) {\n          if (resp.data.indexOf(\"Success\") !== -1) {\n            refreshPage();\n          }\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 29\n      }\n    }, \"Accept Offer\"));\n  })), (orderStatus == \"BID-ACCEPTED\" || orderStatus == \"OUT-FOR-DELIVERY\") && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"fw-bold text-center togo-border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, \"Transporter details\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    val: orderMoreInfo.FullNameCustomer,\n    text: \"Transporter name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Label, {\n    val: orderMoreInfo.CarNumType,\n    text: \"Vehicle type\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    val: orderMoreInfo.CarLicenceNum,\n    text: \"Vehicle number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Label, {\n    val: orderMoreInfo.ColorName,\n    text: \"Vehicle color\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    val: orderMoreInfo.TransNumber,\n    text: \"Transporter mobile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-50 text-start d-flex align-items-center shadow-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: locationImg,\n    style: {\n      width: \"24px\",\n      height: \"24px\"\n    },\n    className: \"me-1\",\n    alt: \"worldicon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"97%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, \"Track Transporter\")))));\n}","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/Order/ViewOrder.jsx"],"names":["React","useEffect","useState","useLocation","useParams","useHistory","AcceptOfferReq","GetAllBids","GetClientOrderDetails","locationImg","Order","GetOrderStatus","Button","CancelOrder","refreshPage","Label","val","text","ViewOrder","props","id","history","orderInfo","setOrderInfo","orderMoreInfo","setOrderMoreInfo","costDetail","setCostDetails","then","res","data","server_response","OrderDetail","bidsCount","BidCount","CostDetail","orderStatus","IsAcceptDelivery","Orderfinished","pickup_date","length","PickupName","PickupMobile","ReceiverName","ReceiverMobile","goBack","map","bid","width","height","objectFit","TransporterPersonalImg","TransporterName","BidCost","IdTransporterBidRequist","resp","indexOf","FullNameCustomer","CarNumType","CarLicenceNum","ColorName","TransNumber"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useLocation, useParams, useHistory } from \"react-router-dom\";\r\nimport { AcceptOfferReq, GetAllBids, GetClientOrderDetails } from \"../../APIs/OrdersAPIs\";\r\nimport locationImg from \"../../assets/locationn.png\";\r\nimport Order, { GetOrderStatus } from \"./Order\";\r\n\r\nimport { Button } from \"react-bootstrap\";\r\nimport { CancelOrder } from \"../OrdersManager/CancelOrder\";\r\nimport { refreshPage } from \"../../Functions/CommonFunctions\";\r\n\r\nfunction Label({val, text}){\r\n    return (\r\n        <div className=\"w-50\">\r\n            <div className=\"order-prop-label\">{text}</div>\r\n            <div>{val}</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default function ViewOrder(props) {\r\n    const {id} = useParams();\r\n    const history = useHistory();\r\n    const [orderInfo, setOrderInfo] = useState({});\r\n    const [orderMoreInfo, setOrderMoreInfo] = useState({});\r\n    const [costDetail, setCostDetails] = useState([]);\r\n\r\n    useEffect(() => {\r\n        GetClientOrderDetails(id).then((res) => {\r\n            setOrderMoreInfo(res.data.server_response[0]);\r\n        });\r\n\r\n        GetAllBids(id).then((res) => {\r\n            setOrderInfo({...res.data.OrderDetail, bidsCount: res.data.BidCount});\r\n            setCostDetails(res.data.CostDetail);\r\n        });\r\n    }, [id]);\r\n    const orderStatus = GetOrderStatus(orderInfo.IsAcceptDelivery, orderInfo.Orderfinished, orderInfo.pickup_date, costDetail.length);\r\n    return (\r\n        <div>\r\n            <Order order={orderInfo/* location.state.orderObj */} id={id} />\r\n            <div className=\"\">\r\n                \r\n                <div className=\"d-flex\">\r\n                    <Label val={orderInfo.PickupName} text={\"Pickup From\"}/>\r\n                    <Label val={orderInfo.PickupMobile} text={\"Pickup Mobile Number\"}/>\r\n                    \r\n                </div>\r\n\r\n                <div className=\"d-flex\">\r\n                    <Label val={orderInfo.ReceiverName} text={\"Receiver Name\"}/>\r\n                    <Label val={orderInfo.ReceiverMobile} text={\"Receiver Mobile Number\"}/>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            { (orderStatus == \"WAITING-FOR-BIDS\" ||  orderStatus == \"AVAILABEL-BIDS\") && <div>\r\n                <CancelOrder\r\n                    orderId={id} \r\n                    className=\"mt-3 d-flex align-items-center m-auto btn-grad rounded-22\" \r\n                    onSuccess={()=>{\r\n                        history.goBack();\r\n                    }} \r\n                />\r\n                <h4 className=\"fw-bold text-center togo-border\">Available offers</h4>\r\n            </div>\r\n            }\r\n            \r\n            {!costDetail.length && orderStatus == \"WAITING-FOR-BIDS\" && \r\n                <p className=\"text-center\">No offers</p>\r\n            }\r\n            {!!costDetail.length && orderStatus == \"AVAILABEL-BIDS\" && <div>\r\n                <h4 className=\"fw-bold text-center togo-border\">Available offers</h4>\r\n                {costDetail.map((bid) => {\r\n                    return (\r\n                        <div>\r\n                            <div className=\"align-items-center d-flex justify-content-around mt-3\">\r\n                                <img \r\n                                    style={{width: \"100px\", height: \"100px\", objectFit: \"cover\"}} \r\n                                    src={`http://46.253.93.4/togo/MobileAPi/${bid.TransporterPersonalImg}`} \r\n                                />\r\n                                <div>{bid.TransporterName}</div>\r\n                                <div>{bid.BidCost}</div>\r\n                            </div>\r\n                            <Button\r\n                                className=\"btn-grad rounded-22 mt-3 d-block m-auto\" \r\n                                onClick={()=>{\r\n                                    AcceptOfferReq(\r\n                                        bid.IdTransporterBidRequist,\r\n                                        id,\r\n                                        bid.BidCost\r\n                                    ).then((resp)=>{\r\n                                        if(resp.data.indexOf(\"Success\") !== -1){\r\n                                            refreshPage();\r\n                                        }\r\n                                    })\r\n                                }}>\r\n                                    Accept Offer\r\n                                </Button>\r\n                        </div>\r\n                    )\r\n                })}\r\n            </div>}\r\n\r\n            { (orderStatus == \"BID-ACCEPTED\" || orderStatus == \"OUT-FOR-DELIVERY\" ) && \r\n            <div>\r\n                \r\n                <h1 className=\"fw-bold text-center togo-border\">Transporter details</h1>\r\n\r\n                <div className=\"d-flex\">\r\n                    <Label val={orderMoreInfo.FullNameCustomer} text={\"Transporter name\"} />\r\n                    <Label val={orderMoreInfo.CarNumType} text={\"Vehicle type\"} />\r\n                </div>\r\n                <div className=\"d-flex\">\r\n                    <Label val={orderMoreInfo.CarLicenceNum} text={\"Vehicle number\"} />\r\n                    <Label val={orderMoreInfo.ColorName} text={\"Vehicle color\"} />\r\n                </div>\r\n                <div className=\"d-flex\">\r\n                    <Label val={orderMoreInfo.TransNumber} text={\"Transporter mobile\"} />\r\n                    <div className=\"w-50 text-start d-flex align-items-center shadow-none\">\r\n                        <img src={locationImg} style={{width: \"24px\", height: \"24px\"}} className=\"me-1\" alt=\"worldicon\" />\r\n                        <div style={{width: \"97%\"}}>    \r\n                            Track Transporter\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>}\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}