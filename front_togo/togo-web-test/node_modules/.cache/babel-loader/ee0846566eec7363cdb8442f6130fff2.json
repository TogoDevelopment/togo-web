{"ast":null,"code":"import _regeneratorRuntime from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/system/togo-web-test/src/components/App/App.jsx\";\n\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\nimport \"./App.css\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { useSelector } from \"react-redux\";\nimport { I18nProvider } from '../../i18n';\nimport { LOCALES_TYPES } from \"../../i18n/locales\";\nimport Account from \"../../Container/Account/Account\";\nimport Home from \"../../Container/Home/Home\";\nimport Toast from \"../Toast\";\nimport Privacy from \"../Privacy\";\nimport Login from \"../Login\";\nimport ActivationCodeForm from \"../ActivationCodeForm\";\nimport SelectLanguage from \"../SelectLanguage\";\nimport PersonalInfoForm from \"../PersonalInfoForm\";\nimport BusinessInfoForm from \"../BusinessInfoForm\";\nimport ViewOrder from \"../Order/ViewOrder\";\nimport Dashboard from \"../Dashboard\";\nimport AdminPanel from \"../AdminPanel/AdminPanel\";\nimport CustomerInfo from \"../AdminPanel/CustomerInfo/CustomerInfo\";\nimport TransporterPersonalInfo from \"../TransporterPersonalInfo\";\nimport VehicleDetails from \"../VechicleDetails\";\nimport WorkInfo from \"../WorkInfo\";\nimport WayBill from \"../WayBill\";\nimport { io } from \"socket.io-client\";\nimport { useDispatch } from \"react-redux\";\nimport { toastNotification } from \"../../Actions/GeneralActions\";\nimport { Button } from 'react-bootstrap';\nimport { requestPermission, getUserToken, onMessageListener } from \"../../firebase\"; // import { test } from \"../../firebase\";\n// import { requestPermission } from \"../../firebase\";\n\nvar App = function App() {\n  var dispatch = useDispatch();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      socket = _useState2[0],\n      setSocket = _useState2[1];\n\n  useEffect(function () {\n    // test();\n    // console.log(requestPermission);\n    // requestPermission();\n    if (localStorage.getItem(\"userId\") != undefined) {\n      var initScket = io(\"http://46.253.93.4:5000\");\n      initScket.emit(\"addUpdateUser\", localStorage.getItem(\"userId\"), localStorage.getItem(\"UserType\"));\n      setSocket(initScket);\n    }\n  }, []);\n  useEffect(function () {\n    if (localStorage.getItem(\"userId\") != undefined) {\n      socket === null || socket === void 0 ? void 0 : socket.on(\"getNotification\", function (title, msg, type) {\n        dispatch(toastNotification(title, msg, type));\n      });\n    }\n  }, [socket]);\n  var language = useSelector(function (state) {\n    return state.general.language;\n  }); //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  requestPermission();\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isTokenFound = _useState4[0],\n      setTokenFound = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      token = _useState6[0],\n      setToken = _useState6[1];\n\n  console.log(\"Token found\", isTokenFound); // To load once\n\n  useEffect(function () {\n    var data;\n\n    function tokenFunc() {\n      return _tokenFunc.apply(this, arguments);\n    }\n\n    function _tokenFunc() {\n      _tokenFunc = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return getUserToken(setTokenFound);\n\n              case 2:\n                data = _context.sent;\n\n                if (data) {\n                  console.log(\"Token is\", data);\n                  setToken(data);\n                }\n\n                return _context.abrupt(\"return\", data);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _tokenFunc.apply(this, arguments);\n    }\n\n    tokenFunc();\n  }, [setTokenFound]);\n\n  var _useState7 = useState({\n    title: \"\",\n    body: \"\"\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      notification = _useState8[0],\n      setNotification = _useState8[1];\n\n  console.log(notification);\n  onMessageListener().then(function (payload) {\n    setNotification({\n      title: payload.notification.title,\n      body: payload.notification.body\n    });\n    console.log(payload);\n  }).catch(function (err) {\n    return console.log(\"failed: \", err);\n  }); //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  useLayoutEffect(function () {\n    document.dir = language === LOCALES_TYPES.ENGLISH ? \"ltr\" : \"rtl\";\n    document.documentElement.lang = language;\n\n    if (language === LOCALES_TYPES.ENGLISH) {\n      document.getElementById(\"bootStyle\").href = \"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\";\n    } else {\n      document.getElementById(\"bootStyle\").href = \"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.rtl.min.css\";\n    }\n  }, [language]);\n  /* function requestPermission() {\r\n      console.log('Requesting permission...');\r\n      Notification.requestPermission().then((permission) => {\r\n          if (permission === 'granted') {\r\n              console.log('Notification permission granted.');\r\n          }\r\n      })\r\n  } */\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(I18nProvider, {\n    locale: language,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Router, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }\n  }, \" \", \" \", /*#__PURE__*/React.createElement(Route, {\n    path: \"/account\",\n    component: function component() {\n      return /*#__PURE__*/React.createElement(Account, {\n        path: \"/account\",\n        socket: socket,\n        token: token,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 65\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/privacy\",\n    component: Privacy,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/login\",\n    component: Login,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/activate\",\n    component: ActivationCodeForm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/lang\",\n    component: SelectLanguage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/personal-info\",\n    component: PersonalInfoForm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/trans-personal-info\",\n    component: TransporterPersonalInfo,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/vehicle-info\",\n    component: VehicleDetails,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/work-info\",\n    component: WorkInfo,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/business-info\",\n    component: BusinessInfoForm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/vieworder/:id\",\n    component: ViewOrder,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/dashboard\",\n    component: Dashboard,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/adminapp\",\n    component: AdminPanel,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/customerInfo/:id/:type\",\n    component: CustomerInfo,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }), \" \", /*#__PURE__*/React.createElement(Route, {\n    path: \"/print/:id\",\n    component: WayBill,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  }), \" \", /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    component: Home,\n    exact: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(Toast, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/App/App.jsx"],"names":["React","useEffect","useLayoutEffect","useState","BrowserRouter","Router","Switch","Route","useSelector","I18nProvider","LOCALES_TYPES","Account","Home","Toast","Privacy","Login","ActivationCodeForm","SelectLanguage","PersonalInfoForm","BusinessInfoForm","ViewOrder","Dashboard","AdminPanel","CustomerInfo","TransporterPersonalInfo","VehicleDetails","WorkInfo","WayBill","io","useDispatch","toastNotification","Button","requestPermission","getUserToken","onMessageListener","App","dispatch","socket","setSocket","localStorage","getItem","undefined","initScket","emit","on","title","msg","type","language","state","general","isTokenFound","setTokenFound","token","setToken","console","log","data","tokenFunc","body","notification","setNotification","then","payload","catch","err","document","dir","ENGLISH","documentElement","lang","getElementById","href"],"mappings":"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","sourcesContent":["import React, { useEffect, useLayoutEffect, useState } from \"react\";\r\nimport \"./App.css\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { I18nProvider } from '../../i18n';\r\nimport { LOCALES_TYPES } from \"../../i18n/locales\";\r\nimport Account from \"../../Container/Account/Account\";\r\nimport Home from \"../../Container/Home/Home\";\r\nimport Toast from \"../Toast\";\r\nimport Privacy from \"../Privacy\";\r\nimport Login from \"../Login\";\r\nimport ActivationCodeForm from \"../ActivationCodeForm\";\r\nimport SelectLanguage from \"../SelectLanguage\";\r\nimport PersonalInfoForm from \"../PersonalInfoForm\";\r\nimport BusinessInfoForm from \"../BusinessInfoForm\";\r\nimport ViewOrder from \"../Order/ViewOrder\";\r\nimport Dashboard from \"../Dashboard\";\r\nimport AdminPanel from \"../AdminPanel/AdminPanel\";\r\nimport CustomerInfo from \"../AdminPanel/CustomerInfo/CustomerInfo\";\r\nimport TransporterPersonalInfo from \"../TransporterPersonalInfo\";\r\nimport VehicleDetails from \"../VechicleDetails\";\r\nimport WorkInfo from \"../WorkInfo\";\r\nimport WayBill from \"../WayBill\";\r\n\r\nimport { io } from \"socket.io-client\";\r\n\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toastNotification } from \"../../Actions/GeneralActions\";\r\n\r\nimport { Button } from 'react-bootstrap';\r\n\r\nimport { requestPermission, getUserToken, onMessageListener } from \"../../firebase\";\r\n// import { test } from \"../../firebase\";\r\n// import { requestPermission } from \"../../firebase\";\r\n\r\nconst App = () => {\r\n\r\n    let dispatch = useDispatch();\r\n    const [socket, setSocket] = useState(null);\r\n\r\n    useEffect(() => {\r\n        // test();\r\n        // console.log(requestPermission);\r\n        // requestPermission();\r\n        if (localStorage.getItem(\"userId\") != undefined) {\r\n            const initScket = io(\"http://46.253.93.4:5000\");\r\n            initScket.emit(\"addUpdateUser\", localStorage.getItem(\"userId\"), localStorage.getItem(\"UserType\"));\r\n            setSocket(initScket);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (localStorage.getItem(\"userId\") != undefined) {\r\n            socket?.on(\"getNotification\", (title, msg, type) => {\r\n                dispatch(toastNotification(title, msg, type));\r\n            })\r\n        }\r\n    }, [socket]);\r\n\r\n    const language = useSelector(state => state.general.language);\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    requestPermission();\r\n\r\n     const [isTokenFound, setTokenFound] = useState(false);\r\n\r\n     const [token, setToken] = useState();\r\n \r\n     console.log(\"Token found\", isTokenFound);\r\n \r\n     // To load once\r\n     useEffect(() => {\r\n         let data;\r\n \r\n         async function tokenFunc() {\r\n             data = await getUserToken(setTokenFound);\r\n             if (data) {\r\n                 console.log(\"Token is\", data);\r\n                 setToken(data);\r\n             }\r\n             return data;\r\n         }\r\n \r\n         tokenFunc();\r\n     }, [setTokenFound]);\r\n \r\n     const [notification, setNotification] = useState({ title: \"\", body: \"\" });\r\n \r\n     console.log(notification);\r\n \r\n     onMessageListener().then((payload) => {\r\n         setNotification({\r\n             title: payload.notification.title,\r\n             body: payload.notification.body,\r\n         });\r\n         console.log(payload);\r\n     }).catch((err) => console.log(\"failed: \", err));\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    useLayoutEffect(() => {\r\n        document.dir = language === LOCALES_TYPES.ENGLISH ? \"ltr\" : \"rtl\";\r\n        document.documentElement.lang = language;\r\n        if (language === LOCALES_TYPES.ENGLISH) {\r\n            document.getElementById(\"bootStyle\").href = \"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\";\r\n        } else {\r\n            document.getElementById(\"bootStyle\").href = \"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.rtl.min.css\"\r\n        }\r\n\r\n    }, [language])\r\n\r\n    /* function requestPermission() {\r\n        console.log('Requesting permission...');\r\n        Notification.requestPermission().then((permission) => {\r\n            if (permission === 'granted') {\r\n                console.log('Notification permission granted.');\r\n            }\r\n        })\r\n    } */\r\n\r\n    return (\r\n        <>\r\n            {/* <Button onClick={() => {\r\n                requestPermission();\r\n            }}>test</Button> */}\r\n            <I18nProvider locale={language}>\r\n                <Router>\r\n                    <Switch>\r\n                        {/* <Route path=\"/my-network\" component={Account}/> */} {/* edited (add my-network route) */}\r\n                        {/* <Route path=\"/print\" component={Account}/> */} {/* edited (add my-network route) */}\r\n                        <Route path=\"/account\" component={() => <Account path={\"/account\"} socket={socket} token={token} />} />\r\n                        <Route path=\"/privacy\" component={Privacy} />\r\n                        <Route path=\"/login\" component={Login} />\r\n                        <Route path=\"/activate\" component={ActivationCodeForm} />\r\n\r\n                        <Route path=\"/lang\" component={SelectLanguage} />\r\n                        <Route path=\"/personal-info\" component={PersonalInfoForm} />\r\n                        <Route path=\"/trans-personal-info\" component={TransporterPersonalInfo} />\r\n                        <Route path=\"/vehicle-info\" component={VehicleDetails} />\r\n                        <Route path=\"/work-info\" component={WorkInfo} />\r\n                        <Route path=\"/business-info\" component={BusinessInfoForm} />\r\n                        <Route path=\"/vieworder/:id\" component={ViewOrder} />\r\n\r\n                        <Route path=\"/dashboard\" component={Dashboard} />\r\n                        <Route path=\"/adminapp\" component={AdminPanel} />\r\n                        <Route path=\"/customerInfo/:id/:type\" component={CustomerInfo} /> {/* edited (add CustomerInfo route) */}\r\n                        <Route path=\"/print/:id\" component={WayBill} /> {/* edited (add CustomerInfo route) */}\r\n                        <Route path=\"/\" component={Home} exact />\r\n                    </Switch>\r\n                </Router>\r\n                <Toast />\r\n            </I18nProvider>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}