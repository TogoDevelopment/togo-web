{"ast":null,"code":"import _slicedToArray from\"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import\"./Header.css\";import{Menu,Button,MenuButton,MenuList,MenuItem,Box,Icon,Text,Flex,Image}from\"@chakra-ui/react\";import{SettingsIcon}from'@chakra-ui/icons';import{useSelector,useDispatch}from\"react-redux\";import{useHistory}from\"react-router\";import{IoIosWallet,IoIosCard,IoMdPerson,IoIosExit}from'react-icons/io';import{IoCaretBack}from'react-icons/io5';import{Link}from\"react-router-dom\";import{getWallet}from\"../../APIs/ProfileAPIs\";import{setWallet,toastMessage}from\"../../Actions/GeneralActions\";import{LOGOUT}from\"../../Actions/ActionsTypes\";import whiteLogo from'../../assets/whiteLogo.png';import translate from\"../../i18n/translate\";import LanguageSelector from\"../LanguageSelector/LanguageSelector\";import Loader from\"../Loader/Loader\";var styles={settingsButton:{variant:\"ghost\",size:\"lg\",iconSpacing:0,lineHeight:\"0.2\",_active:{background:\"none\",transform:\"scale(1.3)\",color:\"black\",opacity:\"0.5\"},_hover:{transform:\"scale(1.3)\"},_focus:{outline:\"none\"}},actionsContainer:{position:\"absolute\",top:\"1rem\",right:\"1rem\",alignItems:\"center\",background:\"#00000036\",borderRadius:\"29px\"},headerItemsContainer:{alignItems:\"center\",cursor:\"pointer\",px:\"1.5rem\",_hover:{transform:\"scale(1.1)\",underline:\"unset\"}},horizontalBreakLine:{w:\"3px\",h:\"20px\",bgColor:\"white\",borderRadius:999,opacity:0.5},link:{color:\"white\",textDecoration:\"none\"},backBtnContainer:{position:\"absolute\",left:\"1rem\",top:\"1rem\",alignItems:\"center\",pt:\"0.2rem\"},logo:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",_hover:{opacity:0.5,transform:\"scale(1.2) translate(-40%, -40%)\"}},headerStyle:{position:\"relative\",background:\"linear-gradient(to left, #26A69A,#69D4A5)\",color:\"#fff\",textAlign:\"center\",padding:\"40px 0\",height:\"140px\",direction:\"ltr\"}};function Header(){var authenticated=useSelector(function(state){return state.general.authenticated;});//const [wallet, setWallet] = useState(null);\nvar wallet=useSelector(function(state){return state.general.wallet;});var history=useHistory();var _useState=useState(history.location.pathname==='/orders'||history.location.pathname==='/'),_useState2=_slicedToArray(_useState,2),isHomePage=_useState2[0],setIsHomePage=_useState2[1];var dispatch=useDispatch();var handleLogout=function handleLogout(){dispatch({type:LOGOUT});localStorage.removeItem(\"userId\");localStorage.removeItem(\"TokenDevice\");localStorage.removeItem(\"UserType\");localStorage.removeItem(\"userId\");history.push(\"/\");};useEffect(function(){if(authenticated){getWallet().then(function(_ref){var server_response=_ref.data.server_response;dispatch(setWallet(server_response[0].TransporterBalance));}).catch(function(err){dispatch(toastMessage(err));});}return function(){return setWallet(null);};},[authenticated,dispatch]);useEffect(function(){var historyUnListen=history.listen(function(location){setIsHomePage(location.pathname==='/account/orders'||location.pathname==='/');});return function(){return historyUnListen();};},[history]);return/*#__PURE__*/React.createElement(\"header\",{style:styles.headerStyle,className:\"togo-header\"},authenticated&&/*#__PURE__*/React.createElement(Box,null,!isHomePage&&/*#__PURE__*/React.createElement(Flex,styles.backBtnContainer,/*#__PURE__*/React.createElement(Flex,Object.assign({},styles.headerItemsContainer,{onClick:function onClick(){return history.goBack();}}),/*#__PURE__*/React.createElement(Icon,{as:IoCaretBack,mr:2,fontSize:\"2xl\"}),/*#__PURE__*/React.createElement(Text,null,translate(\"HEADER.BACK\")))),/*#__PURE__*/React.createElement(Flex,styles.actionsContainer,/*#__PURE__*/React.createElement(Link,{to:\"/account/main/financial-transaction\",style:styles.link},/*#__PURE__*/React.createElement(Flex,styles.headerItemsContainer,/*#__PURE__*/React.createElement(Icon,{as:IoIosWallet,fontSize:\"2xl\"}),isNaN(wallet)?/*#__PURE__*/React.createElement(Loader,{color:\"white\",width:\"40px\",height:\"40px\"}):/*#__PURE__*/React.createElement(Text,{fontSize:\"14px\"},wallet,\" NIS\"))),/*#__PURE__*/React.createElement(Box,styles.horizontalBreakLine),/*#__PURE__*/React.createElement(LanguageSelector,null),/*#__PURE__*/React.createElement(Box,styles.horizontalBreakLine),/*#__PURE__*/React.createElement(Menu,null,/*#__PURE__*/React.createElement(MenuButton,Object.assign({},styles.settingsButton,{as:Button,rightIcon:/*#__PURE__*/React.createElement(SettingsIcon,null)})),/*#__PURE__*/React.createElement(MenuList,{color:\"black\"},/*#__PURE__*/React.createElement(MenuItem,{icon:/*#__PURE__*/React.createElement(IoMdPerson,null),onClick:function onClick(){return history.push(\"/account/account-details\");}},translate(\"HEADER.ACCOUNT_PROFILE\")),/*#__PURE__*/React.createElement(MenuItem,{icon:/*#__PURE__*/React.createElement(IoIosCard,null),onClick:function onClick(){return history.push(\"/\");}},translate(\"HEADER.PAYMENT_INFO\")),/*#__PURE__*/React.createElement(MenuItem,{icon:/*#__PURE__*/React.createElement(IoIosExit,null),onClick:handleLogout},translate(\"HEADER.LOGOUT\")))))),/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(Image,Object.assign({},styles.logo,{src:whiteLogo,w:100}))));}export default Header;","map":null,"metadata":{},"sourceType":"module"}