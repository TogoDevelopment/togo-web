{"ast":null,"code":"import _slicedToArray from \"/home/system/togo-web-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/system/togo-web-test/src/components/CreateAddress.jsx\";\nimport translate from \"../i18n/translate\";\nimport React, { useEffect, useState } from \"react\";\nimport { Button, Col, Form, Modal, Row, FloatingLabel, Spinner } from \"react-bootstrap\";\nimport { CreateAddressReq, GetCityRegion } from \"../APIs/OrdersAPIs\";\nimport { useDispatch } from \"react-redux\"; // import { toastNotification } from \"../../Actions/GeneralActions\";\n\nexport default function CreateAddress(_ref) {\n  var _cities$map,\n      _this = this;\n\n  var onSuccess = _ref.onSuccess,\n      children = _ref.children;\n  var dispatch = useDispatch();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      show = _useState2[0],\n      setShow = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      cities = _useState4[0],\n      setCities = _useState4[1];\n\n  useEffect(function () {\n    //if(show === true) {\n    GetCityRegion().then(function (res) {\n      /* edited (insert an empty elemnt to the beginning of the array to unselect the first element and make the city required) */\n      var tempArr = res.data.server_response;\n      tempArr === null || tempArr === void 0 ? void 0 : tempArr.unshift({\n        IdCity: '0',\n        Name: 'Choose City',\n        LatRegion: '0',\n        LongRegion: '0'\n      });\n      setCities(tempArr);\n    }); //}\n  }, []);\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      validated = _useState8[0],\n      setValidated = _useState8[1];\n  /* edited (handleClose handler added) */\n\n\n  var handleClose = function handleClose() {\n    setShow(false);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    onClick: function onClick() {\n      setShow(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }\n  }, children), /*#__PURE__*/React.createElement(Modal, {\n    show: show,\n    onHide: function onHide() {\n      setShow(false);\n    },\n    centered: true,\n    animation: true,\n    backdrop: \"static\",\n    style: {\n      backgroundColor: \"rgba(0,0,0,0.5)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, translate(\"ORDERS.ADD_ADDRESS\"))), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    id: \"addressForm\",\n    validated: validated,\n    noValidate: true\n    /* ref={formRef} */\n    ,\n    onSubmit: function onSubmit(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var formData = new FormData(event.target),\n          formDataObj = Object.fromEntries(formData.entries());\n      var form = event.currentTarget;\n\n      if (form.checkValidity() === true) {\n        setLoading(true);\n        CreateAddressReq(formDataObj).then(function (res) {\n          if (res.data == \"Something went wrong\" || res.data == \"Blocked\" || res.data == \"TokenError\") {\n            dispatch(toastNotification(\"Error!\", res.data, \"error\"));\n          } else {\n            setLoading(false);\n            setShow(false);\n            onSuccess && onSuccess();\n          }\n        });\n      }\n\n      setValidated(true); // console.log(formDataObj);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FloatingLabel, {\n    className: \"mb-3\",\n    controlId: \"formBasicEmail\",\n    label: translate(\"ORDERS.ADDRESS_NAME\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"...\",\n    name: \"placename\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n    type: \"invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 29\n    }\n  }, \"Please add place name\")), /*#__PURE__*/React.createElement(FloatingLabel, {\n    className: \"mb-3\",\n    controlId: \"userTel\",\n    label: translate(\"ORDERS.ADDRESS_PHONE\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"tel\",\n    placeholder: \"...\",\n    name: \"phone\",\n    pattern: \"^05[0-9]{8}?$\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n    type: \"invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 29\n    }\n  }, \"Please enter a valid phone number example 0568000000\")), /*#__PURE__*/React.createElement(FloatingLabel, {\n    className: \"mb-3\",\n    controlId: \"AddressCity\",\n    label: translate(\"ORDERS.ADDRESS_CITY\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Select, {\n    name: \"city\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 29\n    }\n  }, cities === null || cities === void 0 ? void 0 : (_cities$map = cities.map) === null || _cities$map === void 0 ? void 0 : _cities$map.call(cities, function (city) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: city.IdCity,\n      value: city.IdCity === '0' ? \"\" : city.IdCity,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 44\n      }\n    }, city.Name);\n  }))), /*#__PURE__*/React.createElement(FloatingLabel, {\n    className: \"mb-3\",\n    controlId: \"userAddress\",\n    label: translate(\"ORDERS.ADDRESS\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"...\",\n    name: \"address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(FloatingLabel, {\n    className: \"mb-3\",\n    controlId: \"addressInfo\",\n    label: translate(\"ORDERS.ADDRESS_INFO\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"...\",\n    name: \"addressinfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FloatingLabel, {\n    className: \"mb-3\",\n    controlId: \"addCountry\",\n    label: translate(\"ORDERS.ADDRESS_COUNTRY\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"...\",\n    name: \"country\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FloatingLabel, {\n    className: \"mb-3\",\n    controlId: \"addressCode\",\n    label: translate(\"ORDERS.ADDRESS_CODE\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"...\",\n    name: \"zipcode\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 37\n    }\n  })))), /*#__PURE__*/React.createElement(Form.Check, {\n    type: \"switch\",\n    id: \"custom-switch\",\n    label: translate(\"ORDERS.ADDRESS_SHARED\"),\n    name: \"isShared\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-primary\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 25\n    }\n  }, loading && /*#__PURE__*/React.createElement(Spinner, {\n    size: \"sm\",\n    className: \"me-1\",\n    animation: \"border\",\n    variant: \"light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 41\n    }\n  }), translate(\"GENERAL.PROCEED\")), \"  \", /*#__PURE__*/React.createElement(Button, {\n    variant: \"danger\",\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }, translate(\"GENERAL.CANCEL\"))))));\n}","map":{"version":3,"sources":["/home/system/togo-web-test/src/components/CreateAddress.jsx"],"names":["translate","React","useEffect","useState","Button","Col","Form","Modal","Row","FloatingLabel","Spinner","CreateAddressReq","GetCityRegion","useDispatch","CreateAddress","onSuccess","children","dispatch","show","setShow","cities","setCities","then","res","tempArr","data","server_response","unshift","IdCity","Name","LatRegion","LongRegion","loading","setLoading","validated","setValidated","handleClose","backgroundColor","event","preventDefault","stopPropagation","formData","FormData","target","formDataObj","Object","fromEntries","entries","form","currentTarget","checkValidity","toastNotification","map","city"],"mappings":"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","sourcesContent":["import translate from \"../i18n/translate\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Button, Col, Form, Modal, Row, FloatingLabel, Spinner } from \"react-bootstrap\";\r\nimport { CreateAddressReq, GetCityRegion } from \"../APIs/OrdersAPIs\";\r\nimport { useDispatch } from \"react-redux\";\r\n// import { toastNotification } from \"../../Actions/GeneralActions\";\r\n\r\nexport default function CreateAddress({ onSuccess, children }) {\r\n\r\n    let dispatch = useDispatch();\r\n\r\n    const [show, setShow] = useState(false);\r\n    const [cities, setCities] = useState([]);\r\n\r\n    useEffect(() => {\r\n        //if(show === true) {\r\n        GetCityRegion().then((res) => {\r\n            /* edited (insert an empty elemnt to the beginning of the array to unselect the first element and make the city required) */\r\n            let tempArr = res.data.server_response;\r\n            tempArr?.unshift({ IdCity: '0', Name: 'Choose City', LatRegion: '0', LongRegion: '0' });\r\n            setCities(tempArr);\r\n        });\r\n        //}\r\n    }, []);\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [validated, setValidated] = useState(false);\r\n\r\n\r\n    /* edited (handleClose handler added) */\r\n    const handleClose = () => {\r\n        setShow(false);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <span onClick={() => {\r\n                setShow(true);\r\n            }}>\r\n\r\n                {children}\r\n            </span>\r\n\r\n            {/*  edited (fullscreen removed and style added) */}\r\n            <Modal\r\n                show={show}\r\n                onHide={() => { setShow(false) }}\r\n                centered\r\n                animation={true}\r\n                backdrop=\"static\"\r\n\r\n                style={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}\r\n            >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>{translate(\"ORDERS.ADD_ADDRESS\")}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form id=\"addressForm\" validated={validated} noValidate /* ref={formRef} */ onSubmit={(event) => {\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                        const formData = new FormData(event.target),\r\n                            formDataObj = Object.fromEntries(formData.entries())\r\n                        const form = event.currentTarget;\r\n                        if (form.checkValidity() === true) {\r\n                            setLoading(true);\r\n                            CreateAddressReq(formDataObj).then((res) => {\r\n                                if (\r\n                                    res.data == \"Something went wrong\" ||\r\n                                    res.data == \"Blocked\" ||\r\n                                    res.data == \"TokenError\"\r\n                                ) {\r\n                                    dispatch(toastNotification(\"Error!\", res.data, \"error\"));\r\n                                } else {\r\n                                    setLoading(false);\r\n                                    setShow(false);\r\n                                    onSuccess && onSuccess();\r\n                                }\r\n                            });\r\n                        }\r\n                        setValidated(true);\r\n                        // console.log(formDataObj);\r\n\r\n                    }}>\r\n\r\n                        <FloatingLabel className=\"mb-3\" controlId=\"formBasicEmail\" label={translate(\"ORDERS.ADDRESS_NAME\")}>\r\n                            <Form.Control type=\"text\" placeholder=\"...\" name=\"placename\" required />\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                Please add place name\r\n                            </Form.Control.Feedback>\r\n                        </FloatingLabel>\r\n\r\n                        <FloatingLabel className=\"mb-3\" controlId=\"userTel\" label={translate(\"ORDERS.ADDRESS_PHONE\")}>\r\n                            <Form.Control type=\"tel\" placeholder=\"...\" name=\"phone\" pattern=\"^05[0-9]{8}?$\" required />\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                Please enter a valid phone number example 0568000000\r\n                            </Form.Control.Feedback>\r\n                        </FloatingLabel>\r\n\r\n                        <FloatingLabel className=\"mb-3\" controlId=\"AddressCity\" label={translate(\"ORDERS.ADDRESS_CITY\")}>\r\n                            <Form.Select name=\"city\" required>\r\n                                {/* edited (make the city required) */}\r\n                                {cities?.map?.((city) => {\r\n                                    return <option key={city.IdCity} value={city.IdCity === '0' ? \"\" : city.IdCity}>{city.Name}</option>\r\n                                })}\r\n                            </Form.Select>\r\n                        </FloatingLabel>\r\n\r\n                        <FloatingLabel className=\"mb-3\" controlId=\"userAddress\" label={translate(\"ORDERS.ADDRESS\")}>\r\n                            <Form.Control type=\"text\" placeholder=\"...\" name=\"address\" />\r\n                        </FloatingLabel>\r\n\r\n                        <FloatingLabel className=\"mb-3\" controlId=\"addressInfo\" label={translate(\"ORDERS.ADDRESS_INFO\")}>\r\n                            <Form.Control type=\"text\" placeholder=\"...\" name=\"addressinfo\" />\r\n                        </FloatingLabel>\r\n                        <Row>\r\n                            <Col md>\r\n                                <FloatingLabel className=\"mb-3\" controlId=\"addCountry\" label={translate(\"ORDERS.ADDRESS_COUNTRY\")}>\r\n                                    <Form.Control type=\"text\" placeholder=\"...\" name=\"country\" />\r\n                                </FloatingLabel>\r\n                            </Col>\r\n                            <Col>\r\n                                <FloatingLabel className=\"mb-3\" controlId=\"addressCode\" label={translate(\"ORDERS.ADDRESS_CODE\")}>\r\n                                    <Form.Control type=\"text\" placeholder=\"...\" name=\"zipcode\" />\r\n                                </FloatingLabel>\r\n                            </Col>\r\n                        </Row>\r\n\r\n                        <Form.Check\r\n                            type=\"switch\"\r\n                            id=\"custom-switch\"\r\n                            label={translate(\"ORDERS.ADDRESS_SHARED\")}\r\n                            name=\"isShared\"\r\n                        />\r\n\r\n                        <Button variant=\"outline-primary\" type=\"submit\">\r\n                            {loading && <Spinner size=\"sm\" className=\"me-1\" animation=\"border\" variant=\"light\" />}\r\n\r\n                            {translate(\"GENERAL.PROCEED\")}\r\n                        </Button>\r\n\r\n                        {/* edited (cancel button added) */}\r\n\r\n                        {\"  \"}\r\n                        <Button variant=\"danger\" onClick={handleClose}>\r\n                            {translate(\"GENERAL.CANCEL\")}\r\n                        </Button>\r\n                    </Form>\r\n                </Modal.Body>\r\n            </Modal>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}